2025-08-21T21:37:03.6121808Z ##[group]Run test "$(alembic -c services/api/alembic.ini heads | wc -l)" -eq 1
2025-08-21T21:37:03.6122352Z [36;1mtest "$(alembic -c services/api/alembic.ini heads | wc -l)" -eq 1[0m
2025-08-21T21:37:03.6174619Z shell: /usr/bin/bash -e {0}
2025-08-21T21:37:03.6175104Z env:
2025-08-21T21:37:03.6175459Z   REDIS_URL: redis://localhost:6379/0
2025-08-21T21:37:03.6175893Z   RATE_LIMIT_DEFAULT: 100/minute
2025-08-21T21:37:03.6176144Z   TRUST_X_FORWARDED: 1
2025-08-21T21:37:03.6176371Z   PG_USER: postgres
2025-08-21T21:37:03.6176610Z   PG_PASSWORD: pass
2025-08-21T21:37:03.6176815Z   PG_DATABASE: awa
2025-08-21T21:37:03.6177011Z   PG_HOST: localhost
2025-08-21T21:37:03.6177191Z   PG_PORT: 5432
2025-08-21T21:37:03.6177704Z   PG_SYNC_DSN: ***localhost:5432/awa
2025-08-21T21:37:03.6178173Z   PG_ASYNC_DSN: ***localhost:5432/awa
2025-08-21T21:37:03.6178586Z   DATABASE_URL: ***localhost:5432/awa
2025-08-21T21:37:03.6178839Z   DATA_DIR: /tmp/awa-data
2025-08-21T21:37:03.6179259Z   ENABLE_LIVE: 0
2025-08-21T21:37:03.6179485Z   TESTING: 1
2025-08-21T21:37:03.6179731Z   pythonLocation: /opt/hostedtoolcache/Python/3.12.11/x64
2025-08-21T21:37:03.6180144Z   PKG_CONFIG_PATH: /opt/hostedtoolcache/Python/3.12.11/x64/lib/pkgconfig
2025-08-21T21:37:03.6180538Z   Python_ROOT_DIR: /opt/hostedtoolcache/Python/3.12.11/x64
2025-08-21T21:37:03.6180888Z   Python2_ROOT_DIR: /opt/hostedtoolcache/Python/3.12.11/x64
2025-08-21T21:37:03.6181247Z   Python3_ROOT_DIR: /opt/hostedtoolcache/Python/3.12.11/x64
2025-08-21T21:37:03.6181613Z   LD_LIBRARY_PATH: /opt/hostedtoolcache/Python/3.12.11/x64/lib
2025-08-21T21:37:03.6181923Z ##[endgroup]
2025-08-21T21:37:03.9349848Z Traceback (most recent call last):
2025-08-21T21:37:03.9357517Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/bin/alembic", line 7, in <module>
2025-08-21T21:37:03.9358144Z     sys.exit(main())
2025-08-21T21:37:03.9358351Z              ^^^^^^
2025-08-21T21:37:03.9359183Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/alembic/config.py", line 1016, in main
2025-08-21T21:37:03.9359983Z     CommandLine(prog=prog).main(argv=argv)
2025-08-21T21:37:03.9360626Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/alembic/config.py", line 1006, in main
2025-08-21T21:37:03.9361417Z     self.run_cmd(cfg, options)
2025-08-21T21:37:03.9361996Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/alembic/config.py", line 940, in run_cmd
2025-08-21T21:37:03.9362538Z     fn(
2025-08-21T21:37:03.9363031Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/alembic/command.py", line 645, in heads
2025-08-21T21:37:03.9364001Z     heads = script.get_revisions(script.get_heads())
2025-08-21T21:37:03.9364460Z                                  ^^^^^^^^^^^^^^^^^^
2025-08-21T21:37:03.9365231Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/alembic/script/base.py", line 377, in get_heads
2025-08-21T21:37:03.9366042Z     return list(self.revision_map.heads)
2025-08-21T21:37:03.9366298Z                 ^^^^^^^^^^^^^^^^^^^^^^^
2025-08-21T21:37:03.9366907Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/util/langhelpers.py", line 1226, in __get__
2025-08-21T21:37:03.9367530Z     obj.__dict__[self.__name__] = result = self.fget(obj)
2025-08-21T21:37:03.9367820Z                                            ^^^^^^^^^^^^^^
2025-08-21T21:37:03.9368372Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/alembic/script/revision.py", line 155, in heads
2025-08-21T21:37:03.9369219Z     self._revision_map
2025-08-21T21:37:03.9369889Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/util/langhelpers.py", line 1226, in __get__
2025-08-21T21:37:03.9370828Z     obj.__dict__[self.__name__] = result = self.fget(obj)
2025-08-21T21:37:03.9371117Z                                            ^^^^^^^^^^^^^^
2025-08-21T21:37:03.9372135Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/alembic/script/revision.py", line 209, in _revision_map
2025-08-21T21:37:03.9373158Z     for revision in self._generator():
2025-08-21T21:37:03.9373411Z                     ^^^^^^^^^^^^^^^^^
2025-08-21T21:37:03.9373987Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/alembic/script/base.py", line 159, in _load_revisions
2025-08-21T21:37:03.9374680Z     script = Script._from_path(self, real_path)
2025-08-21T21:37:03.9375095Z              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-21T21:37:03.9375779Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/alembic/script/base.py", line 1037, in _from_path
2025-08-21T21:37:03.9376433Z     module = util.load_python_file(dir_, filename)
2025-08-21T21:37:03.9376724Z              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-21T21:37:03.9377526Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/alembic/util/pyfiles.py", line 116, in load_python_file
2025-08-21T21:37:03.9378257Z     module = load_module_py(module_id, path)
2025-08-21T21:37:03.9378545Z              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-21T21:37:03.9379352Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/alembic/util/pyfiles.py", line 136, in load_module_py
2025-08-21T21:37:03.9379992Z     spec.loader.exec_module(module)  # type: ignore
2025-08-21T21:37:03.9380263Z     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-21T21:37:03.9380624Z   File "<frozen importlib._bootstrap_external>", line 999, in exec_module
2025-08-21T21:37:03.9381163Z   File "<frozen importlib._bootstrap>", line 488, in _call_with_frames_removed
2025-08-21T21:37:03.9381847Z   File "/home/runner/work/AWA-App/AWA-App/services/api/migrations/versions/0023_add_storage_fee.py", line 7, in <module>
2025-08-21T21:37:03.9382428Z     from services.db.utils.views import replace_view
2025-08-21T21:37:03.9382746Z ModuleNotFoundError: No module named 'services'
2025-08-21T21:37:03.9876512Z ##[error]Process completed with exit code 1.
