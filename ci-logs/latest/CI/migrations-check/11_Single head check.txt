2025-08-21T21:28:20.4159948Z ##[group]Run test "$(alembic -c services/api/alembic.ini heads | wc -l)" -eq 1
2025-08-21T21:28:20.4160479Z [36;1mtest "$(alembic -c services/api/alembic.ini heads | wc -l)" -eq 1[0m
2025-08-21T21:28:20.4200024Z shell: /usr/bin/bash -e {0}
2025-08-21T21:28:20.4200257Z env:
2025-08-21T21:28:20.4200459Z   REDIS_URL: redis://localhost:6379/0
2025-08-21T21:28:20.4200727Z   RATE_LIMIT_DEFAULT: 100/minute
2025-08-21T21:28:20.4201116Z   TRUST_X_FORWARDED: 1
2025-08-21T21:28:20.4201315Z   PG_USER: postgres
2025-08-21T21:28:20.4201500Z   PG_PASSWORD: pass
2025-08-21T21:28:20.4201672Z   PG_DATABASE: awa
2025-08-21T21:28:20.4201841Z   PG_HOST: localhost
2025-08-21T21:28:20.4202020Z   PG_PORT: 5432
2025-08-21T21:28:20.4202430Z   PG_SYNC_DSN: ***localhost:5432/awa
2025-08-21T21:28:20.4202823Z   PG_ASYNC_DSN: ***localhost:5432/awa
2025-08-21T21:28:20.4203188Z   DATABASE_URL: ***localhost:5432/awa
2025-08-21T21:28:20.4203413Z   DATA_DIR: /tmp/awa-data
2025-08-21T21:28:20.4203613Z   ENABLE_LIVE: 0
2025-08-21T21:28:20.4203820Z   TESTING: 1
2025-08-21T21:28:20.4204069Z   pythonLocation: /opt/hostedtoolcache/Python/3.12.11/x64
2025-08-21T21:28:20.4204465Z   PKG_CONFIG_PATH: /opt/hostedtoolcache/Python/3.12.11/x64/lib/pkgconfig
2025-08-21T21:28:20.4204846Z   Python_ROOT_DIR: /opt/hostedtoolcache/Python/3.12.11/x64
2025-08-21T21:28:20.4205180Z   Python2_ROOT_DIR: /opt/hostedtoolcache/Python/3.12.11/x64
2025-08-21T21:28:20.4205522Z   Python3_ROOT_DIR: /opt/hostedtoolcache/Python/3.12.11/x64
2025-08-21T21:28:20.4205867Z   LD_LIBRARY_PATH: /opt/hostedtoolcache/Python/3.12.11/x64/lib
2025-08-21T21:28:20.4206148Z ##[endgroup]
2025-08-21T21:28:20.7304076Z Traceback (most recent call last):
2025-08-21T21:28:20.7311201Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/bin/alembic", line 7, in <module>
2025-08-21T21:28:20.7311763Z     sys.exit(main())
2025-08-21T21:28:20.7311967Z              ^^^^^^
2025-08-21T21:28:20.7312489Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/alembic/config.py", line 1016, in main
2025-08-21T21:28:20.7314887Z     CommandLine(prog=prog).main(argv=argv)
2025-08-21T21:28:20.7315928Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/alembic/config.py", line 1006, in main
2025-08-21T21:28:20.7316831Z     self.run_cmd(cfg, options)
2025-08-21T21:28:20.7317742Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/alembic/config.py", line 940, in run_cmd
2025-08-21T21:28:20.7318593Z     fn(
2025-08-21T21:28:20.7319387Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/alembic/command.py", line 645, in heads
2025-08-21T21:28:20.7320360Z     heads = script.get_revisions(script.get_heads())
2025-08-21T21:28:20.7320879Z                                  ^^^^^^^^^^^^^^^^^^
2025-08-21T21:28:20.7322077Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/alembic/script/base.py", line 377, in get_heads
2025-08-21T21:28:20.7323111Z     return list(self.revision_map.heads)
2025-08-21T21:28:20.7323537Z                 ^^^^^^^^^^^^^^^^^^^^^^^
2025-08-21T21:28:20.7324578Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/util/langhelpers.py", line 1226, in __get__
2025-08-21T21:28:20.7325651Z     obj.__dict__[self.__name__] = result = self.fget(obj)
2025-08-21T21:28:20.7326164Z                                            ^^^^^^^^^^^^^^
2025-08-21T21:28:20.7327151Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/alembic/script/revision.py", line 155, in heads
2025-08-21T21:28:20.7328107Z     self._revision_map
2025-08-21T21:28:20.7329071Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/util/langhelpers.py", line 1226, in __get__
2025-08-21T21:28:20.7330108Z     obj.__dict__[self.__name__] = result = self.fget(obj)
2025-08-21T21:28:20.7330588Z                                            ^^^^^^^^^^^^^^
2025-08-21T21:28:20.7331830Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/alembic/script/revision.py", line 209, in _revision_map
2025-08-21T21:28:20.7333249Z     for revision in self._generator():
2025-08-21T21:28:20.7333691Z                     ^^^^^^^^^^^^^^^^^
2025-08-21T21:28:20.7334725Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/alembic/script/base.py", line 159, in _load_revisions
2025-08-21T21:28:20.7335699Z     script = Script._from_path(self, real_path)
2025-08-21T21:28:20.7336153Z              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-21T21:28:20.7336991Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/alembic/script/base.py", line 1037, in _from_path
2025-08-21T21:28:20.7337863Z     module = util.load_python_file(dir_, filename)
2025-08-21T21:28:20.7338267Z              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-21T21:28:20.7339134Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/alembic/util/pyfiles.py", line 116, in load_python_file
2025-08-21T21:28:20.7340009Z     module = load_module_py(module_id, path)
2025-08-21T21:28:20.7340407Z              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-21T21:28:20.7341439Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/alembic/util/pyfiles.py", line 136, in load_module_py
2025-08-21T21:28:20.7342300Z     spec.loader.exec_module(module)  # type: ignore
2025-08-21T21:28:20.7342711Z     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-21T21:28:20.7343222Z   File "<frozen importlib._bootstrap_external>", line 999, in exec_module
2025-08-21T21:28:20.7343953Z   File "<frozen importlib._bootstrap>", line 488, in _call_with_frames_removed
2025-08-21T21:28:20.7344943Z   File "/home/runner/work/AWA-App/AWA-App/services/api/migrations/versions/0023_add_storage_fee.py", line 7, in <module>
2025-08-21T21:28:20.7345791Z     from services.db.utils.views import replace_view
2025-08-21T21:28:20.7346258Z ModuleNotFoundError: No module named 'services'
2025-08-21T21:28:20.7844039Z ##[error]Process completed with exit code 1.
