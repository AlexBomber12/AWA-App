2025-08-20T20:56:55.7159289Z ##[group]Run pytest -q --cov=services --cov-report=xml
2025-08-20T20:56:55.7159966Z [36;1mpytest -q --cov=services --cov-report=xml[0m
2025-08-20T20:56:55.7203419Z shell: /usr/bin/bash -e {0}
2025-08-20T20:56:55.7203795Z env:
2025-08-20T20:56:55.7204142Z   REDIS_URL: redis://localhost:6379/0
2025-08-20T20:56:55.7204802Z   RATE_LIMIT_DEFAULT: 100/minute
2025-08-20T20:56:55.7205190Z   TRUST_X_FORWARDED: 1
2025-08-20T20:56:55.7205534Z   PG_USER: postgres
2025-08-20T20:56:55.7205863Z   PG_PASSWORD: pass
2025-08-20T20:56:55.7206189Z   PG_DATABASE: awa
2025-08-20T20:56:55.7206415Z   PG_HOST: localhost
2025-08-20T20:56:55.7206627Z   PG_PORT: 5432
2025-08-20T20:56:55.7207254Z   PG_SYNC_DSN: ***localhost:5432/awa
2025-08-20T20:56:55.7207999Z   PG_ASYNC_DSN: ***localhost:5432/awa
2025-08-20T20:56:55.7208684Z   DATABASE_URL: ***localhost:5432/awa
2025-08-20T20:56:55.7209089Z   DATA_DIR: /tmp/awa-data
2025-08-20T20:56:55.7209441Z   ENABLE_LIVE: 0
2025-08-20T20:56:55.7209745Z   TESTING: 1
2025-08-20T20:56:55.7210149Z   pythonLocation: /opt/hostedtoolcache/Python/3.12.11/x64
2025-08-20T20:56:55.7210880Z   PKG_CONFIG_PATH: /opt/hostedtoolcache/Python/3.12.11/x64/lib/pkgconfig
2025-08-20T20:56:55.7211559Z   Python_ROOT_DIR: /opt/hostedtoolcache/Python/3.12.11/x64
2025-08-20T20:56:55.7212180Z   Python2_ROOT_DIR: /opt/hostedtoolcache/Python/3.12.11/x64
2025-08-20T20:56:55.7212809Z   Python3_ROOT_DIR: /opt/hostedtoolcache/Python/3.12.11/x64
2025-08-20T20:56:55.7213201Z   LD_LIBRARY_PATH: /opt/hostedtoolcache/Python/3.12.11/x64/lib
2025-08-20T20:56:55.7213508Z ##[endgroup]
2025-08-20T20:57:03.3257711Z 
2025-08-20T20:57:03.3258233Z ==================================== ERRORS ====================================
2025-08-20T20:57:03.3258959Z ____________ ERROR collecting tests/etl/test_amazon_new_dialects.py ____________
2025-08-20T20:57:03.3259522Z tests/etl/test_amazon_new_dialects.py:5: in <module>
2025-08-20T20:57:03.3259837Z     from services.etl.dialects import (
2025-08-20T20:57:03.3260130Z services/etl/dialects/schemas.py:4: in <module>
2025-08-20T20:57:03.3260420Z     import pandera as pa
2025-08-20T20:57:03.3260853Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/pandera/__init__.py:5: in <module>
2025-08-20T20:57:03.3261311Z     import pandera.backends
2025-08-20T20:57:03.3261760Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/pandera/backends/__init__.py:4: in <module>
2025-08-20T20:57:03.3262271Z     import pandera.backends.base.builtin_checks
2025-08-20T20:57:03.3262829Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/pandera/backends/base/builtin_checks.py:14: in <module>
2025-08-20T20:57:03.3263367Z     from pandera.api.checks import Check
2025-08-20T20:57:03.3264092Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/pandera/api/checks.py:17: in <module>
2025-08-20T20:57:03.3264919Z     from pandera.strategies.base_strategies import SearchStrategy
2025-08-20T20:57:03.3265477Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/pandera/strategies/__init__.py:3: in <module>
2025-08-20T20:57:03.3266053Z     from pandera.strategies.pandas_strategies import *
2025-08-20T20:57:03.3266625Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/pandera/strategies/pandas_strategies.py:42: in <module>
2025-08-20T20:57:03.3267201Z     from pandera.engines import numpy_engine, pandas_engine
2025-08-20T20:57:03.3267753Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/pandera/engines/pandas_engine.py:757: in <module>
2025-08-20T20:57:03.3268241Z     np.string_,
2025-08-20T20:57:03.3268408Z     ^^^^^^^^^^
2025-08-20T20:57:03.3268797Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/numpy/__init__.py:781: in __getattr__
2025-08-20T20:57:03.3269258Z     raise AttributeError(
2025-08-20T20:57:03.3269623Z E   AttributeError: `np.string_` was removed in the NumPy 2.0 release. Use `np.bytes_` instead.
2025-08-20T20:57:03.3270108Z ________________ ERROR collecting tests/etl/test_idempotency.py ________________
2025-08-20T20:57:03.3270665Z tests/etl/test_idempotency.py:7: in <module>
2025-08-20T20:57:03.3270960Z     from etl.load_csv import _sha256_file, import_file
2025-08-20T20:57:03.3271230Z etl/load_csv.py:15: in <module>
2025-08-20T20:57:03.3271464Z     from services.etl.dialects import (
2025-08-20T20:57:03.3271738Z services/etl/dialects/schemas.py:4: in <module>
2025-08-20T20:57:03.3272003Z     import pandera as pa
2025-08-20T20:57:03.3272406Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/pandera/__init__.py:5: in <module>
2025-08-20T20:57:03.3272852Z     import pandera.backends
2025-08-20T20:57:03.3273311Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/pandera/backends/__init__.py:4: in <module>
2025-08-20T20:57:03.3273819Z     import pandera.backends.base.builtin_checks
2025-08-20T20:57:03.3274368Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/pandera/backends/base/builtin_checks.py:14: in <module>
2025-08-20T20:57:03.3275033Z     from pandera.api.checks import Check
2025-08-20T20:57:03.3275496Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/pandera/api/checks.py:17: in <module>
2025-08-20T20:57:03.3276029Z     from pandera.strategies.base_strategies import SearchStrategy
2025-08-20T20:57:03.3276583Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/pandera/strategies/__init__.py:3: in <module>
2025-08-20T20:57:03.3277103Z     from pandera.strategies.pandas_strategies import *
2025-08-20T20:57:03.3277655Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/pandera/strategies/pandas_strategies.py:42: in <module>
2025-08-20T20:57:03.3278220Z     from pandera.engines import numpy_engine, pandas_engine
2025-08-20T20:57:03.3278776Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/pandera/engines/pandas_engine.py:757: in <module>
2025-08-20T20:57:03.3279273Z     np.string_,
2025-08-20T20:57:03.3279432Z     ^^^^^^^^^^
2025-08-20T20:57:03.3279819Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/numpy/__init__.py:781: in __getattr__
2025-08-20T20:57:03.3280275Z     raise AttributeError(
2025-08-20T20:57:03.3280625Z E   AttributeError: `np.string_` was removed in the NumPy 2.0 release. Use `np.bytes_` instead.
2025-08-20T20:57:03.3281112Z ______________ ERROR collecting tests/etl/test_pandera_schemas.py ______________
2025-08-20T20:57:03.3281477Z tests/etl/test_pandera_schemas.py:7: in <module>
2025-08-20T20:57:03.3281802Z     from services.etl.dialects import amazon_returns, schemas
2025-08-20T20:57:03.3282120Z services/etl/dialects/schemas.py:4: in <module>
2025-08-20T20:57:03.3282381Z     import pandera as pa
2025-08-20T20:57:03.3282922Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/pandera/__init__.py:5: in <module>
2025-08-20T20:57:03.3283355Z     import pandera.backends
2025-08-20T20:57:03.3283787Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/pandera/backends/__init__.py:4: in <module>
2025-08-20T20:57:03.3284283Z     import pandera.backends.base.builtin_checks
2025-08-20T20:57:03.3285039Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/pandera/backends/base/builtin_checks.py:14: in <module>
2025-08-20T20:57:03.3285567Z     from pandera.api.checks import Check
2025-08-20T20:57:03.3286025Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/pandera/api/checks.py:17: in <module>
2025-08-20T20:57:03.3286546Z     from pandera.strategies.base_strategies import SearchStrategy
2025-08-20T20:57:03.3287121Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/pandera/strategies/__init__.py:3: in <module>
2025-08-20T20:57:03.3287637Z     from pandera.strategies.pandas_strategies import *
2025-08-20T20:57:03.3288198Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/pandera/strategies/pandas_strategies.py:42: in <module>
2025-08-20T20:57:03.3288828Z     from pandera.engines import numpy_engine, pandas_engine
2025-08-20T20:57:03.3289563Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/pandera/engines/pandas_engine.py:757: in <module>
2025-08-20T20:57:03.3290040Z     np.string_,
2025-08-20T20:57:03.3290208Z     ^^^^^^^^^^
2025-08-20T20:57:03.3290586Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/numpy/__init__.py:781: in __getattr__
2025-08-20T20:57:03.3291031Z     raise AttributeError(
2025-08-20T20:57:03.3291383Z E   AttributeError: `np.string_` was removed in the NumPy 2.0 release. Use `np.bytes_` instead.
2025-08-20T20:57:03.3291871Z ______________ ERROR collecting tests/etl/test_returns_ingest.py _______________
2025-08-20T20:57:03.3292235Z tests/etl/test_returns_ingest.py:4: in <module>
2025-08-20T20:57:03.3292500Z     from etl import load_csv
2025-08-20T20:57:03.3292716Z etl/load_csv.py:15: in <module>
2025-08-20T20:57:03.3292953Z     from services.etl.dialects import (
2025-08-20T20:57:03.3293222Z services/etl/dialects/schemas.py:4: in <module>
2025-08-20T20:57:03.3293474Z     import pandera as pa
2025-08-20T20:57:03.3293886Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/pandera/__init__.py:5: in <module>
2025-08-20T20:57:03.3294339Z     import pandera.backends
2025-08-20T20:57:03.3294875Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/pandera/backends/__init__.py:4: in <module>
2025-08-20T20:57:03.3295369Z     import pandera.backends.base.builtin_checks
2025-08-20T20:57:03.3295918Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/pandera/backends/base/builtin_checks.py:14: in <module>
2025-08-20T20:57:03.3296444Z     from pandera.api.checks import Check
2025-08-20T20:57:03.3296894Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/pandera/api/checks.py:17: in <module>
2025-08-20T20:57:03.3297421Z     from pandera.strategies.base_strategies import SearchStrategy
2025-08-20T20:57:03.3297977Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/pandera/strategies/__init__.py:3: in <module>
2025-08-20T20:57:03.3298495Z     from pandera.strategies.pandas_strategies import *
2025-08-20T20:57:03.3299050Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/pandera/strategies/pandas_strategies.py:42: in <module>
2025-08-20T20:57:03.3299615Z     from pandera.engines import numpy_engine, pandas_engine
2025-08-20T20:57:03.3300157Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/pandera/engines/pandas_engine.py:757: in <module>
2025-08-20T20:57:03.3300629Z     np.string_,
2025-08-20T20:57:03.3300793Z     ^^^^^^^^^^
2025-08-20T20:57:03.3301168Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/numpy/__init__.py:781: in __getattr__
2025-08-20T20:57:03.3301743Z     raise AttributeError(
2025-08-20T20:57:03.3302096Z E   AttributeError: `np.string_` was removed in the NumPy 2.0 release. Use `np.bytes_` instead.
2025-08-20T20:57:03.3302585Z ___________ ERROR collecting tests/ingest/test_analyze_threshold.py ____________
2025-08-20T20:57:03.3302973Z tests/ingest/test_analyze_threshold.py:7: in <module>
2025-08-20T20:57:03.3303266Z     from etl.load_csv import import_file
2025-08-20T20:57:03.3303509Z etl/load_csv.py:15: in <module>
2025-08-20T20:57:03.3303738Z     from services.etl.dialects import (
2025-08-20T20:57:03.3304001Z services/etl/dialects/schemas.py:4: in <module>
2025-08-20T20:57:03.3304263Z     import pandera as pa
2025-08-20T20:57:03.3304868Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/pandera/__init__.py:5: in <module>
2025-08-20T20:57:03.3305311Z     import pandera.backends
2025-08-20T20:57:03.3305739Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/pandera/backends/__init__.py:4: in <module>
2025-08-20T20:57:03.3306234Z     import pandera.backends.base.builtin_checks
2025-08-20T20:57:03.3306773Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/pandera/backends/base/builtin_checks.py:14: in <module>
2025-08-20T20:57:03.3307293Z     from pandera.api.checks import Check
2025-08-20T20:57:03.3307873Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/pandera/api/checks.py:17: in <module>
2025-08-20T20:57:03.3308395Z     from pandera.strategies.base_strategies import SearchStrategy
2025-08-20T20:57:03.3308941Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/pandera/strategies/__init__.py:3: in <module>
2025-08-20T20:57:03.3309453Z     from pandera.strategies.pandas_strategies import *
2025-08-20T20:57:03.3310009Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/pandera/strategies/pandas_strategies.py:42: in <module>
2025-08-20T20:57:03.3310565Z     from pandera.engines import numpy_engine, pandas_engine
2025-08-20T20:57:03.3311107Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/pandera/engines/pandas_engine.py:757: in <module>
2025-08-20T20:57:03.3311576Z     np.string_,
2025-08-20T20:57:03.3311738Z     ^^^^^^^^^^
2025-08-20T20:57:03.6377095Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/numpy/__init__.py:781: in __getattr__
2025-08-20T20:57:03.6377893Z     raise AttributeError(
2025-08-20T20:57:03.6378396Z E   AttributeError: `np.string_` was removed in the NumPy 2.0 release. Use `np.bytes_` instead.
2025-08-20T20:57:03.6378956Z =============================== warnings summary ===============================
2025-08-20T20:57:03.6379582Z ../../../../../opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/pydantic/fields.py:1093
2025-08-20T20:57:03.6381851Z   /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/pydantic/fields.py:1093: PydanticDeprecatedSince20: Using extra keyword arguments on `Field` is deprecated and will be removed. Use `json_schema_extra` instead. (Extra keys: 'strip_whitespace'). Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/
2025-08-20T20:57:03.6383258Z     warn(
2025-08-20T20:57:03.6383363Z 
2025-08-20T20:57:03.6383469Z services/alert_bot/tests/test_smoke.py:5
2025-08-20T20:57:03.6384887Z   /home/runner/work/AWA-App/AWA-App/services/alert_bot/tests/test_smoke.py:5: UserWarning: pkg_resources is deprecated as an API. See https://setuptools.pypa.io/en/latest/pkg_resources.html. The pkg_resources package is slated for removal as early as 2025-11-30. Refrain from using this package or pin to Setuptools<81.
2025-08-20T20:57:03.6386044Z     import pkg_resources  # noqa: F401
2025-08-20T20:57:03.6386225Z 
2025-08-20T20:57:03.6386431Z -- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
2025-08-20T20:57:03.6386854Z =========================== short test summary info ============================
2025-08-20T20:57:03.6387473Z ERROR tests/etl/test_amazon_new_dialects.py - AttributeError: `np.string_` was removed in the NumPy 2.0 release. Use `np.bytes_` instead.
2025-08-20T20:57:03.6388843Z ERROR tests/etl/test_idempotency.py - AttributeError: `np.string_` was removed in the NumPy 2.0 release. Use `np.bytes_` instead.
2025-08-20T20:57:03.6389676Z ERROR tests/etl/test_pandera_schemas.py - AttributeError: `np.string_` was removed in the NumPy 2.0 release. Use `np.bytes_` instead.
2025-08-20T20:57:03.6390519Z ERROR tests/etl/test_returns_ingest.py - AttributeError: `np.string_` was removed in the NumPy 2.0 release. Use `np.bytes_` instead.
2025-08-20T20:57:03.6391351Z ERROR tests/ingest/test_analyze_threshold.py - AttributeError: `np.string_` was removed in the NumPy 2.0 release. Use `np.bytes_` instead.
2025-08-20T20:57:03.6392188Z !!!!!!!!!!!!!!!!!!! Interrupted: 5 errors during collection !!!!!!!!!!!!!!!!!!!!
2025-08-20T20:57:03.9479630Z ##[error]Process completed with exit code 2.
