2025-08-19T21:14:35.4485244Z ##[group]Run pytest -q --cov=services
2025-08-19T21:14:35.4485806Z [36;1mpytest -q --cov=services[0m
2025-08-19T21:14:35.4526823Z shell: /usr/bin/bash -e {0}
2025-08-19T21:14:35.4527063Z env:
2025-08-19T21:14:35.4527269Z   REDIS_URL: redis://localhost:6379/0
2025-08-19T21:14:35.4527542Z   RATE_LIMIT_DEFAULT: 100/minute
2025-08-19T21:14:35.4527773Z   TRUST_X_FORWARDED: 1
2025-08-19T21:14:35.4527976Z   PG_USER: postgres
2025-08-19T21:14:35.4528170Z   PG_PASSWORD: pass
2025-08-19T21:14:35.4528366Z   PG_DATABASE: awa
2025-08-19T21:14:35.4528555Z   PG_HOST: localhost
2025-08-19T21:14:35.4528748Z   PG_PORT: 5432
2025-08-19T21:14:35.4529175Z   PG_SYNC_DSN: ***localhost:5432/awa
2025-08-19T21:14:35.4529582Z   PG_ASYNC_DSN: ***localhost:5432/awa
2025-08-19T21:14:35.4529997Z   DATABASE_URL: ***localhost:5432/awa
2025-08-19T21:14:35.4530255Z   DATA_DIR: /home/runner/work/_temp/awa-data
2025-08-19T21:14:35.4530507Z   ENABLE_LIVE: 0
2025-08-19T21:14:35.4530686Z   TESTING: 1
2025-08-19T21:14:35.4530941Z   pythonLocation: /opt/hostedtoolcache/Python/3.12.11/x64
2025-08-19T21:14:35.4531360Z   PKG_CONFIG_PATH: /opt/hostedtoolcache/Python/3.12.11/x64/lib/pkgconfig
2025-08-19T21:14:35.4531752Z   Python_ROOT_DIR: /opt/hostedtoolcache/Python/3.12.11/x64
2025-08-19T21:14:35.4532104Z   Python2_ROOT_DIR: /opt/hostedtoolcache/Python/3.12.11/x64
2025-08-19T21:14:35.4532681Z   Python3_ROOT_DIR: /opt/hostedtoolcache/Python/3.12.11/x64
2025-08-19T21:14:35.4533080Z   LD_LIBRARY_PATH: /opt/hostedtoolcache/Python/3.12.11/x64/lib
2025-08-19T21:14:35.4533392Z   POSTGRES_USER: postgres
2025-08-19T21:14:35.4533607Z   POSTGRES_PASSWORD: pass
2025-08-19T21:14:35.4533816Z   POSTGRES_DB: awa
2025-08-19T21:14:35.4534004Z   LLM_PROVIDER: lan
2025-08-19T21:14:35.4534225Z   LLM_BASE_URL: http://localhost:8000
2025-08-19T21:14:35.4534477Z ##[endgroup]
2025-08-19T21:15:08.8757370Z .....FFFs.............................sssssss...........F............... [ 41%]
2025-08-19T21:15:47.9171972Z ......F............................FFF..FFF...........FFFFFFF.FFF....... [ 83%]
2025-08-19T21:15:48.5622293Z ............................                                             [100%]
2025-08-19T21:15:48.5623249Z =================================== FAILURES ===================================
2025-08-19T21:15:48.5624030Z ___________________________ test_ingest_file_upload ____________________________
2025-08-19T21:15:48.5624463Z 
2025-08-19T21:15:48.5624881Z monkeypatch = <_pytest.monkeypatch.MonkeyPatch object at 0x7f3f445fc950>
2025-08-19T21:15:48.5625888Z tmp_path = PosixPath('/tmp/pytest-of-runner/pytest-0/test_ingest_file_upload0')
2025-08-19T21:15:48.5626273Z 
2025-08-19T21:15:48.5626485Z     def test_ingest_file_upload(monkeypatch, tmp_path) -> None:
2025-08-19T21:15:48.5627006Z         def fake_import_file(path: str, report_type=None, celery_update=None, force=False):
2025-08-19T21:15:48.5627566Z             return {"rows": 2, "dialect": "returns_report", "target_table": "returns_raw"}
2025-08-19T21:15:48.5627911Z     
2025-08-19T21:15:48.5628495Z         monkeypatch.setattr("etl.load_csv.import_file", fake_import_file)
2025-08-19T21:15:48.5628949Z >       with _get_client(monkeypatch) as client:
2025-08-19T21:15:48.5629247Z              ^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.5629401Z 
2025-08-19T21:15:48.5629571Z tests/api/test_ingest_endpoints.py:31: 
2025-08-19T21:15:48.5629966Z _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
2025-08-19T21:15:48.5630629Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/testclient.py:694: in __enter__
2025-08-19T21:15:48.5631162Z     portal.call(self.wait_startup)
2025-08-19T21:15:48.5631903Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/from_thread.py:291: in call
2025-08-19T21:15:48.5632964Z     return cast(T_Retval, self.start_task_soon(func, *args).result())
2025-08-19T21:15:48.5633358Z                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.5633938Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/concurrent/futures/_base.py:456: in result
2025-08-19T21:15:48.5634674Z     return self.__get_result()
2025-08-19T21:15:48.5634921Z            ^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.5635466Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/concurrent/futures/_base.py:401: in __get_result
2025-08-19T21:15:48.5635935Z     raise self._exception
2025-08-19T21:15:48.5636508Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/from_thread.py:222: in _call_func
2025-08-19T21:15:48.5637033Z     retval = await retval_or_awaitable
2025-08-19T21:15:48.5637308Z              ^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.5637928Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/testclient.py:729: in wait_startup
2025-08-19T21:15:48.5638434Z     await receive()
2025-08-19T21:15:48.5639041Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/testclient.py:720: in receive
2025-08-19T21:15:48.5639545Z     self.task.result()
2025-08-19T21:15:48.5640065Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/concurrent/futures/_base.py:449: in result
2025-08-19T21:15:48.5640532Z     return self.__get_result()
2025-08-19T21:15:48.5640776Z            ^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.5641475Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/concurrent/futures/_base.py:401: in __get_result
2025-08-19T21:15:48.5642308Z     raise self._exception
2025-08-19T21:15:48.5643446Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/from_thread.py:222: in _call_func
2025-08-19T21:15:48.5644162Z     retval = await retval_or_awaitable
2025-08-19T21:15:48.5644433Z              ^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.5645019Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/testclient.py:710: in lifespan
2025-08-19T21:15:48.5645654Z     await self.app(scope, self.stream_receive.receive, self.stream_send.send)
2025-08-19T21:15:48.5646351Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/applications.py:1054: in __call__
2025-08-19T21:15:48.5646900Z     await super().__call__(scope, receive, send)
2025-08-19T21:15:48.5647651Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/starlette.py:408: in _sentry_patched_asgi_app
2025-08-19T21:15:48.5648288Z     return await middleware(scope, receive, send)
2025-08-19T21:15:48.5648595Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.5649239Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/asgi.py:179: in _run_asgi3
2025-08-19T21:15:48.5649875Z     return await self._run_app(scope, receive, send, asgi_version=3)
2025-08-19T21:15:48.5650249Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.5651194Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/asgi.py:194: in _run_app
2025-08-19T21:15:48.5652056Z     raise exc from None
2025-08-19T21:15:48.5652833Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/asgi.py:190: in _run_app
2025-08-19T21:15:48.5653397Z     return await self.app(scope, receive, send)
2025-08-19T21:15:48.5653698Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.5654299Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/applications.py:113: in __call__
2025-08-19T21:15:48.5654854Z     await self.middleware_stack(scope, receive, send)
2025-08-19T21:15:48.5655590Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/starlette.py:199: in _create_span_call
2025-08-19T21:15:48.5656266Z     return await old_call(app, scope, new_receive, new_send, **kwargs)
2025-08-19T21:15:48.5656644Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.5657276Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/middleware/errors.py:151: in __call__
2025-08-19T21:15:48.5657985Z     await self.app(scope, receive, send)
2025-08-19T21:15:48.5658700Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/starlette.py:199: in _create_span_call
2025-08-19T21:15:48.5659376Z     return await old_call(app, scope, new_receive, new_send, **kwargs)
2025-08-19T21:15:48.5659744Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.5660446Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/asgi_correlation_id/middleware.py:50: in __call__
2025-08-19T21:15:48.5661464Z     await self.app(scope, receive, send)
2025-08-19T21:15:48.5662278Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/starlette.py:297: in _sentry_exceptionmiddleware_call
2025-08-19T21:15:48.5663193Z     await old_call(self, scope, receive, send)
2025-08-19T21:15:48.5663901Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/starlette.py:199: in _create_span_call
2025-08-19T21:15:48.5664588Z     return await old_call(app, scope, new_receive, new_send, **kwargs)
2025-08-19T21:15:48.5664964Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.5665623Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/middleware/exceptions.py:49: in __call__
2025-08-19T21:15:48.5666176Z     await self.app(scope, receive, send)
2025-08-19T21:15:48.5666761Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py:716: in __call__
2025-08-19T21:15:48.5667296Z     await self.middleware_stack(scope, receive, send)
2025-08-19T21:15:48.5667890Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py:725: in app
2025-08-19T21:15:48.5668386Z     await self.lifespan(scope, receive, send)
2025-08-19T21:15:48.5669362Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py:694: in lifespan
2025-08-19T21:15:48.5670346Z     async with self.lifespan_context(app) as maybe_state:
2025-08-19T21:15:48.5670888Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.5671849Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/contextlib.py:210: in __aenter__
2025-08-19T21:15:48.5672375Z     return await anext(self.gen)
2025-08-19T21:15:48.5672827Z            ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.5673413Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py:134: in merged_lifespan
2025-08-19T21:15:48.5673993Z     async with original_context(app) as maybe_original_state:
2025-08-19T21:15:48.5674319Z                ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.5674789Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/contextlib.py:210: in __aenter__
2025-08-19T21:15:48.5675207Z     return await anext(self.gen)
2025-08-19T21:15:48.5675450Z            ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.5676015Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py:134: in merged_lifespan
2025-08-19T21:15:48.5676804Z     async with original_context(app) as maybe_original_state:
2025-08-19T21:15:48.5677131Z                ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.5677603Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/contextlib.py:210: in __aenter__
2025-08-19T21:15:48.5678027Z     return await anext(self.gen)
2025-08-19T21:15:48.5678272Z            ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.5678841Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py:134: in merged_lifespan
2025-08-19T21:15:48.5679651Z     async with original_context(app) as maybe_original_state:
2025-08-19T21:15:48.5680206Z                ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.5680804Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/contextlib.py:210: in __aenter__
2025-08-19T21:15:48.5681227Z     return await anext(self.gen)
2025-08-19T21:15:48.5681469Z            ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.5682039Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py:134: in merged_lifespan
2025-08-19T21:15:48.5682974Z     async with original_context(app) as maybe_original_state:
2025-08-19T21:15:48.5683296Z                ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.5683762Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/contextlib.py:210: in __aenter__
2025-08-19T21:15:48.5684172Z     return await anext(self.gen)
2025-08-19T21:15:48.5684408Z            ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.5684967Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py:134: in merged_lifespan
2025-08-19T21:15:48.5685532Z     async with original_context(app) as maybe_original_state:
2025-08-19T21:15:48.5685846Z                ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.5686306Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/contextlib.py:210: in __aenter__
2025-08-19T21:15:48.5686718Z     return await anext(self.gen)
2025-08-19T21:15:48.5686964Z            ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.5687532Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py:134: in merged_lifespan
2025-08-19T21:15:48.5688537Z     async with original_context(app) as maybe_original_state:
2025-08-19T21:15:48.5689077Z                ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.5689550Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/contextlib.py:210: in __aenter__
2025-08-19T21:15:48.5689967Z     return await anext(self.gen)
2025-08-19T21:15:48.5690206Z            ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.5690470Z services/api/main.py:76: in lifespan
2025-08-19T21:15:48.5690715Z     await _check_llm()
2025-08-19T21:15:48.5691040Z _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
2025-08-19T21:15:48.5691245Z 
2025-08-19T21:15:48.5691361Z     async def _check_llm() -> None:
2025-08-19T21:15:48.5691821Z >       from services.common.llm import LAN_BASE, LLM_PROVIDER, LLM_PROVIDER_FALLBACK
2025-08-19T21:15:48.5692854Z E       ImportError: cannot import name 'LLM_PROVIDER' from 'services.common.llm' (/home/runner/work/AWA-App/AWA-App/services/common/llm.py)
2025-08-19T21:15:48.5693328Z 
2025-08-19T21:15:48.5693473Z services/api/main.py:173: ImportError
2025-08-19T21:15:48.5693870Z _____________________________ test_ingest_json_uri _____________________________
2025-08-19T21:15:48.5694103Z 
2025-08-19T21:15:48.5694369Z monkeypatch = <_pytest.monkeypatch.MonkeyPatch object at 0x7f3f319235f0>
2025-08-19T21:15:48.5694924Z tmp_path = PosixPath('/tmp/pytest-of-runner/pytest-0/test_ingest_json_uri0')
2025-08-19T21:15:48.5695201Z 
2025-08-19T21:15:48.5695388Z     def test_ingest_json_uri(monkeypatch, tmp_path) -> None:
2025-08-19T21:15:48.5695875Z         def fake_import_file(path: str, report_type=None, celery_update=None, force=False):
2025-08-19T21:15:48.5696806Z             return {"rows": 1, "dialect": "returns_report", "target_table": "returns_raw"}
2025-08-19T21:15:48.5697296Z     
2025-08-19T21:15:48.5697754Z         monkeypatch.setattr("etl.load_csv.import_file", fake_import_file)
2025-08-19T21:15:48.5698184Z >       with _get_client(monkeypatch) as client:
2025-08-19T21:15:48.5698465Z              ^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.5698623Z 
2025-08-19T21:15:48.5698771Z tests/api/test_ingest_endpoints.py:49: 
2025-08-19T21:15:48.5699141Z _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
2025-08-19T21:15:48.5699768Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/testclient.py:694: in __enter__
2025-08-19T21:15:48.5700282Z     portal.call(self.wait_startup)
2025-08-19T21:15:48.5700831Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/from_thread.py:291: in call
2025-08-19T21:15:48.5701391Z     return cast(T_Retval, self.start_task_soon(func, *args).result())
2025-08-19T21:15:48.5701758Z                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.5702303Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/concurrent/futures/_base.py:456: in result
2025-08-19T21:15:48.5703145Z     return self.__get_result()
2025-08-19T21:15:48.5703403Z            ^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.5703953Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/concurrent/futures/_base.py:401: in __get_result
2025-08-19T21:15:48.5704565Z     raise self._exception
2025-08-19T21:15:48.5705514Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/from_thread.py:222: in _call_func
2025-08-19T21:15:48.5706029Z     retval = await retval_or_awaitable
2025-08-19T21:15:48.5706306Z              ^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.5706920Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/testclient.py:729: in wait_startup
2025-08-19T21:15:48.5707408Z     await receive()
2025-08-19T21:15:48.5707940Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/testclient.py:720: in receive
2025-08-19T21:15:48.5708409Z     self.task.result()
2025-08-19T21:15:48.5708928Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/concurrent/futures/_base.py:449: in result
2025-08-19T21:15:48.5709388Z     return self.__get_result()
2025-08-19T21:15:48.5709629Z            ^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.5710161Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/concurrent/futures/_base.py:401: in __get_result
2025-08-19T21:15:48.5710615Z     raise self._exception
2025-08-19T21:15:48.5711166Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/from_thread.py:222: in _call_func
2025-08-19T21:15:48.5711667Z     retval = await retval_or_awaitable
2025-08-19T21:15:48.5711941Z              ^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.5712901Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/testclient.py:710: in lifespan
2025-08-19T21:15:48.5713883Z     await self.app(scope, self.stream_receive.receive, self.stream_send.send)
2025-08-19T21:15:48.5714587Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/applications.py:1054: in __call__
2025-08-19T21:15:48.5715132Z     await super().__call__(scope, receive, send)
2025-08-19T21:15:48.5715875Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/starlette.py:408: in _sentry_patched_asgi_app
2025-08-19T21:15:48.5716522Z     return await middleware(scope, receive, send)
2025-08-19T21:15:48.5716825Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.5717453Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/asgi.py:179: in _run_asgi3
2025-08-19T21:15:48.5718079Z     return await self._run_app(scope, receive, send, asgi_version=3)
2025-08-19T21:15:48.5718451Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.5719086Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/asgi.py:194: in _run_app
2025-08-19T21:15:48.5719592Z     raise exc from None
2025-08-19T21:15:48.5720351Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/asgi.py:190: in _run_app
2025-08-19T21:15:48.5720922Z     return await self.app(scope, receive, send)
2025-08-19T21:15:48.5721224Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.5721828Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/applications.py:113: in __call__
2025-08-19T21:15:48.5722386Z     await self.middleware_stack(scope, receive, send)
2025-08-19T21:15:48.5723766Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/starlette.py:199: in _create_span_call
2025-08-19T21:15:48.5724458Z     return await old_call(app, scope, new_receive, new_send, **kwargs)
2025-08-19T21:15:48.5724838Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.5725473Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/middleware/errors.py:151: in __call__
2025-08-19T21:15:48.5726151Z     await self.app(scope, receive, send)
2025-08-19T21:15:48.5726853Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/starlette.py:199: in _create_span_call
2025-08-19T21:15:48.5727523Z     return await old_call(app, scope, new_receive, new_send, **kwargs)
2025-08-19T21:15:48.5727895Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.5728533Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/asgi_correlation_id/middleware.py:50: in __call__
2025-08-19T21:15:48.5729072Z     await self.app(scope, receive, send)
2025-08-19T21:15:48.5729844Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/starlette.py:297: in _sentry_exceptionmiddleware_call
2025-08-19T21:15:48.5730500Z     await old_call(self, scope, receive, send)
2025-08-19T21:15:48.5731537Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/starlette.py:199: in _create_span_call
2025-08-19T21:15:48.5732573Z     return await old_call(app, scope, new_receive, new_send, **kwargs)
2025-08-19T21:15:48.5732982Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.5733638Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/middleware/exceptions.py:49: in __call__
2025-08-19T21:15:48.5734190Z     await self.app(scope, receive, send)
2025-08-19T21:15:48.5734771Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py:716: in __call__
2025-08-19T21:15:48.5735304Z     await self.middleware_stack(scope, receive, send)
2025-08-19T21:15:48.5735891Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py:725: in app
2025-08-19T21:15:48.5736390Z     await self.lifespan(scope, receive, send)
2025-08-19T21:15:48.5736978Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py:694: in lifespan
2025-08-19T21:15:48.5737533Z     async with self.lifespan_context(app) as maybe_state:
2025-08-19T21:15:48.5737856Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.5738338Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/contextlib.py:210: in __aenter__
2025-08-19T21:15:48.5738774Z     return await anext(self.gen)
2025-08-19T21:15:48.5739026Z            ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.5740033Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py:134: in merged_lifespan
2025-08-19T21:15:48.5740698Z     async with original_context(app) as maybe_original_state:
2025-08-19T21:15:48.5741027Z                ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.5741498Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/contextlib.py:210: in __aenter__
2025-08-19T21:15:48.5741917Z     return await anext(self.gen)
2025-08-19T21:15:48.5742164Z            ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.5742950Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py:134: in merged_lifespan
2025-08-19T21:15:48.5743687Z     async with original_context(app) as maybe_original_state:
2025-08-19T21:15:48.5744011Z                ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.5744479Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/contextlib.py:210: in __aenter__
2025-08-19T21:15:48.5744894Z     return await anext(self.gen)
2025-08-19T21:15:48.5745140Z            ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.5745702Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py:134: in merged_lifespan
2025-08-19T21:15:48.5746272Z     async with original_context(app) as maybe_original_state:
2025-08-19T21:15:48.5746582Z                ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.5747052Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/contextlib.py:210: in __aenter__
2025-08-19T21:15:48.5747587Z     return await anext(self.gen)
2025-08-19T21:15:48.5748009Z            ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.5748926Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py:134: in merged_lifespan
2025-08-19T21:15:48.5749662Z     async with original_context(app) as maybe_original_state:
2025-08-19T21:15:48.5749980Z                ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.5750443Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/contextlib.py:210: in __aenter__
2025-08-19T21:15:48.5750857Z     return await anext(self.gen)
2025-08-19T21:15:48.5751097Z            ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.5751660Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py:134: in merged_lifespan
2025-08-19T21:15:48.5752226Z     async with original_context(app) as maybe_original_state:
2025-08-19T21:15:48.5752650Z                ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.5753108Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/contextlib.py:210: in __aenter__
2025-08-19T21:15:48.5753519Z     return await anext(self.gen)
2025-08-19T21:15:48.5753761Z            ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.5754505Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py:134: in merged_lifespan
2025-08-19T21:15:48.5755082Z     async with original_context(app) as maybe_original_state:
2025-08-19T21:15:48.5755401Z                ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.5756165Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/contextlib.py:210: in __aenter__
2025-08-19T21:15:48.5756852Z     return await anext(self.gen)
2025-08-19T21:15:48.5757097Z            ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.5757365Z services/api/main.py:76: in lifespan
2025-08-19T21:15:48.5757608Z     await _check_llm()
2025-08-19T21:15:48.5757937Z _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
2025-08-19T21:15:48.5758142Z 
2025-08-19T21:15:48.5758261Z     async def _check_llm() -> None:
2025-08-19T21:15:48.5758716Z >       from services.common.llm import LAN_BASE, LLM_PROVIDER, LLM_PROVIDER_FALLBACK
2025-08-19T21:15:48.5759522Z E       ImportError: cannot import name 'LLM_PROVIDER' from 'services.common.llm' (/home/runner/work/AWA-App/AWA-App/services/common/llm.py)
2025-08-19T21:15:48.5759985Z 
2025-08-19T21:15:48.5760125Z services/api/main.py:173: ImportError
2025-08-19T21:15:48.5760522Z _____________________________ test_ingest_failure ______________________________
2025-08-19T21:15:48.5760755Z 
2025-08-19T21:15:48.5761022Z monkeypatch = <_pytest.monkeypatch.MonkeyPatch object at 0x7f3f317232f0>
2025-08-19T21:15:48.5761575Z tmp_path = PosixPath('/tmp/pytest-of-runner/pytest-0/test_ingest_failure0')
2025-08-19T21:15:48.5761859Z 
2025-08-19T21:15:48.5762029Z     def test_ingest_failure(monkeypatch, tmp_path) -> None:
2025-08-19T21:15:48.5762605Z         def bad_import_file(path: str, report_type=None, celery_update=None, force=False):
2025-08-19T21:15:48.5763014Z             raise RuntimeError("boom")
2025-08-19T21:15:48.5763246Z     
2025-08-19T21:15:48.5763545Z         monkeypatch.setattr("etl.load_csv.import_file", bad_import_file)
2025-08-19T21:15:48.5764416Z >       with _get_client(monkeypatch) as client:
2025-08-19T21:15:48.5764893Z              ^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.5765049Z 
2025-08-19T21:15:48.5765205Z tests/api/test_ingest_endpoints.py:67: 
2025-08-19T21:15:48.5765574Z _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
2025-08-19T21:15:48.5766204Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/testclient.py:694: in __enter__
2025-08-19T21:15:48.5766717Z     portal.call(self.wait_startup)
2025-08-19T21:15:48.5767264Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/from_thread.py:291: in call
2025-08-19T21:15:48.5767829Z     return cast(T_Retval, self.start_task_soon(func, *args).result())
2025-08-19T21:15:48.5768203Z                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.5768749Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/concurrent/futures/_base.py:456: in result
2025-08-19T21:15:48.5769346Z     return self.__get_result()
2025-08-19T21:15:48.5769586Z            ^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.5770116Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/concurrent/futures/_base.py:401: in __get_result
2025-08-19T21:15:48.5770574Z     raise self._exception
2025-08-19T21:15:48.5771127Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/from_thread.py:222: in _call_func
2025-08-19T21:15:48.5771625Z     retval = await retval_or_awaitable
2025-08-19T21:15:48.5772012Z              ^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.5773127Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/testclient.py:729: in wait_startup
2025-08-19T21:15:48.5773623Z     await receive()
2025-08-19T21:15:48.5774156Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/testclient.py:720: in receive
2025-08-19T21:15:48.5774624Z     self.task.result()
2025-08-19T21:15:48.5775111Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/concurrent/futures/_base.py:449: in result
2025-08-19T21:15:48.5775568Z     return self.__get_result()
2025-08-19T21:15:48.5775802Z            ^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.5776360Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/concurrent/futures/_base.py:401: in __get_result
2025-08-19T21:15:48.5776820Z     raise self._exception
2025-08-19T21:15:48.5777360Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/from_thread.py:222: in _call_func
2025-08-19T21:15:48.5777858Z     retval = await retval_or_awaitable
2025-08-19T21:15:48.5778125Z              ^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.5778697Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/testclient.py:710: in lifespan
2025-08-19T21:15:48.5779318Z     await self.app(scope, self.stream_receive.receive, self.stream_send.send)
2025-08-19T21:15:48.5780278Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/applications.py:1054: in __call__
2025-08-19T21:15:48.5781087Z     await super().__call__(scope, receive, send)
2025-08-19T21:15:48.5781832Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/starlette.py:408: in _sentry_patched_asgi_app
2025-08-19T21:15:48.5782658Z     return await middleware(scope, receive, send)
2025-08-19T21:15:48.5782980Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.5783611Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/asgi.py:179: in _run_asgi3
2025-08-19T21:15:48.5784237Z     return await self._run_app(scope, receive, send, asgi_version=3)
2025-08-19T21:15:48.5784605Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.5785238Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/asgi.py:194: in _run_app
2025-08-19T21:15:48.5785738Z     raise exc from None
2025-08-19T21:15:48.5786322Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/asgi.py:190: in _run_app
2025-08-19T21:15:48.5787523Z     return await self.app(scope, receive, send)
2025-08-19T21:15:48.5787853Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.5788473Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/applications.py:113: in __call__
2025-08-19T21:15:48.5789038Z     await self.middleware_stack(scope, receive, send)
2025-08-19T21:15:48.5789776Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/starlette.py:199: in _create_span_call
2025-08-19T21:15:48.5790451Z     return await old_call(app, scope, new_receive, new_send, **kwargs)
2025-08-19T21:15:48.5790825Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.5791462Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/middleware/errors.py:151: in __call__
2025-08-19T21:15:48.5792001Z     await self.app(scope, receive, send)
2025-08-19T21:15:48.5792982Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/starlette.py:199: in _create_span_call
2025-08-19T21:15:48.5793652Z     return await old_call(app, scope, new_receive, new_send, **kwargs)
2025-08-19T21:15:48.5794021Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.5795014Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/asgi_correlation_id/middleware.py:50: in __call__
2025-08-19T21:15:48.5795716Z     await self.app(scope, receive, send)
2025-08-19T21:15:48.5796485Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/starlette.py:297: in _sentry_exceptionmiddleware_call
2025-08-19T21:15:48.5797142Z     await old_call(self, scope, receive, send)
2025-08-19T21:15:48.5797850Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/starlette.py:199: in _create_span_call
2025-08-19T21:15:48.5798515Z     return await old_call(app, scope, new_receive, new_send, **kwargs)
2025-08-19T21:15:48.5798886Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.5799534Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/middleware/exceptions.py:49: in __call__
2025-08-19T21:15:48.5800079Z     await self.app(scope, receive, send)
2025-08-19T21:15:48.5800659Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py:716: in __call__
2025-08-19T21:15:48.5801194Z     await self.middleware_stack(scope, receive, send)
2025-08-19T21:15:48.5801782Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py:725: in app
2025-08-19T21:15:48.5802278Z     await self.lifespan(scope, receive, send)
2025-08-19T21:15:48.5802966Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py:694: in lifespan
2025-08-19T21:15:48.5803509Z     async with self.lifespan_context(app) as maybe_state:
2025-08-19T21:15:48.5803833Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.5804308Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/contextlib.py:210: in __aenter__
2025-08-19T21:15:48.5804743Z     return await anext(self.gen)
2025-08-19T21:15:48.5804997Z            ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.5805583Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py:134: in merged_lifespan
2025-08-19T21:15:48.5806162Z     async with original_context(app) as maybe_original_state:
2025-08-19T21:15:48.5806493Z                ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.5806966Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/contextlib.py:210: in __aenter__
2025-08-19T21:15:48.5807383Z     return await anext(self.gen)
2025-08-19T21:15:48.5807626Z            ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.5808187Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py:134: in merged_lifespan
2025-08-19T21:15:48.5808907Z     async with original_context(app) as maybe_original_state:
2025-08-19T21:15:48.5809233Z                ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.5809705Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/contextlib.py:210: in __aenter__
2025-08-19T21:15:48.5810123Z     return await anext(self.gen)
2025-08-19T21:15:48.5810360Z            ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.5810925Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py:134: in merged_lifespan
2025-08-19T21:15:48.5811496Z     async with original_context(app) as maybe_original_state:
2025-08-19T21:15:48.5811812Z                ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.5812289Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/contextlib.py:210: in __aenter__
2025-08-19T21:15:48.5812818Z     return await anext(self.gen)
2025-08-19T21:15:48.5813061Z            ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.5813798Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py:134: in merged_lifespan
2025-08-19T21:15:48.5814810Z     async with original_context(app) as maybe_original_state:
2025-08-19T21:15:48.5815134Z                ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.5815599Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/contextlib.py:210: in __aenter__
2025-08-19T21:15:48.5816013Z     return await anext(self.gen)
2025-08-19T21:15:48.5816257Z            ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.5816815Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py:134: in merged_lifespan
2025-08-19T21:15:48.5817389Z     async with original_context(app) as maybe_original_state:
2025-08-19T21:15:48.5817713Z                ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.5818182Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/contextlib.py:210: in __aenter__
2025-08-19T21:15:48.5818598Z     return await anext(self.gen)
2025-08-19T21:15:48.5818841Z            ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.5819406Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py:134: in merged_lifespan
2025-08-19T21:15:48.5819976Z     async with original_context(app) as maybe_original_state:
2025-08-19T21:15:48.5820294Z                ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.5820756Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/contextlib.py:210: in __aenter__
2025-08-19T21:15:48.5821172Z     return await anext(self.gen)
2025-08-19T21:15:48.5821411Z            ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.5821687Z services/api/main.py:76: in lifespan
2025-08-19T21:15:48.5821931Z     await _check_llm()
2025-08-19T21:15:48.5822258Z _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
2025-08-19T21:15:48.5822670Z 
2025-08-19T21:15:48.5822798Z     async def _check_llm() -> None:
2025-08-19T21:15:48.5823264Z >       from services.common.llm import LAN_BASE, LLM_PROVIDER, LLM_PROVIDER_FALLBACK
2025-08-19T21:15:48.5824069Z E       ImportError: cannot import name 'LLM_PROVIDER' from 'services.common.llm' (/home/runner/work/AWA-App/AWA-App/services/common/llm.py)
2025-08-19T21:15:48.5824537Z 
2025-08-19T21:15:48.5824679Z services/api/main.py:173: ImportError
2025-08-19T21:15:48.5825077Z _____________________________ test_health_endpoint _____________________________
2025-08-19T21:15:48.5825312Z 
2025-08-19T21:15:48.5825579Z monkeypatch = <_pytest.monkeypatch.MonkeyPatch object at 0x7f3f3188f740>
2025-08-19T21:15:48.5825856Z 
2025-08-19T21:15:48.5825987Z     def test_health_endpoint(monkeypatch):
2025-08-19T21:15:48.5826355Z         app.dependency_overrides[db.get_session] = fake_get_session
2025-08-19T21:15:48.5826728Z >       with TestClient(app) as client:
2025-08-19T21:15:48.5826976Z              ^^^^^^^^^^^^^^^
2025-08-19T21:15:48.5827111Z 
2025-08-19T21:15:48.5827222Z tests/test_api_fast.py:24: 
2025-08-19T21:15:48.5827561Z _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
2025-08-19T21:15:48.5828191Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/testclient.py:694: in __enter__
2025-08-19T21:15:48.5828848Z     portal.call(self.wait_startup)
2025-08-19T21:15:48.5829405Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/from_thread.py:291: in call
2025-08-19T21:15:48.5829962Z     return cast(T_Retval, self.start_task_soon(func, *args).result())
2025-08-19T21:15:48.5830333Z                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.5830877Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/concurrent/futures/_base.py:456: in result
2025-08-19T21:15:48.5831330Z     return self.__get_result()
2025-08-19T21:15:48.5831577Z            ^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.5832108Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/concurrent/futures/_base.py:401: in __get_result
2025-08-19T21:15:48.5832666Z     raise self._exception
2025-08-19T21:15:48.5833219Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/from_thread.py:222: in _call_func
2025-08-19T21:15:48.5833842Z     retval = await retval_or_awaitable
2025-08-19T21:15:48.5834116Z              ^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.5834710Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/testclient.py:729: in wait_startup
2025-08-19T21:15:48.5835195Z     await receive()
2025-08-19T21:15:48.5835728Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/testclient.py:720: in receive
2025-08-19T21:15:48.5836195Z     self.task.result()
2025-08-19T21:15:48.5836687Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/concurrent/futures/_base.py:449: in result
2025-08-19T21:15:48.5837138Z     return self.__get_result()
2025-08-19T21:15:48.5837374Z            ^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.5837898Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/concurrent/futures/_base.py:401: in __get_result
2025-08-19T21:15:48.5838349Z     raise self._exception
2025-08-19T21:15:48.5838901Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/from_thread.py:222: in _call_func
2025-08-19T21:15:48.5839414Z     retval = await retval_or_awaitable
2025-08-19T21:15:48.5839680Z              ^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.5840255Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/testclient.py:710: in lifespan
2025-08-19T21:15:48.5840887Z     await self.app(scope, self.stream_receive.receive, self.stream_send.send)
2025-08-19T21:15:48.5841586Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/applications.py:1054: in __call__
2025-08-19T21:15:48.5842121Z     await super().__call__(scope, receive, send)
2025-08-19T21:15:48.5842970Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/starlette.py:408: in _sentry_patched_asgi_app
2025-08-19T21:15:48.5843612Z     return await middleware(scope, receive, send)
2025-08-19T21:15:48.5843919Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.5844547Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/asgi.py:179: in _run_asgi3
2025-08-19T21:15:48.5845172Z     return await self._run_app(scope, receive, send, asgi_version=3)
2025-08-19T21:15:48.5845543Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.5846177Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/asgi.py:194: in _run_app
2025-08-19T21:15:48.5846683Z     raise exc from None
2025-08-19T21:15:48.5847262Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/asgi.py:190: in _run_app
2025-08-19T21:15:48.5847814Z     return await self.app(scope, receive, send)
2025-08-19T21:15:48.5848116Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.5848709Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/applications.py:113: in __call__
2025-08-19T21:15:48.5849263Z     await self.middleware_stack(scope, receive, send)
2025-08-19T21:15:48.5850123Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/starlette.py:199: in _create_span_call
2025-08-19T21:15:48.5850798Z     return await old_call(app, scope, new_receive, new_send, **kwargs)
2025-08-19T21:15:48.5851173Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.5851802Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/middleware/errors.py:151: in __call__
2025-08-19T21:15:48.5852339Z     await self.app(scope, receive, send)
2025-08-19T21:15:48.5853138Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/starlette.py:199: in _create_span_call
2025-08-19T21:15:48.5853803Z     return await old_call(app, scope, new_receive, new_send, **kwargs)
2025-08-19T21:15:48.5854169Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.5854802Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/asgi_correlation_id/middleware.py:50: in __call__
2025-08-19T21:15:48.5855459Z     await self.app(scope, receive, send)
2025-08-19T21:15:48.5856233Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/starlette.py:297: in _sentry_exceptionmiddleware_call
2025-08-19T21:15:48.5856897Z     await old_call(self, scope, receive, send)
2025-08-19T21:15:48.5857602Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/starlette.py:199: in _create_span_call
2025-08-19T21:15:48.5858264Z     return await old_call(app, scope, new_receive, new_send, **kwargs)
2025-08-19T21:15:48.5858633Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.5859280Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/middleware/exceptions.py:49: in __call__
2025-08-19T21:15:48.5859831Z     await self.app(scope, receive, send)
2025-08-19T21:15:48.5860418Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py:716: in __call__
2025-08-19T21:15:48.5860960Z     await self.middleware_stack(scope, receive, send)
2025-08-19T21:15:48.5861562Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py:725: in app
2025-08-19T21:15:48.5862065Z     await self.lifespan(scope, receive, send)
2025-08-19T21:15:48.5862861Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py:694: in lifespan
2025-08-19T21:15:48.5863420Z     async with self.lifespan_context(app) as maybe_state:
2025-08-19T21:15:48.5863746Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.5864229Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/contextlib.py:210: in __aenter__
2025-08-19T21:15:48.5864661Z     return await anext(self.gen)
2025-08-19T21:15:48.5864913Z            ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.5865485Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py:134: in merged_lifespan
2025-08-19T21:15:48.5866073Z     async with original_context(app) as maybe_original_state:
2025-08-19T21:15:48.5866400Z                ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.5866871Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/contextlib.py:210: in __aenter__
2025-08-19T21:15:48.5867295Z     return await anext(self.gen)
2025-08-19T21:15:48.5867538Z            ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.5868102Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py:134: in merged_lifespan
2025-08-19T21:15:48.5868672Z     async with original_context(app) as maybe_original_state:
2025-08-19T21:15:48.5868993Z                ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.5869464Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/contextlib.py:210: in __aenter__
2025-08-19T21:15:48.5869879Z     return await anext(self.gen)
2025-08-19T21:15:48.5870129Z            ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.5870685Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py:134: in merged_lifespan
2025-08-19T21:15:48.5871443Z     async with original_context(app) as maybe_original_state:
2025-08-19T21:15:48.5871759Z                ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.5872224Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/contextlib.py:210: in __aenter__
2025-08-19T21:15:48.5872738Z     return await anext(self.gen)
2025-08-19T21:15:48.5872978Z            ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.5873554Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py:134: in merged_lifespan
2025-08-19T21:15:48.5874134Z     async with original_context(app) as maybe_original_state:
2025-08-19T21:15:48.5874454Z                ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.5874920Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/contextlib.py:210: in __aenter__
2025-08-19T21:15:48.5875337Z     return await anext(self.gen)
2025-08-19T21:15:48.5875578Z            ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.5876299Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py:134: in merged_lifespan
2025-08-19T21:15:48.5876864Z     async with original_context(app) as maybe_original_state:
2025-08-19T21:15:48.5877181Z                ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.5877647Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/contextlib.py:210: in __aenter__
2025-08-19T21:15:48.5878065Z     return await anext(self.gen)
2025-08-19T21:15:48.5878306Z            ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.5878867Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py:134: in merged_lifespan
2025-08-19T21:15:48.5879431Z     async with original_context(app) as maybe_original_state:
2025-08-19T21:15:48.5879746Z                ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.5880208Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/contextlib.py:210: in __aenter__
2025-08-19T21:15:48.5880619Z     return await anext(self.gen)
2025-08-19T21:15:48.5880863Z            ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.5881137Z services/api/main.py:76: in lifespan
2025-08-19T21:15:48.5881375Z     await _check_llm()
2025-08-19T21:15:48.5881697Z _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
2025-08-19T21:15:48.5881904Z 
2025-08-19T21:15:48.5882017Z     async def _check_llm() -> None:
2025-08-19T21:15:48.5882566Z >       from services.common.llm import LAN_BASE, LLM_PROVIDER, LLM_PROVIDER_FALLBACK
2025-08-19T21:15:48.5883374Z E       ImportError: cannot import name 'LLM_PROVIDER' from 'services.common.llm' (/home/runner/work/AWA-App/AWA-App/services/common/llm.py)
2025-08-19T21:15:48.5883830Z 
2025-08-19T21:15:48.5883969Z services/api/main.py:173: ImportError
2025-08-19T21:15:48.5884362Z ______________________________ test_generate[lan] ______________________________
2025-08-19T21:15:48.5884594Z 
2025-08-19T21:15:48.5884863Z monkeypatch = <_pytest.monkeypatch.MonkeyPatch object at 0x7f3f317e5d90>
2025-08-19T21:15:48.5885219Z provider = 'lan'
2025-08-19T21:15:48.5885348Z 
2025-08-19T21:15:48.5885441Z     @pytest.mark.asyncio
2025-08-19T21:15:48.5885755Z     @pytest.mark.parametrize("provider", ["lan", "openai"])
2025-08-19T21:15:48.5886127Z     async def test_generate(monkeypatch, provider):
2025-08-19T21:15:48.5886504Z         async def fake_post(self, url, json=None, headers=None):
2025-08-19T21:15:48.5886927Z             return DummyResp({"choices": [{"message": {"content": "hi"}}]})
2025-08-19T21:15:48.5887239Z     
2025-08-19T21:15:48.5887536Z         monkeypatch.setattr(llm.httpx.AsyncClient, "post", fake_post)
2025-08-19T21:15:48.5887852Z     
2025-08-19T21:15:48.5888047Z         if provider == "openai":
2025-08-19T21:15:48.5888261Z     
2025-08-19T21:15:48.5888460Z             async def acreate(**_):
2025-08-19T21:15:48.5888752Z                 return types.SimpleNamespace(
2025-08-19T21:15:48.5889020Z                     choices=[
2025-08-19T21:15:48.5889408Z                         types.SimpleNamespace(message=types.SimpleNamespace(content="hi"))
2025-08-19T21:15:48.5889891Z                     ]
2025-08-19T21:15:48.5890082Z                 )
2025-08-19T21:15:48.5890251Z     
2025-08-19T21:15:48.5890468Z             openai = types.SimpleNamespace(
2025-08-19T21:15:48.5890835Z                 ChatCompletion=types.SimpleNamespace(acreate=acreate)
2025-08-19T21:15:48.5891133Z             )
2025-08-19T21:15:48.5891471Z             monkeypatch.setattr(llm.importlib, "import_module", lambda n: openai)
2025-08-19T21:15:48.5891809Z     
2025-08-19T21:15:48.5892047Z         res = await llm.generate("hi", provider=provider)
2025-08-19T21:15:48.5892345Z >       assert res == "hi"
2025-08-19T21:15:48.5892727Z E       AssertionError: assert '' == 'hi'
2025-08-19T21:15:48.5892979Z E         
2025-08-19T21:15:48.5893147Z E         - hi
2025-08-19T21:15:48.5893260Z 
2025-08-19T21:15:48.5893398Z tests/test_llm.py:48: AssertionError
2025-08-19T21:15:48.5893801Z _________________________ test_cors_preflight_allowed __________________________
2025-08-19T21:15:48.5894170Z 
2025-08-19T21:15:48.5894440Z monkeypatch = <_pytest.monkeypatch.MonkeyPatch object at 0x7f3f4436a480>
2025-08-19T21:15:48.5894721Z 
2025-08-19T21:15:48.5894865Z     def test_cors_preflight_allowed(monkeypatch):
2025-08-19T21:15:48.5895334Z         app = _get_app(monkeypatch, CORS_ORIGINS="http://localhost:3000,http://web:3000")
2025-08-19T21:15:48.5895771Z >       with TestClient(app) as client:
2025-08-19T21:15:48.5896020Z              ^^^^^^^^^^^^^^^
2025-08-19T21:15:48.5896160Z 
2025-08-19T21:15:48.5896295Z services/api/tests/test_cors.py:40: 
2025-08-19T21:15:48.5896652Z _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
2025-08-19T21:15:48.5897284Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/testclient.py:694: in __enter__
2025-08-19T21:15:48.5897801Z     portal.call(self.wait_startup)
2025-08-19T21:15:48.5898358Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/from_thread.py:291: in call
2025-08-19T21:15:48.5898937Z     return cast(T_Retval, self.start_task_soon(func, *args).result())
2025-08-19T21:15:48.5899306Z                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.5899853Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/concurrent/futures/_base.py:456: in result
2025-08-19T21:15:48.5900311Z     return self.__get_result()
2025-08-19T21:15:48.5900547Z            ^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.5901080Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/concurrent/futures/_base.py:401: in __get_result
2025-08-19T21:15:48.5901535Z     raise self._exception
2025-08-19T21:15:48.5902088Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/from_thread.py:222: in _call_func
2025-08-19T21:15:48.5902788Z     retval = await retval_or_awaitable
2025-08-19T21:15:48.5903062Z              ^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.5903655Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/testclient.py:729: in wait_startup
2025-08-19T21:15:48.5904149Z     await receive()
2025-08-19T21:15:48.5904683Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/testclient.py:720: in receive
2025-08-19T21:15:48.5905152Z     self.task.result()
2025-08-19T21:15:48.5905648Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/concurrent/futures/_base.py:449: in result
2025-08-19T21:15:48.5906102Z     return self.__get_result()
2025-08-19T21:15:48.5906345Z            ^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.5906865Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/concurrent/futures/_base.py:401: in __get_result
2025-08-19T21:15:48.5907319Z     raise self._exception
2025-08-19T21:15:48.5907864Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/from_thread.py:222: in _call_func
2025-08-19T21:15:48.5908363Z     retval = await retval_or_awaitable
2025-08-19T21:15:48.5908626Z              ^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.5909331Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/testclient.py:710: in lifespan
2025-08-19T21:15:48.5909958Z     await self.app(scope, self.stream_receive.receive, self.stream_send.send)
2025-08-19T21:15:48.5910658Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/applications.py:1054: in __call__
2025-08-19T21:15:48.5911188Z     await super().__call__(scope, receive, send)
2025-08-19T21:15:48.5911934Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/starlette.py:408: in _sentry_patched_asgi_app
2025-08-19T21:15:48.5924316Z     return await middleware(scope, receive, send)
2025-08-19T21:15:48.5924694Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.5925374Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/asgi.py:179: in _run_asgi3
2025-08-19T21:15:48.5926025Z     return await self._run_app(scope, receive, send, asgi_version=3)
2025-08-19T21:15:48.5926414Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.5927583Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/asgi.py:194: in _run_app
2025-08-19T21:15:48.5928480Z     raise exc from None
2025-08-19T21:15:48.5929538Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/asgi.py:190: in _run_app
2025-08-19T21:15:48.5930524Z     return await self.app(scope, receive, send)
2025-08-19T21:15:48.5931043Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.5931987Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/applications.py:113: in __call__
2025-08-19T21:15:48.5932726Z     await self.middleware_stack(scope, receive, send)
2025-08-19T21:15:48.5933607Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/starlette.py:199: in _create_span_call
2025-08-19T21:15:48.5934298Z     return await old_call(app, scope, new_receive, new_send, **kwargs)
2025-08-19T21:15:48.5934694Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.5935331Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/middleware/errors.py:151: in __call__
2025-08-19T21:15:48.5935870Z     await self.app(scope, receive, send)
2025-08-19T21:15:48.5936571Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/starlette.py:199: in _create_span_call
2025-08-19T21:15:48.5937245Z     return await old_call(app, scope, new_receive, new_send, **kwargs)
2025-08-19T21:15:48.5937613Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.5938232Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/middleware/cors.py:77: in __call__
2025-08-19T21:15:48.5938761Z     await self.app(scope, receive, send)
2025-08-19T21:15:48.5939446Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/starlette.py:199: in _create_span_call
2025-08-19T21:15:48.5940110Z     return await old_call(app, scope, new_receive, new_send, **kwargs)
2025-08-19T21:15:48.5940479Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.5941115Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/asgi_correlation_id/middleware.py:50: in __call__
2025-08-19T21:15:48.5941652Z     await self.app(scope, receive, send)
2025-08-19T21:15:48.5942558Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/starlette.py:297: in _sentry_exceptionmiddleware_call
2025-08-19T21:15:48.5943275Z     await old_call(self, scope, receive, send)
2025-08-19T21:15:48.5943982Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/starlette.py:199: in _create_span_call
2025-08-19T21:15:48.5944638Z     return await old_call(app, scope, new_receive, new_send, **kwargs)
2025-08-19T21:15:48.5945174Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.5945840Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/middleware/exceptions.py:49: in __call__
2025-08-19T21:15:48.5946392Z     await self.app(scope, receive, send)
2025-08-19T21:15:48.5946971Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py:716: in __call__
2025-08-19T21:15:48.5947508Z     await self.middleware_stack(scope, receive, send)
2025-08-19T21:15:48.5948097Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py:725: in app
2025-08-19T21:15:48.5948590Z     await self.lifespan(scope, receive, send)
2025-08-19T21:15:48.5949181Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py:694: in lifespan
2025-08-19T21:15:48.5949722Z     async with self.lifespan_context(app) as maybe_state:
2025-08-19T21:15:48.5950037Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.5950524Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/contextlib.py:210: in __aenter__
2025-08-19T21:15:48.5951064Z     return await anext(self.gen)
2025-08-19T21:15:48.5951319Z            ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.5951882Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py:134: in merged_lifespan
2025-08-19T21:15:48.5952551Z     async with original_context(app) as maybe_original_state:
2025-08-19T21:15:48.5952876Z                ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.5953343Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/contextlib.py:210: in __aenter__
2025-08-19T21:15:48.5953759Z     return await anext(self.gen)
2025-08-19T21:15:48.5954003Z            ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.5954563Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py:134: in merged_lifespan
2025-08-19T21:15:48.5955134Z     async with original_context(app) as maybe_original_state:
2025-08-19T21:15:48.5955463Z                ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.5955927Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/contextlib.py:210: in __aenter__
2025-08-19T21:15:48.5956344Z     return await anext(self.gen)
2025-08-19T21:15:48.5956583Z            ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.5957144Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py:134: in merged_lifespan
2025-08-19T21:15:48.5957712Z     async with original_context(app) as maybe_original_state:
2025-08-19T21:15:48.5958025Z                ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.5958479Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/contextlib.py:210: in __aenter__
2025-08-19T21:15:48.5958885Z     return await anext(self.gen)
2025-08-19T21:15:48.5959122Z            ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.5959676Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py:134: in merged_lifespan
2025-08-19T21:15:48.5960233Z     async with original_context(app) as maybe_original_state:
2025-08-19T21:15:48.5960554Z                ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.5961008Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/contextlib.py:210: in __aenter__
2025-08-19T21:15:48.5961411Z     return await anext(self.gen)
2025-08-19T21:15:48.5961651Z            ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.5962205Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py:134: in merged_lifespan
2025-08-19T21:15:48.5962851Z     async with original_context(app) as maybe_original_state:
2025-08-19T21:15:48.5963163Z                ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.5963618Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/contextlib.py:210: in __aenter__
2025-08-19T21:15:48.5964026Z     return await anext(self.gen)
2025-08-19T21:15:48.5964262Z            ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.5964813Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py:134: in merged_lifespan
2025-08-19T21:15:48.5965545Z     async with original_context(app) as maybe_original_state:
2025-08-19T21:15:48.5965861Z                ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.5966309Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/contextlib.py:210: in __aenter__
2025-08-19T21:15:48.5966714Z     return await anext(self.gen)
2025-08-19T21:15:48.5966953Z            ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.5967212Z services/api/main.py:76: in lifespan
2025-08-19T21:15:48.5967450Z     await _check_llm()
2025-08-19T21:15:48.5967777Z _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
2025-08-19T21:15:48.5967985Z 
2025-08-19T21:15:48.5968102Z     async def _check_llm() -> None:
2025-08-19T21:15:48.5968560Z >       from services.common.llm import LAN_BASE, LLM_PROVIDER, LLM_PROVIDER_FALLBACK
2025-08-19T21:15:48.5969360Z E       ImportError: cannot import name 'LLM_PROVIDER' from 'services.common.llm' (/home/runner/work/AWA-App/AWA-App/services/common/llm.py)
2025-08-19T21:15:48.5969818Z 
2025-08-19T21:15:48.5970160Z services/api/main.py:173: ImportError
2025-08-19T21:15:48.5970568Z _________________________ test_cors_simple_get_allowed _________________________
2025-08-19T21:15:48.5970805Z 
2025-08-19T21:15:48.5971072Z monkeypatch = <_pytest.monkeypatch.MonkeyPatch object at 0x7f3f30e712e0>
2025-08-19T21:15:48.5971347Z 
2025-08-19T21:15:48.5971504Z     def test_cors_simple_get_allowed(monkeypatch):
2025-08-19T21:15:48.5971906Z         app = _get_app(monkeypatch, CORS_ORIGINS="http://localhost:3000")
2025-08-19T21:15:48.5972284Z >       with TestClient(app) as client:
2025-08-19T21:15:48.5972632Z              ^^^^^^^^^^^^^^^
2025-08-19T21:15:48.5972770Z 
2025-08-19T21:15:48.5972912Z services/api/tests/test_cors.py:55: 
2025-08-19T21:15:48.5973268Z _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
2025-08-19T21:15:48.5973890Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/testclient.py:694: in __enter__
2025-08-19T21:15:48.5974399Z     portal.call(self.wait_startup)
2025-08-19T21:15:48.5974959Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/from_thread.py:291: in call
2025-08-19T21:15:48.5975515Z     return cast(T_Retval, self.start_task_soon(func, *args).result())
2025-08-19T21:15:48.5975879Z                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.5976448Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/concurrent/futures/_base.py:456: in result
2025-08-19T21:15:48.5976902Z     return self.__get_result()
2025-08-19T21:15:48.5977141Z            ^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.5977660Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/concurrent/futures/_base.py:401: in __get_result
2025-08-19T21:15:48.5978107Z     raise self._exception
2025-08-19T21:15:48.5978652Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/from_thread.py:222: in _call_func
2025-08-19T21:15:48.5979148Z     retval = await retval_or_awaitable
2025-08-19T21:15:48.5979418Z              ^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.5980011Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/testclient.py:729: in wait_startup
2025-08-19T21:15:48.5980487Z     await receive()
2025-08-19T21:15:48.5981014Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/testclient.py:720: in receive
2025-08-19T21:15:48.5981483Z     self.task.result()
2025-08-19T21:15:48.5981976Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/concurrent/futures/_base.py:449: in result
2025-08-19T21:15:48.5982583Z     return self.__get_result()
2025-08-19T21:15:48.5982891Z            ^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.5983425Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/concurrent/futures/_base.py:401: in __get_result
2025-08-19T21:15:48.5983878Z     raise self._exception
2025-08-19T21:15:48.5984426Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/from_thread.py:222: in _call_func
2025-08-19T21:15:48.5985053Z     retval = await retval_or_awaitable
2025-08-19T21:15:48.5985330Z              ^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.5985898Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/testclient.py:710: in lifespan
2025-08-19T21:15:48.5986506Z     await self.app(scope, self.stream_receive.receive, self.stream_send.send)
2025-08-19T21:15:48.5987191Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/applications.py:1054: in __call__
2025-08-19T21:15:48.5987713Z     await super().__call__(scope, receive, send)
2025-08-19T21:15:48.5988452Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/starlette.py:408: in _sentry_patched_asgi_app
2025-08-19T21:15:48.5989086Z     return await middleware(scope, receive, send)
2025-08-19T21:15:48.5989391Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.5990033Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/asgi.py:179: in _run_asgi3
2025-08-19T21:15:48.5990782Z     return await self._run_app(scope, receive, send, asgi_version=3)
2025-08-19T21:15:48.5991150Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.5991779Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/asgi.py:194: in _run_app
2025-08-19T21:15:48.5992277Z     raise exc from None
2025-08-19T21:15:48.5992969Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/asgi.py:190: in _run_app
2025-08-19T21:15:48.5993521Z     return await self.app(scope, receive, send)
2025-08-19T21:15:48.5993823Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.5994416Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/applications.py:113: in __call__
2025-08-19T21:15:48.5994966Z     await self.middleware_stack(scope, receive, send)
2025-08-19T21:15:48.5995693Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/starlette.py:199: in _create_span_call
2025-08-19T21:15:48.5996374Z     return await old_call(app, scope, new_receive, new_send, **kwargs)
2025-08-19T21:15:48.5996749Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.5997377Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/middleware/errors.py:151: in __call__
2025-08-19T21:15:48.5997907Z     await self.app(scope, receive, send)
2025-08-19T21:15:48.5998592Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/starlette.py:199: in _create_span_call
2025-08-19T21:15:48.5999251Z     return await old_call(app, scope, new_receive, new_send, **kwargs)
2025-08-19T21:15:48.5999616Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6000230Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/middleware/cors.py:77: in __call__
2025-08-19T21:15:48.6000753Z     await self.app(scope, receive, send)
2025-08-19T21:15:48.6001439Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/starlette.py:199: in _create_span_call
2025-08-19T21:15:48.6002093Z     return await old_call(app, scope, new_receive, new_send, **kwargs)
2025-08-19T21:15:48.6002548Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6003180Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/asgi_correlation_id/middleware.py:50: in __call__
2025-08-19T21:15:48.6003706Z     await self.app(scope, receive, send)
2025-08-19T21:15:48.6004466Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/starlette.py:297: in _sentry_exceptionmiddleware_call
2025-08-19T21:15:48.6005118Z     await old_call(self, scope, receive, send)
2025-08-19T21:15:48.6005814Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/starlette.py:199: in _create_span_call
2025-08-19T21:15:48.6006601Z     return await old_call(app, scope, new_receive, new_send, **kwargs)
2025-08-19T21:15:48.6006960Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6007600Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/middleware/exceptions.py:49: in __call__
2025-08-19T21:15:48.6008140Z     await self.app(scope, receive, send)
2025-08-19T21:15:48.6008712Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py:716: in __call__
2025-08-19T21:15:48.6009235Z     await self.middleware_stack(scope, receive, send)
2025-08-19T21:15:48.6009813Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py:725: in app
2025-08-19T21:15:48.6010302Z     await self.lifespan(scope, receive, send)
2025-08-19T21:15:48.6010886Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py:694: in lifespan
2025-08-19T21:15:48.6011427Z     async with self.lifespan_context(app) as maybe_state:
2025-08-19T21:15:48.6011859Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6012338Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/contextlib.py:210: in __aenter__
2025-08-19T21:15:48.6012858Z     return await anext(self.gen)
2025-08-19T21:15:48.6013111Z            ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6013676Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py:134: in merged_lifespan
2025-08-19T21:15:48.6014247Z     async with original_context(app) as maybe_original_state:
2025-08-19T21:15:48.6014568Z                ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6015029Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/contextlib.py:210: in __aenter__
2025-08-19T21:15:48.6015444Z     return await anext(self.gen)
2025-08-19T21:15:48.6015690Z            ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6016272Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py:134: in merged_lifespan
2025-08-19T21:15:48.6016854Z     async with original_context(app) as maybe_original_state:
2025-08-19T21:15:48.6017173Z                ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6017642Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/contextlib.py:210: in __aenter__
2025-08-19T21:15:48.6018052Z     return await anext(self.gen)
2025-08-19T21:15:48.6018289Z            ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6018850Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py:134: in merged_lifespan
2025-08-19T21:15:48.6019415Z     async with original_context(app) as maybe_original_state:
2025-08-19T21:15:48.6019728Z                ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6020189Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/contextlib.py:210: in __aenter__
2025-08-19T21:15:48.6020597Z     return await anext(self.gen)
2025-08-19T21:15:48.6020837Z            ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6021391Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py:134: in merged_lifespan
2025-08-19T21:15:48.6021955Z     async with original_context(app) as maybe_original_state:
2025-08-19T21:15:48.6022267Z                ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6022936Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/contextlib.py:210: in __aenter__
2025-08-19T21:15:48.6023358Z     return await anext(self.gen)
2025-08-19T21:15:48.6023600Z            ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6024157Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py:134: in merged_lifespan
2025-08-19T21:15:48.6024719Z     async with original_context(app) as maybe_original_state:
2025-08-19T21:15:48.6025035Z                ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6025492Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/contextlib.py:210: in __aenter__
2025-08-19T21:15:48.6025901Z     return await anext(self.gen)
2025-08-19T21:15:48.6026140Z            ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6026850Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py:134: in merged_lifespan
2025-08-19T21:15:48.6027416Z     async with original_context(app) as maybe_original_state:
2025-08-19T21:15:48.6027735Z                ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6028203Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/contextlib.py:210: in __aenter__
2025-08-19T21:15:48.6028608Z     return await anext(self.gen)
2025-08-19T21:15:48.6028852Z            ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6029120Z services/api/main.py:76: in lifespan
2025-08-19T21:15:48.6029397Z     await _check_llm()
2025-08-19T21:15:48.6029727Z _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
2025-08-19T21:15:48.6029932Z 
2025-08-19T21:15:48.6030046Z     async def _check_llm() -> None:
2025-08-19T21:15:48.6030499Z >       from services.common.llm import LAN_BASE, LLM_PROVIDER, LLM_PROVIDER_FALLBACK
2025-08-19T21:15:48.6031295Z E       ImportError: cannot import name 'LLM_PROVIDER' from 'services.common.llm' (/home/runner/work/AWA-App/AWA-App/services/common/llm.py)
2025-08-19T21:15:48.6031865Z 
2025-08-19T21:15:48.6032011Z services/api/main.py:173: ImportError
2025-08-19T21:15:48.6032514Z _________________________ test_cors_disallowed_origin __________________________
2025-08-19T21:15:48.6032755Z 
2025-08-19T21:15:48.6033027Z monkeypatch = <_pytest.monkeypatch.MonkeyPatch object at 0x7f3f34e47a10>
2025-08-19T21:15:48.6033301Z 
2025-08-19T21:15:48.6033451Z     def test_cors_disallowed_origin(monkeypatch):
2025-08-19T21:15:48.6033845Z         app = _get_app(monkeypatch, CORS_ORIGINS="http://localhost:3000")
2025-08-19T21:15:48.6034220Z >       with TestClient(app) as client:
2025-08-19T21:15:48.6034466Z              ^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6034601Z 
2025-08-19T21:15:48.6034739Z services/api/tests/test_cors.py:64: 
2025-08-19T21:15:48.6035088Z _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
2025-08-19T21:15:48.6035716Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/testclient.py:694: in __enter__
2025-08-19T21:15:48.6036229Z     portal.call(self.wait_startup)
2025-08-19T21:15:48.6036777Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/from_thread.py:291: in call
2025-08-19T21:15:48.6037333Z     return cast(T_Retval, self.start_task_soon(func, *args).result())
2025-08-19T21:15:48.6037698Z                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6038241Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/concurrent/futures/_base.py:456: in result
2025-08-19T21:15:48.6038686Z     return self.__get_result()
2025-08-19T21:15:48.6038930Z            ^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6039453Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/concurrent/futures/_base.py:401: in __get_result
2025-08-19T21:15:48.6039906Z     raise self._exception
2025-08-19T21:15:48.6040451Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/from_thread.py:222: in _call_func
2025-08-19T21:15:48.6040955Z     retval = await retval_or_awaitable
2025-08-19T21:15:48.6041224Z              ^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6041806Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/testclient.py:729: in wait_startup
2025-08-19T21:15:48.6042281Z     await receive()
2025-08-19T21:15:48.6042906Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/testclient.py:720: in receive
2025-08-19T21:15:48.6043370Z     self.task.result()
2025-08-19T21:15:48.6043861Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/concurrent/futures/_base.py:449: in result
2025-08-19T21:15:48.6044303Z     return self.__get_result()
2025-08-19T21:15:48.6044538Z            ^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6045057Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/concurrent/futures/_base.py:401: in __get_result
2025-08-19T21:15:48.6045499Z     raise self._exception
2025-08-19T21:15:48.6046167Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/from_thread.py:222: in _call_func
2025-08-19T21:15:48.6046663Z     retval = await retval_or_awaitable
2025-08-19T21:15:48.6046933Z              ^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6047498Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/testclient.py:710: in lifespan
2025-08-19T21:15:48.6048114Z     await self.app(scope, self.stream_receive.receive, self.stream_send.send)
2025-08-19T21:15:48.6048794Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/applications.py:1054: in __call__
2025-08-19T21:15:48.6049316Z     await super().__call__(scope, receive, send)
2025-08-19T21:15:48.6050055Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/starlette.py:408: in _sentry_patched_asgi_app
2025-08-19T21:15:48.6050687Z     return await middleware(scope, receive, send)
2025-08-19T21:15:48.6050996Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6051737Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/asgi.py:179: in _run_asgi3
2025-08-19T21:15:48.6052346Z     return await self._run_app(scope, receive, send, asgi_version=3)
2025-08-19T21:15:48.6052811Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6053440Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/asgi.py:194: in _run_app
2025-08-19T21:15:48.6053930Z     raise exc from None
2025-08-19T21:15:48.6054528Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/asgi.py:190: in _run_app
2025-08-19T21:15:48.6055083Z     return await self.app(scope, receive, send)
2025-08-19T21:15:48.6055378Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6055967Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/applications.py:113: in __call__
2025-08-19T21:15:48.6056522Z     await self.middleware_stack(scope, receive, send)
2025-08-19T21:15:48.6057267Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/starlette.py:199: in _create_span_call
2025-08-19T21:15:48.6057939Z     return await old_call(app, scope, new_receive, new_send, **kwargs)
2025-08-19T21:15:48.6058311Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6058935Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/middleware/errors.py:151: in __call__
2025-08-19T21:15:48.6059467Z     await self.app(scope, receive, send)
2025-08-19T21:15:48.6060156Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/starlette.py:199: in _create_span_call
2025-08-19T21:15:48.6060827Z     return await old_call(app, scope, new_receive, new_send, **kwargs)
2025-08-19T21:15:48.6061196Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6061825Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/middleware/cors.py:77: in __call__
2025-08-19T21:15:48.6062356Z     await self.app(scope, receive, send)
2025-08-19T21:15:48.6063259Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/starlette.py:199: in _create_span_call
2025-08-19T21:15:48.6063929Z     return await old_call(app, scope, new_receive, new_send, **kwargs)
2025-08-19T21:15:48.6064292Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6064920Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/asgi_correlation_id/middleware.py:50: in __call__
2025-08-19T21:15:48.6065453Z     await self.app(scope, receive, send)
2025-08-19T21:15:48.6066213Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/starlette.py:297: in _sentry_exceptionmiddleware_call
2025-08-19T21:15:48.6066870Z     await old_call(self, scope, receive, send)
2025-08-19T21:15:48.6067707Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/starlette.py:199: in _create_span_call
2025-08-19T21:15:48.6068367Z     return await old_call(app, scope, new_receive, new_send, **kwargs)
2025-08-19T21:15:48.6068732Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6069374Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/middleware/exceptions.py:49: in __call__
2025-08-19T21:15:48.6069918Z     await self.app(scope, receive, send)
2025-08-19T21:15:48.6070486Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py:716: in __call__
2025-08-19T21:15:48.6071012Z     await self.middleware_stack(scope, receive, send)
2025-08-19T21:15:48.6071592Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py:725: in app
2025-08-19T21:15:48.6072082Z     await self.lifespan(scope, receive, send)
2025-08-19T21:15:48.6072900Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py:694: in lifespan
2025-08-19T21:15:48.6073444Z     async with self.lifespan_context(app) as maybe_state:
2025-08-19T21:15:48.6073759Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6074246Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/contextlib.py:210: in __aenter__
2025-08-19T21:15:48.6074664Z     return await anext(self.gen)
2025-08-19T21:15:48.6074915Z            ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6075478Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py:134: in merged_lifespan
2025-08-19T21:15:48.6076051Z     async with original_context(app) as maybe_original_state:
2025-08-19T21:15:48.6076406Z                ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6076881Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/contextlib.py:210: in __aenter__
2025-08-19T21:15:48.6077297Z     return await anext(self.gen)
2025-08-19T21:15:48.6077539Z            ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6078100Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py:134: in merged_lifespan
2025-08-19T21:15:48.6078663Z     async with original_context(app) as maybe_original_state:
2025-08-19T21:15:48.6078978Z                ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6079442Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/contextlib.py:210: in __aenter__
2025-08-19T21:15:48.6079851Z     return await anext(self.gen)
2025-08-19T21:15:48.6080090Z            ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6080645Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py:134: in merged_lifespan
2025-08-19T21:15:48.6081202Z     async with original_context(app) as maybe_original_state:
2025-08-19T21:15:48.6081517Z                ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6081977Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/contextlib.py:210: in __aenter__
2025-08-19T21:15:48.6082392Z     return await anext(self.gen)
2025-08-19T21:15:48.6082739Z            ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6083292Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py:134: in merged_lifespan
2025-08-19T21:15:48.6083844Z     async with original_context(app) as maybe_original_state:
2025-08-19T21:15:48.6084157Z                ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6084611Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/contextlib.py:210: in __aenter__
2025-08-19T21:15:48.6085016Z     return await anext(self.gen)
2025-08-19T21:15:48.6085255Z            ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6085805Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py:134: in merged_lifespan
2025-08-19T21:15:48.6086359Z     async with original_context(app) as maybe_original_state:
2025-08-19T21:15:48.6086674Z                ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6087130Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/contextlib.py:210: in __aenter__
2025-08-19T21:15:48.6087667Z     return await anext(self.gen)
2025-08-19T21:15:48.6087907Z            ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6088462Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py:134: in merged_lifespan
2025-08-19T21:15:48.6089117Z     async with original_context(app) as maybe_original_state:
2025-08-19T21:15:48.6089430Z                ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6089882Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/contextlib.py:210: in __aenter__
2025-08-19T21:15:48.6090286Z     return await anext(self.gen)
2025-08-19T21:15:48.6090522Z            ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6090789Z services/api/main.py:76: in lifespan
2025-08-19T21:15:48.6091028Z     await _check_llm()
2025-08-19T21:15:48.6091353Z _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
2025-08-19T21:15:48.6091547Z 
2025-08-19T21:15:48.6091665Z     async def _check_llm() -> None:
2025-08-19T21:15:48.6092124Z >       from services.common.llm import LAN_BASE, LLM_PROVIDER, LLM_PROVIDER_FALLBACK
2025-08-19T21:15:48.6093146Z E       ImportError: cannot import name 'LLM_PROVIDER' from 'services.common.llm' (/home/runner/work/AWA-App/AWA-App/services/common/llm.py)
2025-08-19T21:15:48.6093597Z 
2025-08-19T21:15:48.6093741Z services/api/main.py:173: ImportError
2025-08-19T21:15:48.6094144Z __________________________ test_validation_error_json __________________________
2025-08-19T21:15:48.6094381Z 
2025-08-19T21:15:48.6094516Z     def test_validation_error_json() -> None:
2025-08-19T21:15:48.6094831Z         prev_user = os.environ.get("BASIC_USER")
2025-08-19T21:15:48.6095135Z         prev_pass = os.environ.get("BASIC_PASS")
2025-08-19T21:15:48.6095454Z         os.environ["ROI_BASIC_AUTH_USER"] = "u"
2025-08-19T21:15:48.6095788Z         os.environ["ROI_BASIC_AUTH_PASSWORD"] = "p"
2025-08-19T21:15:48.6096099Z         os.environ["BASIC_USER"] = "u"
2025-08-19T21:15:48.6096378Z         os.environ["BASIC_PASS"] = "p"
2025-08-19T21:15:48.6096623Z         try:
2025-08-19T21:15:48.6096871Z >           with TestClient(app) as client:
2025-08-19T21:15:48.6097152Z                  ^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6097294Z 
2025-08-19T21:15:48.6097459Z services/api/tests/test_errors_json.py:19: 
2025-08-19T21:15:48.6097840Z _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
2025-08-19T21:15:48.6098482Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/testclient.py:694: in __enter__
2025-08-19T21:15:48.6099000Z     portal.call(self.wait_startup)
2025-08-19T21:15:48.6099559Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/from_thread.py:291: in call
2025-08-19T21:15:48.6100127Z     return cast(T_Retval, self.start_task_soon(func, *args).result())
2025-08-19T21:15:48.6100493Z                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6101037Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/concurrent/futures/_base.py:456: in result
2025-08-19T21:15:48.6101496Z     return self.__get_result()
2025-08-19T21:15:48.6101738Z            ^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6102261Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/concurrent/futures/_base.py:401: in __get_result
2025-08-19T21:15:48.6102933Z     raise self._exception
2025-08-19T21:15:48.6103496Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/from_thread.py:222: in _call_func
2025-08-19T21:15:48.6103997Z     retval = await retval_or_awaitable
2025-08-19T21:15:48.6104264Z              ^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6104853Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/testclient.py:729: in wait_startup
2025-08-19T21:15:48.6105333Z     await receive()
2025-08-19T21:15:48.6105865Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/testclient.py:720: in receive
2025-08-19T21:15:48.6106331Z     self.task.result()
2025-08-19T21:15:48.6106964Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/concurrent/futures/_base.py:449: in result
2025-08-19T21:15:48.6107423Z     return self.__get_result()
2025-08-19T21:15:48.6107659Z            ^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6108184Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/concurrent/futures/_base.py:401: in __get_result
2025-08-19T21:15:48.6108634Z     raise self._exception
2025-08-19T21:15:48.6109187Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/from_thread.py:222: in _call_func
2025-08-19T21:15:48.6109683Z     retval = await retval_or_awaitable
2025-08-19T21:15:48.6109948Z              ^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6110517Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/testclient.py:710: in lifespan
2025-08-19T21:15:48.6111141Z     await self.app(scope, self.stream_receive.receive, self.stream_send.send)
2025-08-19T21:15:48.6111832Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/applications.py:1054: in __call__
2025-08-19T21:15:48.6112649Z     await super().__call__(scope, receive, send)
2025-08-19T21:15:48.6113391Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/starlette.py:408: in _sentry_patched_asgi_app
2025-08-19T21:15:48.6114029Z     return await middleware(scope, receive, send)
2025-08-19T21:15:48.6114336Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6114959Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/asgi.py:179: in _run_asgi3
2025-08-19T21:15:48.6115577Z     return await self._run_app(scope, receive, send, asgi_version=3)
2025-08-19T21:15:48.6115949Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6116584Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/asgi.py:194: in _run_app
2025-08-19T21:15:48.6117077Z     raise exc from None
2025-08-19T21:15:48.6117661Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/asgi.py:190: in _run_app
2025-08-19T21:15:48.6118208Z     return await self.app(scope, receive, send)
2025-08-19T21:15:48.6118510Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6119103Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/applications.py:113: in __call__
2025-08-19T21:15:48.6119653Z     await self.middleware_stack(scope, receive, send)
2025-08-19T21:15:48.6120379Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/starlette.py:199: in _create_span_call
2025-08-19T21:15:48.6121049Z     return await old_call(app, scope, new_receive, new_send, **kwargs)
2025-08-19T21:15:48.6121422Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6122052Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/middleware/errors.py:151: in __call__
2025-08-19T21:15:48.6122684Z     await self.app(scope, receive, send)
2025-08-19T21:15:48.6123381Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/starlette.py:199: in _create_span_call
2025-08-19T21:15:48.6124086Z     return await old_call(app, scope, new_receive, new_send, **kwargs)
2025-08-19T21:15:48.6124450Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6125074Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/asgi_correlation_id/middleware.py:50: in __call__
2025-08-19T21:15:48.6125609Z     await self.app(scope, receive, send)
2025-08-19T21:15:48.6126375Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/starlette.py:297: in _sentry_exceptionmiddleware_call
2025-08-19T21:15:48.6127046Z     await old_call(self, scope, receive, send)
2025-08-19T21:15:48.6127762Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/starlette.py:199: in _create_span_call
2025-08-19T21:15:48.6128595Z     return await old_call(app, scope, new_receive, new_send, **kwargs)
2025-08-19T21:15:48.6128966Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6129623Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/middleware/exceptions.py:49: in __call__
2025-08-19T21:15:48.6130177Z     await self.app(scope, receive, send)
2025-08-19T21:15:48.6130756Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py:716: in __call__
2025-08-19T21:15:48.6131289Z     await self.middleware_stack(scope, receive, send)
2025-08-19T21:15:48.6131883Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py:725: in app
2025-08-19T21:15:48.6132379Z     await self.lifespan(scope, receive, send)
2025-08-19T21:15:48.6133065Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py:694: in lifespan
2025-08-19T21:15:48.6133614Z     async with self.lifespan_context(app) as maybe_state:
2025-08-19T21:15:48.6134055Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6134530Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/contextlib.py:210: in __aenter__
2025-08-19T21:15:48.6134954Z     return await anext(self.gen)
2025-08-19T21:15:48.6135196Z            ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6135761Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py:134: in merged_lifespan
2025-08-19T21:15:48.6136335Z     async with original_context(app) as maybe_original_state:
2025-08-19T21:15:48.6136660Z                ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6137131Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/contextlib.py:210: in __aenter__
2025-08-19T21:15:48.6137547Z     return await anext(self.gen)
2025-08-19T21:15:48.6137788Z            ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6138348Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py:134: in merged_lifespan
2025-08-19T21:15:48.6138925Z     async with original_context(app) as maybe_original_state:
2025-08-19T21:15:48.6139242Z                ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6139710Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/contextlib.py:210: in __aenter__
2025-08-19T21:15:48.6140125Z     return await anext(self.gen)
2025-08-19T21:15:48.6140367Z            ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6140924Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py:134: in merged_lifespan
2025-08-19T21:15:48.6141488Z     async with original_context(app) as maybe_original_state:
2025-08-19T21:15:48.6141808Z                ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6142266Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/contextlib.py:210: in __aenter__
2025-08-19T21:15:48.6142910Z     return await anext(self.gen)
2025-08-19T21:15:48.6143159Z            ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6143727Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py:134: in merged_lifespan
2025-08-19T21:15:48.6144301Z     async with original_context(app) as maybe_original_state:
2025-08-19T21:15:48.6144616Z                ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6145075Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/contextlib.py:210: in __aenter__
2025-08-19T21:15:48.6145486Z     return await anext(self.gen)
2025-08-19T21:15:48.6145724Z            ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6146280Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py:134: in merged_lifespan
2025-08-19T21:15:48.6146837Z     async with original_context(app) as maybe_original_state:
2025-08-19T21:15:48.6147151Z                ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6147608Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/contextlib.py:210: in __aenter__
2025-08-19T21:15:48.6148019Z     return await anext(self.gen)
2025-08-19T21:15:48.6148257Z            ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6148950Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py:134: in merged_lifespan
2025-08-19T21:15:48.6149515Z     async with original_context(app) as maybe_original_state:
2025-08-19T21:15:48.6149832Z                ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6150293Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/contextlib.py:210: in __aenter__
2025-08-19T21:15:48.6150704Z     return await anext(self.gen)
2025-08-19T21:15:48.6150946Z            ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6151212Z services/api/main.py:76: in lifespan
2025-08-19T21:15:48.6151454Z     await _check_llm()
2025-08-19T21:15:48.6151773Z _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
2025-08-19T21:15:48.6151978Z 
2025-08-19T21:15:48.6152090Z     async def _check_llm() -> None:
2025-08-19T21:15:48.6152649Z >       from services.common.llm import LAN_BASE, LLM_PROVIDER, LLM_PROVIDER_FALLBACK
2025-08-19T21:15:48.6153453Z E       ImportError: cannot import name 'LLM_PROVIDER' from 'services.common.llm' (/home/runner/work/AWA-App/AWA-App/services/common/llm.py)
2025-08-19T21:15:48.6154032Z 
2025-08-19T21:15:48.6154172Z services/api/main.py:173: ImportError
2025-08-19T21:15:48.6154408Z ______________________________ test_db_error_json ______________________________
2025-08-19T21:15:48.6154417Z 
2025-08-19T21:15:48.6154530Z     def test_db_error_json() -> None:
2025-08-19T21:15:48.6154627Z         class BrokenSession:
2025-08-19T21:15:48.6154758Z             async def execute(self, *a, **kw):
2025-08-19T21:15:48.6154943Z                 raise psycopg.OperationalError("connection lost")
2025-08-19T21:15:48.6155013Z     
2025-08-19T21:15:48.6155131Z         async def fake_get_session():
2025-08-19T21:15:48.6155243Z             yield BrokenSession()
2025-08-19T21:15:48.6155316Z     
2025-08-19T21:15:48.6155520Z         app.dependency_overrides[api_db.get_session] = fake_get_session
2025-08-19T21:15:48.6155600Z         try:
2025-08-19T21:15:48.6155749Z >           with TestClient(app) as client:
2025-08-19T21:15:48.6155859Z                  ^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6155867Z 
2025-08-19T21:15:48.6156021Z services/api/tests/test_errors_json.py:53: 
2025-08-19T21:15:48.6156222Z _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
2025-08-19T21:15:48.6156660Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/testclient.py:694: in __enter__
2025-08-19T21:15:48.6156786Z     portal.call(self.wait_startup)
2025-08-19T21:15:48.6157174Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/from_thread.py:291: in call
2025-08-19T21:15:48.6157378Z     return cast(T_Retval, self.start_task_soon(func, *args).result())
2025-08-19T21:15:48.6157513Z                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6157882Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/concurrent/futures/_base.py:456: in result
2025-08-19T21:15:48.6157997Z     return self.__get_result()
2025-08-19T21:15:48.6158096Z            ^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6158499Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/concurrent/futures/_base.py:401: in __get_result
2025-08-19T21:15:48.6158593Z     raise self._exception
2025-08-19T21:15:48.6159012Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/from_thread.py:222: in _call_func
2025-08-19T21:15:48.6159131Z     retval = await retval_or_awaitable
2025-08-19T21:15:48.6159244Z              ^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6159683Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/testclient.py:729: in wait_startup
2025-08-19T21:15:48.6159770Z     await receive()
2025-08-19T21:15:48.6160186Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/testclient.py:720: in receive
2025-08-19T21:15:48.6160276Z     self.task.result()
2025-08-19T21:15:48.6160641Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/concurrent/futures/_base.py:449: in result
2025-08-19T21:15:48.6160913Z     return self.__get_result()
2025-08-19T21:15:48.6161009Z            ^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6161399Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/concurrent/futures/_base.py:401: in __get_result
2025-08-19T21:15:48.6161484Z     raise self._exception
2025-08-19T21:15:48.6161900Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/from_thread.py:222: in _call_func
2025-08-19T21:15:48.6162015Z     retval = await retval_or_awaitable
2025-08-19T21:15:48.6162125Z              ^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6162641Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/testclient.py:710: in lifespan
2025-08-19T21:15:48.6162886Z     await self.app(scope, self.stream_receive.receive, self.stream_send.send)
2025-08-19T21:15:48.6163315Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/applications.py:1054: in __call__
2025-08-19T21:15:48.6163459Z     await super().__call__(scope, receive, send)
2025-08-19T21:15:48.6164140Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/starlette.py:408: in _sentry_patched_asgi_app
2025-08-19T21:15:48.6164283Z     return await middleware(scope, receive, send)
2025-08-19T21:15:48.6164400Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6164857Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/asgi.py:179: in _run_asgi3
2025-08-19T21:15:48.6165060Z     return await self._run_app(scope, receive, send, asgi_version=3)
2025-08-19T21:15:48.6165190Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6165647Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/asgi.py:194: in _run_app
2025-08-19T21:15:48.6165730Z     raise exc from None
2025-08-19T21:15:48.6166186Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/asgi.py:190: in _run_app
2025-08-19T21:15:48.6166331Z     return await self.app(scope, receive, send)
2025-08-19T21:15:48.6166447Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6166876Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/applications.py:113: in __call__
2025-08-19T21:15:48.6167038Z     await self.middleware_stack(scope, receive, send)
2025-08-19T21:15:48.6167561Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/starlette.py:199: in _create_span_call
2025-08-19T21:15:48.6167769Z     return await old_call(app, scope, new_receive, new_send, **kwargs)
2025-08-19T21:15:48.6167907Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6168358Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/middleware/errors.py:151: in __call__
2025-08-19T21:15:48.6168484Z     await self.app(scope, receive, send)
2025-08-19T21:15:48.6169010Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/starlette.py:199: in _create_span_call
2025-08-19T21:15:48.6169218Z     return await old_call(app, scope, new_receive, new_send, **kwargs)
2025-08-19T21:15:48.6169346Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6169808Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/asgi_correlation_id/middleware.py:50: in __call__
2025-08-19T21:15:48.6169928Z     await self.app(scope, receive, send)
2025-08-19T21:15:48.6170531Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/starlette.py:297: in _sentry_exceptionmiddleware_call
2025-08-19T21:15:48.6170664Z     await old_call(self, scope, receive, send)
2025-08-19T21:15:48.6171186Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/starlette.py:199: in _create_span_call
2025-08-19T21:15:48.6171382Z     return await old_call(app, scope, new_receive, new_send, **kwargs)
2025-08-19T21:15:48.6171640Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6172115Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/middleware/exceptions.py:49: in __call__
2025-08-19T21:15:48.6172237Z     await self.app(scope, receive, send)
2025-08-19T21:15:48.6172744Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py:716: in __call__
2025-08-19T21:15:48.6172902Z     await self.middleware_stack(scope, receive, send)
2025-08-19T21:15:48.6173295Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py:725: in app
2025-08-19T21:15:48.6173427Z     await self.lifespan(scope, receive, send)
2025-08-19T21:15:48.6173837Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py:694: in lifespan
2025-08-19T21:15:48.6174002Z     async with self.lifespan_context(app) as maybe_state:
2025-08-19T21:15:48.6174121Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6174559Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/contextlib.py:210: in __aenter__
2025-08-19T21:15:48.6174676Z     return await anext(self.gen)
2025-08-19T21:15:48.6174772Z            ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6175203Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py:134: in merged_lifespan
2025-08-19T21:15:48.6175382Z     async with original_context(app) as maybe_original_state:
2025-08-19T21:15:48.6175490Z                ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6175810Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/contextlib.py:210: in __aenter__
2025-08-19T21:15:48.6175922Z     return await anext(self.gen)
2025-08-19T21:15:48.6176016Z            ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6176473Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py:134: in merged_lifespan
2025-08-19T21:15:48.6176649Z     async with original_context(app) as maybe_original_state:
2025-08-19T21:15:48.6176762Z                ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6177085Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/contextlib.py:210: in __aenter__
2025-08-19T21:15:48.6177191Z     return await anext(self.gen)
2025-08-19T21:15:48.6177290Z            ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6177713Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py:134: in merged_lifespan
2025-08-19T21:15:48.6177894Z     async with original_context(app) as maybe_original_state:
2025-08-19T21:15:48.6177993Z                ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6178311Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/contextlib.py:210: in __aenter__
2025-08-19T21:15:48.6178419Z     return await anext(self.gen)
2025-08-19T21:15:48.6178523Z            ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6178948Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py:134: in merged_lifespan
2025-08-19T21:15:48.6179140Z     async with original_context(app) as maybe_original_state:
2025-08-19T21:15:48.6179243Z                ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6179566Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/contextlib.py:210: in __aenter__
2025-08-19T21:15:48.6179674Z     return await anext(self.gen)
2025-08-19T21:15:48.6179778Z            ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6180199Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py:134: in merged_lifespan
2025-08-19T21:15:48.6180375Z     async with original_context(app) as maybe_original_state:
2025-08-19T21:15:48.6180474Z                ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6180798Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/contextlib.py:210: in __aenter__
2025-08-19T21:15:48.6180905Z     return await anext(self.gen)
2025-08-19T21:15:48.6181013Z            ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6181436Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py:134: in merged_lifespan
2025-08-19T21:15:48.6181740Z     async with original_context(app) as maybe_original_state:
2025-08-19T21:15:48.6181839Z                ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6182160Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/contextlib.py:210: in __aenter__
2025-08-19T21:15:48.6182271Z     return await anext(self.gen)
2025-08-19T21:15:48.6182367Z            ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6182707Z services/api/main.py:76: in lifespan
2025-08-19T21:15:48.6182799Z     await _check_llm()
2025-08-19T21:15:48.6183010Z _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
2025-08-19T21:15:48.6183021Z 
2025-08-19T21:15:48.6183133Z     async def _check_llm() -> None:
2025-08-19T21:15:48.6183435Z >       from services.common.llm import LAN_BASE, LLM_PROVIDER, LLM_PROVIDER_FALLBACK
2025-08-19T21:15:48.6183955Z E       ImportError: cannot import name 'LLM_PROVIDER' from 'services.common.llm' (/home/runner/work/AWA-App/AWA-App/services/common/llm.py)
2025-08-19T21:15:48.6184090Z 
2025-08-19T21:15:48.6184238Z services/api/main.py:173: ImportError
2025-08-19T21:15:48.6184473Z ______________________________ test_health_route _______________________________
2025-08-19T21:15:48.6184481Z 
2025-08-19T21:15:48.6184594Z     def test_health_route() -> None:
2025-08-19T21:15:48.6184683Z         class FakeSession:
2025-08-19T21:15:48.6184813Z             async def execute(self, query):
2025-08-19T21:15:48.6184895Z                 class R:
2025-08-19T21:15:48.6185009Z                     def scalar(self):
2025-08-19T21:15:48.6185124Z                         import datetime
2025-08-19T21:15:48.6185199Z     
2025-08-19T21:15:48.6185345Z                         return datetime.datetime.utcnow()
2025-08-19T21:15:48.6185422Z     
2025-08-19T21:15:48.6185501Z                 return R()
2025-08-19T21:15:48.6185576Z     
2025-08-19T21:15:48.6185686Z         async def fake_get_session():
2025-08-19T21:15:48.6185795Z             yield FakeSession()
2025-08-19T21:15:48.6185871Z     
2025-08-19T21:15:48.6186067Z         app.dependency_overrides[db.get_session] = fake_get_session
2025-08-19T21:15:48.6186204Z >       with TestClient(app) as client:
2025-08-19T21:15:48.6186289Z              ^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6186297Z 
2025-08-19T21:15:48.6186439Z services/api/tests/test_health.py:22: 
2025-08-19T21:15:48.6186641Z _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
2025-08-19T21:15:48.6187078Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/testclient.py:694: in __enter__
2025-08-19T21:15:48.6187201Z     portal.call(self.wait_startup)
2025-08-19T21:15:48.6187594Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/from_thread.py:291: in call
2025-08-19T21:15:48.6187802Z     return cast(T_Retval, self.start_task_soon(func, *args).result())
2025-08-19T21:15:48.6187937Z                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6188314Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/concurrent/futures/_base.py:456: in result
2025-08-19T21:15:48.6188425Z     return self.__get_result()
2025-08-19T21:15:48.6188530Z            ^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6188926Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/concurrent/futures/_base.py:401: in __get_result
2025-08-19T21:15:48.6189020Z     raise self._exception
2025-08-19T21:15:48.6189440Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/from_thread.py:222: in _call_func
2025-08-19T21:15:48.6189558Z     retval = await retval_or_awaitable
2025-08-19T21:15:48.6189665Z              ^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6190104Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/testclient.py:729: in wait_startup
2025-08-19T21:15:48.6190189Z     await receive()
2025-08-19T21:15:48.6190611Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/testclient.py:720: in receive
2025-08-19T21:15:48.6190826Z     self.task.result()
2025-08-19T21:15:48.6191194Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/concurrent/futures/_base.py:449: in result
2025-08-19T21:15:48.6191306Z     return self.__get_result()
2025-08-19T21:15:48.6191400Z            ^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6191800Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/concurrent/futures/_base.py:401: in __get_result
2025-08-19T21:15:48.6191888Z     raise self._exception
2025-08-19T21:15:48.6192305Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/from_thread.py:222: in _call_func
2025-08-19T21:15:48.6192528Z     retval = await retval_or_awaitable
2025-08-19T21:15:48.6192640Z              ^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6193062Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/testclient.py:710: in lifespan
2025-08-19T21:15:48.6193301Z     await self.app(scope, self.stream_receive.receive, self.stream_send.send)
2025-08-19T21:15:48.6193731Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/applications.py:1054: in __call__
2025-08-19T21:15:48.6193997Z     await super().__call__(scope, receive, send)
2025-08-19T21:15:48.6194560Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/starlette.py:408: in _sentry_patched_asgi_app
2025-08-19T21:15:48.6194712Z     return await middleware(scope, receive, send)
2025-08-19T21:15:48.6194831Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6195293Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/asgi.py:179: in _run_asgi3
2025-08-19T21:15:48.6195499Z     return await self._run_app(scope, receive, send, asgi_version=3)
2025-08-19T21:15:48.6195631Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6196093Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/asgi.py:194: in _run_app
2025-08-19T21:15:48.6196188Z     raise exc from None
2025-08-19T21:15:48.6196645Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/asgi.py:190: in _run_app
2025-08-19T21:15:48.6196785Z     return await self.app(scope, receive, send)
2025-08-19T21:15:48.6196901Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6197339Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/applications.py:113: in __call__
2025-08-19T21:15:48.6197502Z     await self.middleware_stack(scope, receive, send)
2025-08-19T21:15:48.6198024Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/starlette.py:199: in _create_span_call
2025-08-19T21:15:48.6198234Z     return await old_call(app, scope, new_receive, new_send, **kwargs)
2025-08-19T21:15:48.6198368Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6198830Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/middleware/errors.py:151: in __call__
2025-08-19T21:15:48.6198958Z     await self.app(scope, receive, send)
2025-08-19T21:15:48.6199483Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/starlette.py:199: in _create_span_call
2025-08-19T21:15:48.6199688Z     return await old_call(app, scope, new_receive, new_send, **kwargs)
2025-08-19T21:15:48.6199818Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6200281Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/asgi_correlation_id/middleware.py:50: in __call__
2025-08-19T21:15:48.6200401Z     await self.app(scope, receive, send)
2025-08-19T21:15:48.6201004Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/starlette.py:297: in _sentry_exceptionmiddleware_call
2025-08-19T21:15:48.6201139Z     await old_call(self, scope, receive, send)
2025-08-19T21:15:48.6201663Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/starlette.py:199: in _create_span_call
2025-08-19T21:15:48.6201984Z     return await old_call(app, scope, new_receive, new_send, **kwargs)
2025-08-19T21:15:48.6202120Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6202685Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/middleware/exceptions.py:49: in __call__
2025-08-19T21:15:48.6202814Z     await self.app(scope, receive, send)
2025-08-19T21:15:48.6203222Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py:716: in __call__
2025-08-19T21:15:48.6203389Z     await self.middleware_stack(scope, receive, send)
2025-08-19T21:15:48.6203775Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py:725: in app
2025-08-19T21:15:48.6203912Z     await self.lifespan(scope, receive, send)
2025-08-19T21:15:48.6204321Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py:694: in lifespan
2025-08-19T21:15:48.6204612Z     async with self.lifespan_context(app) as maybe_state:
2025-08-19T21:15:48.6204724Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6205046Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/contextlib.py:210: in __aenter__
2025-08-19T21:15:48.6205162Z     return await anext(self.gen)
2025-08-19T21:15:48.6205258Z            ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6205690Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py:134: in merged_lifespan
2025-08-19T21:15:48.6205869Z     async with original_context(app) as maybe_original_state:
2025-08-19T21:15:48.6205976Z                ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6206294Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/contextlib.py:210: in __aenter__
2025-08-19T21:15:48.6206405Z     return await anext(self.gen)
2025-08-19T21:15:48.6206501Z            ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6206935Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py:134: in merged_lifespan
2025-08-19T21:15:48.6207113Z     async with original_context(app) as maybe_original_state:
2025-08-19T21:15:48.6207217Z                ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6207543Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/contextlib.py:210: in __aenter__
2025-08-19T21:15:48.6207655Z     return await anext(self.gen)
2025-08-19T21:15:48.6207751Z            ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6208180Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py:134: in merged_lifespan
2025-08-19T21:15:48.6208352Z     async with original_context(app) as maybe_original_state:
2025-08-19T21:15:48.6208457Z                ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6208772Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/contextlib.py:210: in __aenter__
2025-08-19T21:15:48.6208885Z     return await anext(self.gen)
2025-08-19T21:15:48.6208986Z            ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6209418Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py:134: in merged_lifespan
2025-08-19T21:15:48.6209596Z     async with original_context(app) as maybe_original_state:
2025-08-19T21:15:48.6209694Z                ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6210011Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/contextlib.py:210: in __aenter__
2025-08-19T21:15:48.6210118Z     return await anext(self.gen)
2025-08-19T21:15:48.6210217Z            ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6210638Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py:134: in merged_lifespan
2025-08-19T21:15:48.6210814Z     async with original_context(app) as maybe_original_state:
2025-08-19T21:15:48.6210911Z                ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6211229Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/contextlib.py:210: in __aenter__
2025-08-19T21:15:48.6211338Z     return await anext(self.gen)
2025-08-19T21:15:48.6211560Z            ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6211984Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py:134: in merged_lifespan
2025-08-19T21:15:48.6212160Z     async with original_context(app) as maybe_original_state:
2025-08-19T21:15:48.6212259Z                ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6212682Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/contextlib.py:210: in __aenter__
2025-08-19T21:15:48.6212789Z     return await anext(self.gen)
2025-08-19T21:15:48.6212889Z            ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6213024Z services/api/main.py:76: in lifespan
2025-08-19T21:15:48.6213110Z     await _check_llm()
2025-08-19T21:15:48.6213310Z _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
2025-08-19T21:15:48.6213320Z 
2025-08-19T21:15:48.6213436Z     async def _check_llm() -> None:
2025-08-19T21:15:48.6213731Z >       from services.common.llm import LAN_BASE, LLM_PROVIDER, LLM_PROVIDER_FALLBACK
2025-08-19T21:15:48.6214427Z E       ImportError: cannot import name 'LLM_PROVIDER' from 'services.common.llm' (/home/runner/work/AWA-App/AWA-App/services/common/llm.py)
2025-08-19T21:15:48.6214436Z 
2025-08-19T21:15:48.6214579Z services/api/main.py:173: ImportError
2025-08-19T21:15:48.6214824Z _____________________ test_rate_limit_exceeded_returns_429 _____________________
2025-08-19T21:15:48.6214833Z 
2025-08-19T21:15:48.6214972Z     def test_rate_limit_exceeded_returns_429():
2025-08-19T21:15:48.6215146Z         # Use a unique client IP so we don't affect other tests.
2025-08-19T21:15:48.6215297Z         headers = {"X-Forwarded-For": "203.0.113.77"}
2025-08-19T21:15:48.6215436Z >       with TestClient(app) as client:
2025-08-19T21:15:48.6215523Z              ^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6215530Z 
2025-08-19T21:15:48.6215681Z services/api/tests/test_rate_limit.py:45: 
2025-08-19T21:15:48.6215885Z _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
2025-08-19T21:15:48.6216319Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/testclient.py:694: in __enter__
2025-08-19T21:15:48.6216439Z     portal.call(self.wait_startup)
2025-08-19T21:15:48.6216829Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/from_thread.py:291: in call
2025-08-19T21:15:48.6217041Z     return cast(T_Retval, self.start_task_soon(func, *args).result())
2025-08-19T21:15:48.6217175Z                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6217549Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/concurrent/futures/_base.py:456: in result
2025-08-19T21:15:48.6217660Z     return self.__get_result()
2025-08-19T21:15:48.6217758Z            ^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6218157Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/concurrent/futures/_base.py:401: in __get_result
2025-08-19T21:15:48.6218244Z     raise self._exception
2025-08-19T21:15:48.6218663Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/from_thread.py:222: in _call_func
2025-08-19T21:15:48.6218789Z     retval = await retval_or_awaitable
2025-08-19T21:15:48.6218897Z              ^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6219339Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/testclient.py:729: in wait_startup
2025-08-19T21:15:48.6219423Z     await receive()
2025-08-19T21:15:48.6219836Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/testclient.py:720: in receive
2025-08-19T21:15:48.6219926Z     self.task.result()
2025-08-19T21:15:48.6220290Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/concurrent/futures/_base.py:449: in result
2025-08-19T21:15:48.6220398Z     return self.__get_result()
2025-08-19T21:15:48.6220493Z            ^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6220886Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/concurrent/futures/_base.py:401: in __get_result
2025-08-19T21:15:48.6221094Z     raise self._exception
2025-08-19T21:15:48.6221517Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/from_thread.py:222: in _call_func
2025-08-19T21:15:48.6221632Z     retval = await retval_or_awaitable
2025-08-19T21:15:48.6221737Z              ^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6222154Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/testclient.py:710: in lifespan
2025-08-19T21:15:48.6222393Z     await self.app(scope, self.stream_receive.receive, self.stream_send.send)
2025-08-19T21:15:48.6223045Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/applications.py:1054: in __call__
2025-08-19T21:15:48.6223199Z     await super().__call__(scope, receive, send)
2025-08-19T21:15:48.6223765Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/starlette.py:408: in _sentry_patched_asgi_app
2025-08-19T21:15:48.6223914Z     return await middleware(scope, receive, send)
2025-08-19T21:15:48.6224037Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6224628Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/asgi.py:179: in _run_asgi3
2025-08-19T21:15:48.6224839Z     return await self._run_app(scope, receive, send, asgi_version=3)
2025-08-19T21:15:48.6224969Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6225428Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/asgi.py:194: in _run_app
2025-08-19T21:15:48.6225512Z     raise exc from None
2025-08-19T21:15:48.6225969Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/asgi.py:190: in _run_app
2025-08-19T21:15:48.6226108Z     return await self.app(scope, receive, send)
2025-08-19T21:15:48.6226224Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6226651Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/applications.py:113: in __call__
2025-08-19T21:15:48.6226821Z     await self.middleware_stack(scope, receive, send)
2025-08-19T21:15:48.6227342Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/starlette.py:199: in _create_span_call
2025-08-19T21:15:48.6227553Z     return await old_call(app, scope, new_receive, new_send, **kwargs)
2025-08-19T21:15:48.6227684Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6228144Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/middleware/errors.py:151: in __call__
2025-08-19T21:15:48.6228269Z     await self.app(scope, receive, send)
2025-08-19T21:15:48.6228787Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/starlette.py:199: in _create_span_call
2025-08-19T21:15:48.6228989Z     return await old_call(app, scope, new_receive, new_send, **kwargs)
2025-08-19T21:15:48.6229117Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6229586Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/asgi_correlation_id/middleware.py:50: in __call__
2025-08-19T21:15:48.6229707Z     await self.app(scope, receive, send)
2025-08-19T21:15:48.6230309Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/starlette.py:297: in _sentry_exceptionmiddleware_call
2025-08-19T21:15:48.6230443Z     await old_call(self, scope, receive, send)
2025-08-19T21:15:48.6230961Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/starlette.py:199: in _create_span_call
2025-08-19T21:15:48.6231159Z     return await old_call(app, scope, new_receive, new_send, **kwargs)
2025-08-19T21:15:48.6231294Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6231764Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/middleware/exceptions.py:49: in __call__
2025-08-19T21:15:48.6232005Z     await self.app(scope, receive, send)
2025-08-19T21:15:48.6232520Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py:716: in __call__
2025-08-19T21:15:48.6232685Z     await self.middleware_stack(scope, receive, send)
2025-08-19T21:15:48.6233075Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py:725: in app
2025-08-19T21:15:48.6233210Z     await self.lifespan(scope, receive, send)
2025-08-19T21:15:48.6233618Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py:694: in lifespan
2025-08-19T21:15:48.6233783Z     async with self.lifespan_context(app) as maybe_state:
2025-08-19T21:15:48.6233896Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6234219Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/contextlib.py:210: in __aenter__
2025-08-19T21:15:48.6234333Z     return await anext(self.gen)
2025-08-19T21:15:48.6234430Z            ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6234873Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py:134: in merged_lifespan
2025-08-19T21:15:48.6235168Z     async with original_context(app) as maybe_original_state:
2025-08-19T21:15:48.6235278Z                ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6235602Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/contextlib.py:210: in __aenter__
2025-08-19T21:15:48.6235713Z     return await anext(self.gen)
2025-08-19T21:15:48.6235808Z            ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6236240Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py:134: in merged_lifespan
2025-08-19T21:15:48.6236415Z     async with original_context(app) as maybe_original_state:
2025-08-19T21:15:48.6236519Z                ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6236836Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/contextlib.py:210: in __aenter__
2025-08-19T21:15:48.6236950Z     return await anext(self.gen)
2025-08-19T21:15:48.6237050Z            ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6237483Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py:134: in merged_lifespan
2025-08-19T21:15:48.6237654Z     async with original_context(app) as maybe_original_state:
2025-08-19T21:15:48.6237758Z                ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6238076Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/contextlib.py:210: in __aenter__
2025-08-19T21:15:48.6238182Z     return await anext(self.gen)
2025-08-19T21:15:48.6238283Z            ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6238705Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py:134: in merged_lifespan
2025-08-19T21:15:48.6238882Z     async with original_context(app) as maybe_original_state:
2025-08-19T21:15:48.6238981Z                ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6239299Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/contextlib.py:210: in __aenter__
2025-08-19T21:15:48.6239410Z     return await anext(self.gen)
2025-08-19T21:15:48.6239514Z            ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6239936Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py:134: in merged_lifespan
2025-08-19T21:15:48.6240112Z     async with original_context(app) as maybe_original_state:
2025-08-19T21:15:48.6240211Z                ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6240529Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/contextlib.py:210: in __aenter__
2025-08-19T21:15:48.6240635Z     return await anext(self.gen)
2025-08-19T21:15:48.6240736Z            ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6241153Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py:134: in merged_lifespan
2025-08-19T21:15:48.6241329Z     async with original_context(app) as maybe_original_state:
2025-08-19T21:15:48.6241427Z                ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6241748Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/contextlib.py:210: in __aenter__
2025-08-19T21:15:48.6241975Z     return await anext(self.gen)
2025-08-19T21:15:48.6242075Z            ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6242209Z services/api/main.py:76: in lifespan
2025-08-19T21:15:48.6242294Z     await _check_llm()
2025-08-19T21:15:48.6242592Z _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
2025-08-19T21:15:48.6242607Z 
2025-08-19T21:15:48.6242720Z     async def _check_llm() -> None:
2025-08-19T21:15:48.6243018Z >       from services.common.llm import LAN_BASE, LLM_PROVIDER, LLM_PROVIDER_FALLBACK
2025-08-19T21:15:48.6243547Z E       ImportError: cannot import name 'LLM_PROVIDER' from 'services.common.llm' (/home/runner/work/AWA-App/AWA-App/services/common/llm.py)
2025-08-19T21:15:48.6243557Z 
2025-08-19T21:15:48.6243700Z services/api/main.py:173: ImportError
2025-08-19T21:15:48.6243964Z _______________ test_different_client_ip_has_independent_bucket ________________
2025-08-19T21:15:48.6243972Z 
2025-08-19T21:15:48.6244156Z     def test_different_client_ip_has_independent_bucket():
2025-08-19T21:15:48.6244409Z >       with TestClient(app) as client:
2025-08-19T21:15:48.6244495Z              ^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6244502Z 
2025-08-19T21:15:48.6244653Z services/api/tests/test_rate_limit.py:60: 
2025-08-19T21:15:48.6244854Z _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
2025-08-19T21:15:48.6245280Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/testclient.py:694: in __enter__
2025-08-19T21:15:48.6245400Z     portal.call(self.wait_startup)
2025-08-19T21:15:48.6245788Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/from_thread.py:291: in call
2025-08-19T21:15:48.6245994Z     return cast(T_Retval, self.start_task_soon(func, *args).result())
2025-08-19T21:15:48.6246127Z                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6246502Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/concurrent/futures/_base.py:456: in result
2025-08-19T21:15:48.6246619Z     return self.__get_result()
2025-08-19T21:15:48.6246713Z            ^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6247113Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/concurrent/futures/_base.py:401: in __get_result
2025-08-19T21:15:48.6247199Z     raise self._exception
2025-08-19T21:15:48.6247624Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/from_thread.py:222: in _call_func
2025-08-19T21:15:48.6247740Z     retval = await retval_or_awaitable
2025-08-19T21:15:48.6247847Z              ^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6248286Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/testclient.py:729: in wait_startup
2025-08-19T21:15:48.6248373Z     await receive()
2025-08-19T21:15:48.6248786Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/testclient.py:720: in receive
2025-08-19T21:15:48.6248878Z     self.task.result()
2025-08-19T21:15:48.6249243Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/concurrent/futures/_base.py:449: in result
2025-08-19T21:15:48.6249353Z     return self.__get_result()
2025-08-19T21:15:48.6249447Z            ^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6249841Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/concurrent/futures/_base.py:401: in __get_result
2025-08-19T21:15:48.6249928Z     raise self._exception
2025-08-19T21:15:48.6250351Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/from_thread.py:222: in _call_func
2025-08-19T21:15:48.6250472Z     retval = await retval_or_awaitable
2025-08-19T21:15:48.6250579Z              ^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6251015Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/testclient.py:710: in lifespan
2025-08-19T21:15:48.6251255Z     await self.app(scope, self.stream_receive.receive, self.stream_send.send)
2025-08-19T21:15:48.6251685Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/applications.py:1054: in __call__
2025-08-19T21:15:48.6251958Z     await super().__call__(scope, receive, send)
2025-08-19T21:15:48.6252670Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/starlette.py:408: in _sentry_patched_asgi_app
2025-08-19T21:15:48.6252825Z     return await middleware(scope, receive, send)
2025-08-19T21:15:48.6252945Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6253412Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/asgi.py:179: in _run_asgi3
2025-08-19T21:15:48.6253619Z     return await self._run_app(scope, receive, send, asgi_version=3)
2025-08-19T21:15:48.6253750Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6254212Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/asgi.py:194: in _run_app
2025-08-19T21:15:48.6254297Z     raise exc from None
2025-08-19T21:15:48.6254768Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/asgi.py:190: in _run_app
2025-08-19T21:15:48.6255019Z     return await self.app(scope, receive, send)
2025-08-19T21:15:48.6255133Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6255561Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/applications.py:113: in __call__
2025-08-19T21:15:48.6255725Z     await self.middleware_stack(scope, receive, send)
2025-08-19T21:15:48.6256248Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/starlette.py:199: in _create_span_call
2025-08-19T21:15:48.6256460Z     return await old_call(app, scope, new_receive, new_send, **kwargs)
2025-08-19T21:15:48.6256591Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6257058Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/middleware/errors.py:151: in __call__
2025-08-19T21:15:48.6257187Z     await self.app(scope, receive, send)
2025-08-19T21:15:48.6257715Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/starlette.py:199: in _create_span_call
2025-08-19T21:15:48.6257918Z     return await old_call(app, scope, new_receive, new_send, **kwargs)
2025-08-19T21:15:48.6258049Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6258516Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/asgi_correlation_id/middleware.py:50: in __call__
2025-08-19T21:15:48.6258636Z     await self.app(scope, receive, send)
2025-08-19T21:15:48.6259238Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/starlette.py:297: in _sentry_exceptionmiddleware_call
2025-08-19T21:15:48.6259371Z     await old_call(self, scope, receive, send)
2025-08-19T21:15:48.6259891Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/starlette.py:199: in _create_span_call
2025-08-19T21:15:48.6260094Z     return await old_call(app, scope, new_receive, new_send, **kwargs)
2025-08-19T21:15:48.6260228Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6260695Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/middleware/exceptions.py:49: in __call__
2025-08-19T21:15:48.6260822Z     await self.app(scope, receive, send)
2025-08-19T21:15:48.6261229Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py:716: in __call__
2025-08-19T21:15:48.6261391Z     await self.middleware_stack(scope, receive, send)
2025-08-19T21:15:48.6261786Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py:725: in app
2025-08-19T21:15:48.6261926Z     await self.lifespan(scope, receive, send)
2025-08-19T21:15:48.6269048Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py:694: in lifespan
2025-08-19T21:15:48.6269510Z     async with self.lifespan_context(app) as maybe_state:
2025-08-19T21:15:48.6269643Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6269994Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/contextlib.py:210: in __aenter__
2025-08-19T21:15:48.6270118Z     return await anext(self.gen)
2025-08-19T21:15:48.6270217Z            ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6270677Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py:134: in merged_lifespan
2025-08-19T21:15:48.6270875Z     async with original_context(app) as maybe_original_state:
2025-08-19T21:15:48.6270987Z                ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6271328Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/contextlib.py:210: in __aenter__
2025-08-19T21:15:48.6271444Z     return await anext(self.gen)
2025-08-19T21:15:48.6271539Z            ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6271989Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py:134: in merged_lifespan
2025-08-19T21:15:48.6272290Z     async with original_context(app) as maybe_original_state:
2025-08-19T21:15:48.6272396Z                ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6272869Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/contextlib.py:210: in __aenter__
2025-08-19T21:15:48.6272991Z     return await anext(self.gen)
2025-08-19T21:15:48.6273087Z            ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6273521Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py:134: in merged_lifespan
2025-08-19T21:15:48.6273701Z     async with original_context(app) as maybe_original_state:
2025-08-19T21:15:48.6273808Z                ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6274133Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/contextlib.py:210: in __aenter__
2025-08-19T21:15:48.6274252Z     return await anext(self.gen)
2025-08-19T21:15:48.6274353Z            ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6274783Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py:134: in merged_lifespan
2025-08-19T21:15:48.6274972Z     async with original_context(app) as maybe_original_state:
2025-08-19T21:15:48.6275070Z                ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6275388Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/contextlib.py:210: in __aenter__
2025-08-19T21:15:48.6275494Z     return await anext(self.gen)
2025-08-19T21:15:48.6275592Z            ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6276010Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py:134: in merged_lifespan
2025-08-19T21:15:48.6276186Z     async with original_context(app) as maybe_original_state:
2025-08-19T21:15:48.6276288Z                ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6276640Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/contextlib.py:210: in __aenter__
2025-08-19T21:15:48.6276748Z     return await anext(self.gen)
2025-08-19T21:15:48.6276849Z            ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6277294Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py:134: in merged_lifespan
2025-08-19T21:15:48.6277487Z     async with original_context(app) as maybe_original_state:
2025-08-19T21:15:48.6277587Z                ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6277918Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/contextlib.py:210: in __aenter__
2025-08-19T21:15:48.6278028Z     return await anext(self.gen)
2025-08-19T21:15:48.6278130Z            ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6278268Z services/api/main.py:76: in lifespan
2025-08-19T21:15:48.6278358Z     await _check_llm()
2025-08-19T21:15:48.6278565Z _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
2025-08-19T21:15:48.6278575Z 
2025-08-19T21:15:48.6278695Z     async def _check_llm() -> None:
2025-08-19T21:15:48.6278992Z >       from services.common.llm import LAN_BASE, LLM_PROVIDER, LLM_PROVIDER_FALLBACK
2025-08-19T21:15:48.6279518Z E       ImportError: cannot import name 'LLM_PROVIDER' from 'services.common.llm' (/home/runner/work/AWA-App/AWA-App/services/common/llm.py)
2025-08-19T21:15:48.6279654Z 
2025-08-19T21:15:48.6279805Z services/api/main.py:173: ImportError
2025-08-19T21:15:48.6280048Z __________________________ test_roi_needs_basic_auth ___________________________
2025-08-19T21:15:48.6280056Z 
2025-08-19T21:15:48.6280334Z monkeypatch = <_pytest.monkeypatch.MonkeyPatch object at 0x7f3f30de28a0>
2025-08-19T21:15:48.6280343Z 
2025-08-19T21:15:48.6280479Z     def test_roi_needs_basic_auth(monkeypatch):
2025-08-19T21:15:48.6280612Z         os.environ["API_BASIC_USER"] = "u"
2025-08-19T21:15:48.6280736Z         os.environ["API_BASIC_PASS"] = "p"
2025-08-19T21:15:48.6280892Z >       with _client(monkeypatch) as client:
2025-08-19T21:15:48.6280995Z              ^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6281004Z 
2025-08-19T21:15:48.6281178Z services/api/tests/test_roi_basic_auth.py:73: 
2025-08-19T21:15:48.6281383Z _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
2025-08-19T21:15:48.6281838Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/contextlib.py:137: in __enter__
2025-08-19T21:15:48.6281930Z     return next(self.gen)
2025-08-19T21:15:48.6282015Z            ^^^^^^^^^^^^^^
2025-08-19T21:15:48.6282223Z services/api/tests/test_roi_basic_auth.py:65: in _client
2025-08-19T21:15:48.6282357Z     with TestClient(main.app) as client:
2025-08-19T21:15:48.6282541Z          ^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6282997Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/testclient.py:694: in __enter__
2025-08-19T21:15:48.6283123Z     portal.call(self.wait_startup)
2025-08-19T21:15:48.6283517Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/from_thread.py:291: in call
2025-08-19T21:15:48.6283725Z     return cast(T_Retval, self.start_task_soon(func, *args).result())
2025-08-19T21:15:48.6283861Z                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6284243Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/concurrent/futures/_base.py:456: in result
2025-08-19T21:15:48.6284356Z     return self.__get_result()
2025-08-19T21:15:48.6284455Z            ^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6284847Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/concurrent/futures/_base.py:401: in __get_result
2025-08-19T21:15:48.6284939Z     raise self._exception
2025-08-19T21:15:48.6285354Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/from_thread.py:222: in _call_func
2025-08-19T21:15:48.6285479Z     retval = await retval_or_awaitable
2025-08-19T21:15:48.6285582Z              ^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6286024Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/testclient.py:729: in wait_startup
2025-08-19T21:15:48.6286105Z     await receive()
2025-08-19T21:15:48.6286523Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/testclient.py:720: in receive
2025-08-19T21:15:48.6286614Z     self.task.result()
2025-08-19T21:15:48.6286987Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/concurrent/futures/_base.py:449: in result
2025-08-19T21:15:48.6287091Z     return self.__get_result()
2025-08-19T21:15:48.6287189Z            ^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6287574Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/concurrent/futures/_base.py:401: in __get_result
2025-08-19T21:15:48.6287666Z     raise self._exception
2025-08-19T21:15:48.6288074Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/from_thread.py:222: in _call_func
2025-08-19T21:15:48.6288198Z     retval = await retval_or_awaitable
2025-08-19T21:15:48.6288299Z              ^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6288720Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/testclient.py:710: in lifespan
2025-08-19T21:15:48.6288960Z     await self.app(scope, self.stream_receive.receive, self.stream_send.send)
2025-08-19T21:15:48.6289506Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/applications.py:1054: in __call__
2025-08-19T21:15:48.6289655Z     await super().__call__(scope, receive, send)
2025-08-19T21:15:48.6290213Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/starlette.py:408: in _sentry_patched_asgi_app
2025-08-19T21:15:48.6290362Z     return await middleware(scope, receive, send)
2025-08-19T21:15:48.6290478Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6290949Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/asgi.py:179: in _run_asgi3
2025-08-19T21:15:48.6291148Z     return await self._run_app(scope, receive, send, asgi_version=3)
2025-08-19T21:15:48.6291285Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6291738Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/asgi.py:194: in _run_app
2025-08-19T21:15:48.6291834Z     raise exc from None
2025-08-19T21:15:48.6292392Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/asgi.py:190: in _run_app
2025-08-19T21:15:48.6292642Z     return await self.app(scope, receive, send)
2025-08-19T21:15:48.6292757Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6293192Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/applications.py:113: in __call__
2025-08-19T21:15:48.6293348Z     await self.middleware_stack(scope, receive, send)
2025-08-19T21:15:48.6293870Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/starlette.py:199: in _create_span_call
2025-08-19T21:15:48.6294083Z     return await old_call(app, scope, new_receive, new_send, **kwargs)
2025-08-19T21:15:48.6294218Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6294675Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/middleware/errors.py:151: in __call__
2025-08-19T21:15:48.6294809Z     await self.app(scope, receive, send)
2025-08-19T21:15:48.6295333Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/starlette.py:199: in _create_span_call
2025-08-19T21:15:48.6295526Z     return await old_call(app, scope, new_receive, new_send, **kwargs)
2025-08-19T21:15:48.6295659Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6296102Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/middleware/cors.py:77: in __call__
2025-08-19T21:15:48.6296222Z     await self.app(scope, receive, send)
2025-08-19T21:15:48.6296741Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/starlette.py:199: in _create_span_call
2025-08-19T21:15:48.6296934Z     return await old_call(app, scope, new_receive, new_send, **kwargs)
2025-08-19T21:15:48.6297068Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6297534Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/asgi_correlation_id/middleware.py:50: in __call__
2025-08-19T21:15:48.6297657Z     await self.app(scope, receive, send)
2025-08-19T21:15:48.6298253Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/starlette.py:297: in _sentry_exceptionmiddleware_call
2025-08-19T21:15:48.6298392Z     await old_call(self, scope, receive, send)
2025-08-19T21:15:48.6298900Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/starlette.py:199: in _create_span_call
2025-08-19T21:15:48.6299106Z     return await old_call(app, scope, new_receive, new_send, **kwargs)
2025-08-19T21:15:48.6299235Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6299730Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/middleware/exceptions.py:49: in __call__
2025-08-19T21:15:48.6300015Z     await self.app(scope, receive, send)
2025-08-19T21:15:48.6300438Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py:716: in __call__
2025-08-19T21:15:48.6300606Z     await self.middleware_stack(scope, receive, send)
2025-08-19T21:15:48.6301010Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py:725: in app
2025-08-19T21:15:48.6301152Z     await self.lifespan(scope, receive, send)
2025-08-19T21:15:48.6301561Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py:694: in lifespan
2025-08-19T21:15:48.6301735Z     async with self.lifespan_context(app) as maybe_state:
2025-08-19T21:15:48.6301841Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6302171Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/contextlib.py:210: in __aenter__
2025-08-19T21:15:48.6302284Z     return await anext(self.gen)
2025-08-19T21:15:48.6302387Z            ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6303074Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py:134: in merged_lifespan
2025-08-19T21:15:48.6303397Z     async with original_context(app) as maybe_original_state:
2025-08-19T21:15:48.6303502Z                ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6303831Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/contextlib.py:210: in __aenter__
2025-08-19T21:15:48.6303941Z     return await anext(self.gen)
2025-08-19T21:15:48.6304045Z            ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6304474Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py:134: in merged_lifespan
2025-08-19T21:15:48.6304655Z     async with original_context(app) as maybe_original_state:
2025-08-19T21:15:48.6304754Z                ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6305077Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/contextlib.py:210: in __aenter__
2025-08-19T21:15:48.6305187Z     return await anext(self.gen)
2025-08-19T21:15:48.6305299Z            ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6305733Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py:134: in merged_lifespan
2025-08-19T21:15:48.6305914Z     async with original_context(app) as maybe_original_state:
2025-08-19T21:15:48.6306017Z                ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6306332Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/contextlib.py:210: in __aenter__
2025-08-19T21:15:48.6306444Z     return await anext(self.gen)
2025-08-19T21:15:48.6306539Z            ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6306964Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py:134: in merged_lifespan
2025-08-19T21:15:48.6307136Z     async with original_context(app) as maybe_original_state:
2025-08-19T21:15:48.6307242Z                ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6307555Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/contextlib.py:210: in __aenter__
2025-08-19T21:15:48.6307671Z     return await anext(self.gen)
2025-08-19T21:15:48.6307769Z            ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6308197Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py:134: in merged_lifespan
2025-08-19T21:15:48.6308367Z     async with original_context(app) as maybe_original_state:
2025-08-19T21:15:48.6308470Z                ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6308781Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/contextlib.py:210: in __aenter__
2025-08-19T21:15:48.6308894Z     return await anext(self.gen)
2025-08-19T21:15:48.6308989Z            ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6309414Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py:134: in merged_lifespan
2025-08-19T21:15:48.6309585Z     async with original_context(app) as maybe_original_state:
2025-08-19T21:15:48.6309688Z                ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6309999Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/contextlib.py:210: in __aenter__
2025-08-19T21:15:48.6310232Z     return await anext(self.gen)
2025-08-19T21:15:48.6310328Z            ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6310467Z services/api/main.py:76: in lifespan
2025-08-19T21:15:48.6310548Z     await _check_llm()
2025-08-19T21:15:48.6310756Z _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
2025-08-19T21:15:48.6310765Z 
2025-08-19T21:15:48.6310882Z     async def _check_llm() -> None:
2025-08-19T21:15:48.6311179Z >       from services.common.llm import LAN_BASE, LLM_PROVIDER, LLM_PROVIDER_FALLBACK
2025-08-19T21:15:48.6311703Z E       ImportError: cannot import name 'LLM_PROVIDER' from 'services.common.llm' (/home/runner/work/AWA-App/AWA-App/services/common/llm.py)
2025-08-19T21:15:48.6311712Z 
2025-08-19T21:15:48.6311850Z services/api/main.py:173: ImportError
2025-08-19T21:15:48.6312090Z ___________________________ test_roi_basic_auth_good ___________________________
2025-08-19T21:15:48.6312098Z 
2025-08-19T21:15:48.6312370Z monkeypatch = <_pytest.monkeypatch.MonkeyPatch object at 0x7f3f30ea7740>
2025-08-19T21:15:48.6312594Z 
2025-08-19T21:15:48.6312741Z     def test_roi_basic_auth_good(monkeypatch):
2025-08-19T21:15:48.6312868Z         os.environ["API_BASIC_USER"] = "u"
2025-08-19T21:15:48.6312993Z         os.environ["API_BASIC_PASS"] = "p"
2025-08-19T21:15:48.6313140Z >       with _client(monkeypatch) as client:
2025-08-19T21:15:48.6313245Z              ^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6313252Z 
2025-08-19T21:15:48.6313419Z services/api/tests/test_roi_basic_auth.py:81: 
2025-08-19T21:15:48.6313621Z _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
2025-08-19T21:15:48.6313940Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/contextlib.py:137: in __enter__
2025-08-19T21:15:48.6314033Z     return next(self.gen)
2025-08-19T21:15:48.6314115Z            ^^^^^^^^^^^^^^
2025-08-19T21:15:48.6314322Z services/api/tests/test_roi_basic_auth.py:65: in _client
2025-08-19T21:15:48.6314453Z     with TestClient(main.app) as client:
2025-08-19T21:15:48.6314538Z          ^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6314967Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/testclient.py:694: in __enter__
2025-08-19T21:15:48.6315084Z     portal.call(self.wait_startup)
2025-08-19T21:15:48.6315478Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/from_thread.py:291: in call
2025-08-19T21:15:48.6315678Z     return cast(T_Retval, self.start_task_soon(func, *args).result())
2025-08-19T21:15:48.6315818Z                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6316185Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/concurrent/futures/_base.py:456: in result
2025-08-19T21:15:48.6316296Z     return self.__get_result()
2025-08-19T21:15:48.6316391Z            ^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6316786Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/concurrent/futures/_base.py:401: in __get_result
2025-08-19T21:15:48.6316877Z     raise self._exception
2025-08-19T21:15:48.6317298Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/from_thread.py:222: in _call_func
2025-08-19T21:15:48.6317415Z     retval = await retval_or_awaitable
2025-08-19T21:15:48.6317523Z              ^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6317958Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/testclient.py:729: in wait_startup
2025-08-19T21:15:48.6318044Z     await receive()
2025-08-19T21:15:48.6318466Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/testclient.py:720: in receive
2025-08-19T21:15:48.6318557Z     self.task.result()
2025-08-19T21:15:48.6318924Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/concurrent/futures/_base.py:449: in result
2025-08-19T21:15:48.6319034Z     return self.__get_result()
2025-08-19T21:15:48.6319127Z            ^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6319524Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/concurrent/futures/_base.py:401: in __get_result
2025-08-19T21:15:48.6319733Z     raise self._exception
2025-08-19T21:15:48.6320156Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/from_thread.py:222: in _call_func
2025-08-19T21:15:48.6320277Z     retval = await retval_or_awaitable
2025-08-19T21:15:48.6320381Z              ^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6320804Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/testclient.py:710: in lifespan
2025-08-19T21:15:48.6321038Z     await self.app(scope, self.stream_receive.receive, self.stream_send.send)
2025-08-19T21:15:48.6321467Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/applications.py:1054: in __call__
2025-08-19T21:15:48.6321606Z     await super().__call__(scope, receive, send)
2025-08-19T21:15:48.6322172Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/starlette.py:408: in _sentry_patched_asgi_app
2025-08-19T21:15:48.6322320Z     return await middleware(scope, receive, send)
2025-08-19T21:15:48.6322643Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6323108Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/asgi.py:179: in _run_asgi3
2025-08-19T21:15:48.6323314Z     return await self._run_app(scope, receive, send, asgi_version=3)
2025-08-19T21:15:48.6323445Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6323907Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/asgi.py:194: in _run_app
2025-08-19T21:15:48.6323990Z     raise exc from None
2025-08-19T21:15:48.6324446Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/asgi.py:190: in _run_app
2025-08-19T21:15:48.6324583Z     return await self.app(scope, receive, send)
2025-08-19T21:15:48.6324698Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6325139Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/applications.py:113: in __call__
2025-08-19T21:15:48.6325301Z     await self.middleware_stack(scope, receive, send)
2025-08-19T21:15:48.6325834Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/starlette.py:199: in _create_span_call
2025-08-19T21:15:48.6326039Z     return await old_call(app, scope, new_receive, new_send, **kwargs)
2025-08-19T21:15:48.6326175Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6326627Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/middleware/errors.py:151: in __call__
2025-08-19T21:15:48.6326755Z     await self.app(scope, receive, send)
2025-08-19T21:15:48.6327278Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/starlette.py:199: in _create_span_call
2025-08-19T21:15:48.6327478Z     return await old_call(app, scope, new_receive, new_send, **kwargs)
2025-08-19T21:15:48.6327614Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6328060Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/middleware/cors.py:77: in __call__
2025-08-19T21:15:48.6328178Z     await self.app(scope, receive, send)
2025-08-19T21:15:48.6328695Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/starlette.py:199: in _create_span_call
2025-08-19T21:15:48.6328891Z     return await old_call(app, scope, new_receive, new_send, **kwargs)
2025-08-19T21:15:48.6329023Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6329483Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/asgi_correlation_id/middleware.py:50: in __call__
2025-08-19T21:15:48.6329603Z     await self.app(scope, receive, send)
2025-08-19T21:15:48.6330204Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/starlette.py:297: in _sentry_exceptionmiddleware_call
2025-08-19T21:15:48.6330460Z     await old_call(self, scope, receive, send)
2025-08-19T21:15:48.6330980Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/starlette.py:199: in _create_span_call
2025-08-19T21:15:48.6331174Z     return await old_call(app, scope, new_receive, new_send, **kwargs)
2025-08-19T21:15:48.6331307Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6331775Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/middleware/exceptions.py:49: in __call__
2025-08-19T21:15:48.6331900Z     await self.app(scope, receive, send)
2025-08-19T21:15:48.6332305Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py:716: in __call__
2025-08-19T21:15:48.6332561Z     await self.middleware_stack(scope, receive, send)
2025-08-19T21:15:48.6332953Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py:725: in app
2025-08-19T21:15:48.6333214Z     await self.lifespan(scope, receive, send)
2025-08-19T21:15:48.6333623Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py:694: in lifespan
2025-08-19T21:15:48.6333796Z     async with self.lifespan_context(app) as maybe_state:
2025-08-19T21:15:48.6333908Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6334227Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/contextlib.py:210: in __aenter__
2025-08-19T21:15:48.6334343Z     return await anext(self.gen)
2025-08-19T21:15:48.6334439Z            ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6334870Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py:134: in merged_lifespan
2025-08-19T21:15:48.6335053Z     async with original_context(app) as maybe_original_state:
2025-08-19T21:15:48.6335162Z                ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6335487Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/contextlib.py:210: in __aenter__
2025-08-19T21:15:48.6335611Z     return await anext(self.gen)
2025-08-19T21:15:48.6335707Z            ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6336139Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py:134: in merged_lifespan
2025-08-19T21:15:48.6336314Z     async with original_context(app) as maybe_original_state:
2025-08-19T21:15:48.6336419Z                ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6336732Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/contextlib.py:210: in __aenter__
2025-08-19T21:15:48.6336845Z     return await anext(self.gen)
2025-08-19T21:15:48.6336940Z            ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6337365Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py:134: in merged_lifespan
2025-08-19T21:15:48.6337543Z     async with original_context(app) as maybe_original_state:
2025-08-19T21:15:48.6337648Z                ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6337967Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/contextlib.py:210: in __aenter__
2025-08-19T21:15:48.6338087Z     return await anext(self.gen)
2025-08-19T21:15:48.6338181Z            ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6338608Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py:134: in merged_lifespan
2025-08-19T21:15:48.6338778Z     async with original_context(app) as maybe_original_state:
2025-08-19T21:15:48.6338886Z                ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6339202Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/contextlib.py:210: in __aenter__
2025-08-19T21:15:48.6339308Z     return await anext(self.gen)
2025-08-19T21:15:48.6339408Z            ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6339830Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py:134: in merged_lifespan
2025-08-19T21:15:48.6340003Z     async with original_context(app) as maybe_original_state:
2025-08-19T21:15:48.6340222Z                ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6340542Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/contextlib.py:210: in __aenter__
2025-08-19T21:15:48.6340649Z     return await anext(self.gen)
2025-08-19T21:15:48.6340748Z            ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6341167Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py:134: in merged_lifespan
2025-08-19T21:15:48.6341342Z     async with original_context(app) as maybe_original_state:
2025-08-19T21:15:48.6341441Z                ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6341759Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/contextlib.py:210: in __aenter__
2025-08-19T21:15:48.6341864Z     return await anext(self.gen)
2025-08-19T21:15:48.6341967Z            ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6342100Z services/api/main.py:76: in lifespan
2025-08-19T21:15:48.6342187Z     await _check_llm()
2025-08-19T21:15:48.6342386Z _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
2025-08-19T21:15:48.6342693Z 
2025-08-19T21:15:48.6342832Z     async def _check_llm() -> None:
2025-08-19T21:15:48.6343142Z >       from services.common.llm import LAN_BASE, LLM_PROVIDER, LLM_PROVIDER_FALLBACK
2025-08-19T21:15:48.6343670Z E       ImportError: cannot import name 'LLM_PROVIDER' from 'services.common.llm' (/home/runner/work/AWA-App/AWA-App/services/common/llm.py)
2025-08-19T21:15:48.6343679Z 
2025-08-19T21:15:48.6343826Z services/api/main.py:173: ImportError
2025-08-19T21:15:48.6344065Z _________________________ test_score_needs_basic_auth __________________________
2025-08-19T21:15:48.6344073Z 
2025-08-19T21:15:48.6344346Z monkeypatch = <_pytest.monkeypatch.MonkeyPatch object at 0x7f3f30df4f50>
2025-08-19T21:15:48.6344354Z 
2025-08-19T21:15:48.6344498Z     def test_score_needs_basic_auth(monkeypatch):
2025-08-19T21:15:48.6344630Z         os.environ["API_BASIC_USER"] = "u"
2025-08-19T21:15:48.6344756Z         os.environ["API_BASIC_PASS"] = "p"
2025-08-19T21:15:48.6344909Z >       with _client(monkeypatch) as client:
2025-08-19T21:15:48.6345021Z              ^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6345030Z 
2025-08-19T21:15:48.6345205Z services/api/tests/test_roi_basic_auth.py:89: 
2025-08-19T21:15:48.6345403Z _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
2025-08-19T21:15:48.6345734Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/contextlib.py:137: in __enter__
2025-08-19T21:15:48.6345823Z     return next(self.gen)
2025-08-19T21:15:48.6345906Z            ^^^^^^^^^^^^^^
2025-08-19T21:15:48.6346112Z services/api/tests/test_roi_basic_auth.py:65: in _client
2025-08-19T21:15:48.6346240Z     with TestClient(main.app) as client:
2025-08-19T21:15:48.6346321Z          ^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6346755Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/testclient.py:694: in __enter__
2025-08-19T21:15:48.6346873Z     portal.call(self.wait_startup)
2025-08-19T21:15:48.6347269Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/from_thread.py:291: in call
2025-08-19T21:15:48.6347487Z     return cast(T_Retval, self.start_task_soon(func, *args).result())
2025-08-19T21:15:48.6347620Z                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6347990Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/concurrent/futures/_base.py:456: in result
2025-08-19T21:15:48.6348097Z     return self.__get_result()
2025-08-19T21:15:48.6348194Z            ^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6348590Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/concurrent/futures/_base.py:401: in __get_result
2025-08-19T21:15:48.6348682Z     raise self._exception
2025-08-19T21:15:48.6349106Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/from_thread.py:222: in _call_func
2025-08-19T21:15:48.6349234Z     retval = await retval_or_awaitable
2025-08-19T21:15:48.6349338Z              ^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6349793Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/testclient.py:729: in wait_startup
2025-08-19T21:15:48.6350000Z     await receive()
2025-08-19T21:15:48.6350417Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/testclient.py:720: in receive
2025-08-19T21:15:48.6350502Z     self.task.result()
2025-08-19T21:15:48.6350875Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/concurrent/futures/_base.py:449: in result
2025-08-19T21:15:48.6350980Z     return self.__get_result()
2025-08-19T21:15:48.6351078Z            ^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6351474Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/concurrent/futures/_base.py:401: in __get_result
2025-08-19T21:15:48.6351565Z     raise self._exception
2025-08-19T21:15:48.6351975Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/from_thread.py:222: in _call_func
2025-08-19T21:15:48.6352095Z     retval = await retval_or_awaitable
2025-08-19T21:15:48.6352196Z              ^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6352836Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/testclient.py:710: in lifespan
2025-08-19T21:15:48.6353075Z     await self.app(scope, self.stream_receive.receive, self.stream_send.send)
2025-08-19T21:15:48.6353610Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/applications.py:1054: in __call__
2025-08-19T21:15:48.6353753Z     await super().__call__(scope, receive, send)
2025-08-19T21:15:48.6354311Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/starlette.py:408: in _sentry_patched_asgi_app
2025-08-19T21:15:48.6354459Z     return await middleware(scope, receive, send)
2025-08-19T21:15:48.6354572Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6355037Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/asgi.py:179: in _run_asgi3
2025-08-19T21:15:48.6355237Z     return await self._run_app(scope, receive, send, asgi_version=3)
2025-08-19T21:15:48.6355382Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6355837Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/asgi.py:194: in _run_app
2025-08-19T21:15:48.6355924Z     raise exc from None
2025-08-19T21:15:48.6356369Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/asgi.py:190: in _run_app
2025-08-19T21:15:48.6356511Z     return await self.app(scope, receive, send)
2025-08-19T21:15:48.6356627Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6357051Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/applications.py:113: in __call__
2025-08-19T21:15:48.6357209Z     await self.middleware_stack(scope, receive, send)
2025-08-19T21:15:48.6357736Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/starlette.py:199: in _create_span_call
2025-08-19T21:15:48.6357948Z     return await old_call(app, scope, new_receive, new_send, **kwargs)
2025-08-19T21:15:48.6358084Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6358545Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/middleware/errors.py:151: in __call__
2025-08-19T21:15:48.6358669Z     await self.app(scope, receive, send)
2025-08-19T21:15:48.6359189Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/starlette.py:199: in _create_span_call
2025-08-19T21:15:48.6359383Z     return await old_call(app, scope, new_receive, new_send, **kwargs)
2025-08-19T21:15:48.6359514Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6359954Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/middleware/cors.py:77: in __call__
2025-08-19T21:15:48.6360080Z     await self.app(scope, receive, send)
2025-08-19T21:15:48.6360590Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/starlette.py:199: in _create_span_call
2025-08-19T21:15:48.6360915Z     return await old_call(app, scope, new_receive, new_send, **kwargs)
2025-08-19T21:15:48.6361047Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6361502Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/asgi_correlation_id/middleware.py:50: in __call__
2025-08-19T21:15:48.6361625Z     await self.app(scope, receive, send)
2025-08-19T21:15:48.6362219Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/starlette.py:297: in _sentry_exceptionmiddleware_call
2025-08-19T21:15:48.6362357Z     await old_call(self, scope, receive, send)
2025-08-19T21:15:48.6362970Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/starlette.py:199: in _create_span_call
2025-08-19T21:15:48.6363171Z     return await old_call(app, scope, new_receive, new_send, **kwargs)
2025-08-19T21:15:48.6363439Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6363910Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/middleware/exceptions.py:49: in __call__
2025-08-19T21:15:48.6364028Z     await self.app(scope, receive, send)
2025-08-19T21:15:48.6364438Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py:716: in __call__
2025-08-19T21:15:48.6364590Z     await self.middleware_stack(scope, receive, send)
2025-08-19T21:15:48.6364981Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py:725: in app
2025-08-19T21:15:48.6365113Z     await self.lifespan(scope, receive, send)
2025-08-19T21:15:48.6365523Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py:694: in lifespan
2025-08-19T21:15:48.6365694Z     async with self.lifespan_context(app) as maybe_state:
2025-08-19T21:15:48.6365806Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6366136Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/contextlib.py:210: in __aenter__
2025-08-19T21:15:48.6366246Z     return await anext(self.gen)
2025-08-19T21:15:48.6366345Z            ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6366771Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py:134: in merged_lifespan
2025-08-19T21:15:48.6366953Z     async with original_context(app) as maybe_original_state:
2025-08-19T21:15:48.6367054Z                ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6367384Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/contextlib.py:210: in __aenter__
2025-08-19T21:15:48.6367493Z     return await anext(self.gen)
2025-08-19T21:15:48.6367594Z            ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6368018Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py:134: in merged_lifespan
2025-08-19T21:15:48.6368196Z     async with original_context(app) as maybe_original_state:
2025-08-19T21:15:48.6368302Z                ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6368625Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/contextlib.py:210: in __aenter__
2025-08-19T21:15:48.6368735Z     return await anext(self.gen)
2025-08-19T21:15:48.6368833Z            ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6369261Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py:134: in merged_lifespan
2025-08-19T21:15:48.6369438Z     async with original_context(app) as maybe_original_state:
2025-08-19T21:15:48.6369536Z                ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6369857Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/contextlib.py:210: in __aenter__
2025-08-19T21:15:48.6369964Z     return await anext(self.gen)
2025-08-19T21:15:48.6370061Z            ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6370480Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py:134: in merged_lifespan
2025-08-19T21:15:48.6370775Z     async with original_context(app) as maybe_original_state:
2025-08-19T21:15:48.6370883Z                ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6371197Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/contextlib.py:210: in __aenter__
2025-08-19T21:15:48.6371307Z     return await anext(self.gen)
2025-08-19T21:15:48.6371401Z            ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6371822Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py:134: in merged_lifespan
2025-08-19T21:15:48.6371995Z     async with original_context(app) as maybe_original_state:
2025-08-19T21:15:48.6372098Z                ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6372502Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/contextlib.py:210: in __aenter__
2025-08-19T21:15:48.6372619Z     return await anext(self.gen)
2025-08-19T21:15:48.6372715Z            ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6373137Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py:134: in merged_lifespan
2025-08-19T21:15:48.6373428Z     async with original_context(app) as maybe_original_state:
2025-08-19T21:15:48.6373533Z                ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6373843Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/contextlib.py:210: in __aenter__
2025-08-19T21:15:48.6373952Z     return await anext(self.gen)
2025-08-19T21:15:48.6374046Z            ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6374187Z services/api/main.py:76: in lifespan
2025-08-19T21:15:48.6374269Z     await _check_llm()
2025-08-19T21:15:48.6374475Z _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
2025-08-19T21:15:48.6374484Z 
2025-08-19T21:15:48.6374595Z     async def _check_llm() -> None:
2025-08-19T21:15:48.6374895Z >       from services.common.llm import LAN_BASE, LLM_PROVIDER, LLM_PROVIDER_FALLBACK
2025-08-19T21:15:48.6375415Z E       ImportError: cannot import name 'LLM_PROVIDER' from 'services.common.llm' (/home/runner/work/AWA-App/AWA-App/services/common/llm.py)
2025-08-19T21:15:48.6375438Z 
2025-08-19T21:15:48.6375577Z services/api/main.py:173: ImportError
2025-08-19T21:15:48.6375826Z _____________________ test_stats_contract_needs_basic_auth _____________________
2025-08-19T21:15:48.6375834Z 
2025-08-19T21:15:48.6376100Z monkeypatch = <_pytest.monkeypatch.MonkeyPatch object at 0x7f3f316d9a90>
2025-08-19T21:15:48.6376108Z 
2025-08-19T21:15:48.6376277Z     def test_stats_contract_needs_basic_auth(monkeypatch):
2025-08-19T21:15:48.6376439Z         os.environ["API_BASIC_USER"] = "u"
2025-08-19T21:15:48.6376567Z         os.environ["API_BASIC_PASS"] = "p"
2025-08-19T21:15:48.6376716Z >       with _client(monkeypatch) as client:
2025-08-19T21:15:48.6376819Z              ^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6376827Z 
2025-08-19T21:15:48.6376991Z services/api/tests/test_roi_basic_auth.py:97: 
2025-08-19T21:15:48.6377194Z _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
2025-08-19T21:15:48.6377513Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/contextlib.py:137: in __enter__
2025-08-19T21:15:48.6377611Z     return next(self.gen)
2025-08-19T21:15:48.6377687Z            ^^^^^^^^^^^^^^
2025-08-19T21:15:48.6377893Z services/api/tests/test_roi_basic_auth.py:65: in _client
2025-08-19T21:15:48.6378013Z     with TestClient(main.app) as client:
2025-08-19T21:15:48.6378095Z          ^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6378519Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/testclient.py:694: in __enter__
2025-08-19T21:15:48.6378639Z     portal.call(self.wait_startup)
2025-08-19T21:15:48.6379025Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/from_thread.py:291: in call
2025-08-19T21:15:48.6379226Z     return cast(T_Retval, self.start_task_soon(func, *args).result())
2025-08-19T21:15:48.6379369Z                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6379734Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/concurrent/futures/_base.py:456: in result
2025-08-19T21:15:48.6380028Z     return self.__get_result()
2025-08-19T21:15:48.6380123Z            ^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6380523Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/concurrent/futures/_base.py:401: in __get_result
2025-08-19T21:15:48.6380610Z     raise self._exception
2025-08-19T21:15:48.6381029Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/from_thread.py:222: in _call_func
2025-08-19T21:15:48.6381146Z     retval = await retval_or_awaitable
2025-08-19T21:15:48.6381251Z              ^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6381691Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/testclient.py:729: in wait_startup
2025-08-19T21:15:48.6381775Z     await receive()
2025-08-19T21:15:48.6382185Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/testclient.py:720: in receive
2025-08-19T21:15:48.6382273Z     self.task.result()
2025-08-19T21:15:48.6382858Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/concurrent/futures/_base.py:449: in result
2025-08-19T21:15:48.6383109Z     return self.__get_result()
2025-08-19T21:15:48.6383204Z            ^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6383605Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/concurrent/futures/_base.py:401: in __get_result
2025-08-19T21:15:48.6383694Z     raise self._exception
2025-08-19T21:15:48.6384109Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/from_thread.py:222: in _call_func
2025-08-19T21:15:48.6384224Z     retval = await retval_or_awaitable
2025-08-19T21:15:48.6384329Z              ^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6384746Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/testclient.py:710: in lifespan
2025-08-19T21:15:48.6384982Z     await self.app(scope, self.stream_receive.receive, self.stream_send.send)
2025-08-19T21:15:48.6385407Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/applications.py:1054: in __call__
2025-08-19T21:15:48.6385558Z     await super().__call__(scope, receive, send)
2025-08-19T21:15:48.6386118Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/starlette.py:408: in _sentry_patched_asgi_app
2025-08-19T21:15:48.6386260Z     return await middleware(scope, receive, send)
2025-08-19T21:15:48.6386376Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6386837Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/asgi.py:179: in _run_asgi3
2025-08-19T21:15:48.6387038Z     return await self._run_app(scope, receive, send, asgi_version=3)
2025-08-19T21:15:48.6387167Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6387624Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/asgi.py:194: in _run_app
2025-08-19T21:15:48.6387708Z     raise exc from None
2025-08-19T21:15:48.6388161Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/asgi.py:190: in _run_app
2025-08-19T21:15:48.6388302Z     return await self.app(scope, receive, send)
2025-08-19T21:15:48.6388416Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6388843Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/applications.py:113: in __call__
2025-08-19T21:15:48.6389004Z     await self.middleware_stack(scope, receive, send)
2025-08-19T21:15:48.6389524Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/starlette.py:199: in _create_span_call
2025-08-19T21:15:48.6389730Z     return await old_call(app, scope, new_receive, new_send, **kwargs)
2025-08-19T21:15:48.6389867Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6390325Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/middleware/errors.py:151: in __call__
2025-08-19T21:15:48.6390579Z     await self.app(scope, receive, send)
2025-08-19T21:15:48.6391121Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/starlette.py:199: in _create_span_call
2025-08-19T21:15:48.6391327Z     return await old_call(app, scope, new_receive, new_send, **kwargs)
2025-08-19T21:15:48.6391456Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6391907Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/middleware/cors.py:77: in __call__
2025-08-19T21:15:48.6392029Z     await self.app(scope, receive, send)
2025-08-19T21:15:48.6392655Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/starlette.py:199: in _create_span_call
2025-08-19T21:15:48.6392856Z     return await old_call(app, scope, new_receive, new_send, **kwargs)
2025-08-19T21:15:48.6392989Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6393445Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/asgi_correlation_id/middleware.py:50: in __call__
2025-08-19T21:15:48.6393687Z     await self.app(scope, receive, send)
2025-08-19T21:15:48.6394283Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/starlette.py:297: in _sentry_exceptionmiddleware_call
2025-08-19T21:15:48.6394422Z     await old_call(self, scope, receive, send)
2025-08-19T21:15:48.6394939Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/starlette.py:199: in _create_span_call
2025-08-19T21:15:48.6395134Z     return await old_call(app, scope, new_receive, new_send, **kwargs)
2025-08-19T21:15:48.6395266Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6395734Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/middleware/exceptions.py:49: in __call__
2025-08-19T21:15:48.6395856Z     await self.app(scope, receive, send)
2025-08-19T21:15:48.6396263Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py:716: in __call__
2025-08-19T21:15:48.6396423Z     await self.middleware_stack(scope, receive, send)
2025-08-19T21:15:48.6396808Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py:725: in app
2025-08-19T21:15:48.6396946Z     await self.lifespan(scope, receive, send)
2025-08-19T21:15:48.6397348Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py:694: in lifespan
2025-08-19T21:15:48.6397519Z     async with self.lifespan_context(app) as maybe_state:
2025-08-19T21:15:48.6397625Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6397951Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/contextlib.py:210: in __aenter__
2025-08-19T21:15:48.6398062Z     return await anext(self.gen)
2025-08-19T21:15:48.6398161Z            ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6398590Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py:134: in merged_lifespan
2025-08-19T21:15:48.6398781Z     async with original_context(app) as maybe_original_state:
2025-08-19T21:15:48.6398888Z                ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6399206Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/contextlib.py:210: in __aenter__
2025-08-19T21:15:48.6399317Z     return await anext(self.gen)
2025-08-19T21:15:48.6399412Z            ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6399837Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py:134: in merged_lifespan
2025-08-19T21:15:48.6400015Z     async with original_context(app) as maybe_original_state:
2025-08-19T21:15:48.6400118Z                ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6400438Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/contextlib.py:210: in __aenter__
2025-08-19T21:15:48.6400548Z     return await anext(self.gen)
2025-08-19T21:15:48.6400642Z            ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6401190Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py:134: in merged_lifespan
2025-08-19T21:15:48.6401369Z     async with original_context(app) as maybe_original_state:
2025-08-19T21:15:48.6401472Z                ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6401785Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/contextlib.py:210: in __aenter__
2025-08-19T21:15:48.6401895Z     return await anext(self.gen)
2025-08-19T21:15:48.6401989Z            ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6402509Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py:134: in merged_lifespan
2025-08-19T21:15:48.6402685Z     async with original_context(app) as maybe_original_state:
2025-08-19T21:15:48.6402786Z                ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6403098Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/contextlib.py:210: in __aenter__
2025-08-19T21:15:48.6403208Z     return await anext(self.gen)
2025-08-19T21:15:48.6403308Z            ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6403851Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py:134: in merged_lifespan
2025-08-19T21:15:48.6404025Z     async with original_context(app) as maybe_original_state:
2025-08-19T21:15:48.6404127Z                ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6404439Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/contextlib.py:210: in __aenter__
2025-08-19T21:15:48.6404552Z     return await anext(self.gen)
2025-08-19T21:15:48.6404651Z            ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6405072Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py:134: in merged_lifespan
2025-08-19T21:15:48.6405245Z     async with original_context(app) as maybe_original_state:
2025-08-19T21:15:48.6405341Z                ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6405660Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/contextlib.py:210: in __aenter__
2025-08-19T21:15:48.6405765Z     return await anext(self.gen)
2025-08-19T21:15:48.6405872Z            ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6406007Z services/api/main.py:76: in lifespan
2025-08-19T21:15:48.6406092Z     await _check_llm()
2025-08-19T21:15:48.6406290Z _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
2025-08-19T21:15:48.6406299Z 
2025-08-19T21:15:48.6406413Z     async def _check_llm() -> None:
2025-08-19T21:15:48.6406708Z >       from services.common.llm import LAN_BASE, LLM_PROVIDER, LLM_PROVIDER_FALLBACK
2025-08-19T21:15:48.6407228Z E       ImportError: cannot import name 'LLM_PROVIDER' from 'services.common.llm' (/home/runner/work/AWA-App/AWA-App/services/common/llm.py)
2025-08-19T21:15:48.6407237Z 
2025-08-19T21:15:48.6407374Z services/api/main.py:173: ImportError
2025-08-19T21:15:48.6407644Z _______________ test_unhandled_exception_is_captured_and_tagged ________________
2025-08-19T21:15:48.6407653Z 
2025-08-19T21:15:48.6407920Z monkeypatch = <_pytest.monkeypatch.MonkeyPatch object at 0x7f3f31803aa0>
2025-08-19T21:15:48.6407940Z 
2025-08-19T21:15:48.6408145Z     def test_unhandled_exception_is_captured_and_tagged(monkeypatch):
2025-08-19T21:15:48.6408260Z         # install dummy transport
2025-08-19T21:15:48.6408369Z         hub = sentry_sdk.Hub.current
2025-08-19T21:15:48.6408482Z         if hub.client is not None:
2025-08-19T21:15:48.6408675Z             hub.client.transport = DummyTransport(hub.client.options)
2025-08-19T21:15:48.6408749Z     
2025-08-19T21:15:48.6408852Z         # inject a failing route
2025-08-19T21:15:48.6408932Z         def boom():
2025-08-19T21:15:48.6409049Z             raise RuntimeError("boom")
2025-08-19T21:15:48.6409119Z     
2025-08-19T21:15:48.6409277Z         app.add_api_route("/__boom", boom, methods=["GET"])
2025-08-19T21:15:48.6409347Z     
2025-08-19T21:15:48.6409578Z >       with TestClient(app, raise_server_exceptions=False) as client:
2025-08-19T21:15:48.6409701Z              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6409714Z 
2025-08-19T21:15:48.6409996Z services/api/tests/test_sentry_event.py:57: 
2025-08-19T21:15:48.6410208Z _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
2025-08-19T21:15:48.6410639Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/testclient.py:694: in __enter__
2025-08-19T21:15:48.6410758Z     portal.call(self.wait_startup)
2025-08-19T21:15:48.6411145Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/from_thread.py:291: in call
2025-08-19T21:15:48.6411341Z     return cast(T_Retval, self.start_task_soon(func, *args).result())
2025-08-19T21:15:48.6411471Z                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6411842Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/concurrent/futures/_base.py:456: in result
2025-08-19T21:15:48.6411947Z     return self.__get_result()
2025-08-19T21:15:48.6412043Z            ^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6412528Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/concurrent/futures/_base.py:401: in __get_result
2025-08-19T21:15:48.6412743Z     raise self._exception
2025-08-19T21:15:48.6413156Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/from_thread.py:222: in _call_func
2025-08-19T21:15:48.6413279Z     retval = await retval_or_awaitable
2025-08-19T21:15:48.6413381Z              ^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6413822Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/testclient.py:729: in wait_startup
2025-08-19T21:15:48.6413903Z     await receive()
2025-08-19T21:15:48.6414318Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/testclient.py:720: in receive
2025-08-19T21:15:48.6414403Z     self.task.result()
2025-08-19T21:15:48.6414773Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/concurrent/futures/_base.py:449: in result
2025-08-19T21:15:48.6414879Z     return self.__get_result()
2025-08-19T21:15:48.6414972Z            ^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6415369Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/concurrent/futures/_base.py:401: in __get_result
2025-08-19T21:15:48.6415460Z     raise self._exception
2025-08-19T21:15:48.6415882Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/from_thread.py:222: in _call_func
2025-08-19T21:15:48.6415996Z     retval = await retval_or_awaitable
2025-08-19T21:15:48.6416100Z              ^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6416519Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/testclient.py:710: in lifespan
2025-08-19T21:15:48.6416758Z     await self.app(scope, self.stream_receive.receive, self.stream_send.send)
2025-08-19T21:15:48.6417180Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/applications.py:1054: in __call__
2025-08-19T21:15:48.6417322Z     await super().__call__(scope, receive, send)
2025-08-19T21:15:48.6417879Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/starlette.py:408: in _sentry_patched_asgi_app
2025-08-19T21:15:48.6418034Z     return await middleware(scope, receive, send)
2025-08-19T21:15:48.6418148Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6418618Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/asgi.py:179: in _run_asgi3
2025-08-19T21:15:48.6418815Z     return await self._run_app(scope, receive, send, asgi_version=3)
2025-08-19T21:15:48.6418949Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6419402Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/asgi.py:194: in _run_app
2025-08-19T21:15:48.6419489Z     raise exc from None
2025-08-19T21:15:48.6419938Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/asgi.py:190: in _run_app
2025-08-19T21:15:48.6420079Z     return await self.app(scope, receive, send)
2025-08-19T21:15:48.6420311Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6420743Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/applications.py:113: in __call__
2025-08-19T21:15:48.6420901Z     await self.middleware_stack(scope, receive, send)
2025-08-19T21:15:48.6421430Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/starlette.py:199: in _create_span_call
2025-08-19T21:15:48.6421651Z     return await old_call(app, scope, new_receive, new_send, **kwargs)
2025-08-19T21:15:48.6421781Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6422239Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/middleware/errors.py:151: in __call__
2025-08-19T21:15:48.6422361Z     await self.app(scope, receive, send)
2025-08-19T21:15:48.6423111Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/starlette.py:199: in _create_span_call
2025-08-19T21:15:48.6423327Z     return await old_call(app, scope, new_receive, new_send, **kwargs)
2025-08-19T21:15:48.6423589Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6424054Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/asgi_correlation_id/middleware.py:50: in __call__
2025-08-19T21:15:48.6424182Z     await self.app(scope, receive, send)
2025-08-19T21:15:48.6424776Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/starlette.py:297: in _sentry_exceptionmiddleware_call
2025-08-19T21:15:48.6424913Z     await old_call(self, scope, receive, send)
2025-08-19T21:15:48.6425434Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/starlette.py:199: in _create_span_call
2025-08-19T21:15:48.6425632Z     return await old_call(app, scope, new_receive, new_send, **kwargs)
2025-08-19T21:15:48.6425764Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6426245Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/middleware/exceptions.py:49: in __call__
2025-08-19T21:15:48.6426373Z     await self.app(scope, receive, send)
2025-08-19T21:15:48.6426781Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py:716: in __call__
2025-08-19T21:15:48.6426942Z     await self.middleware_stack(scope, receive, send)
2025-08-19T21:15:48.6427330Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py:725: in app
2025-08-19T21:15:48.6427467Z     await self.lifespan(scope, receive, send)
2025-08-19T21:15:48.6427870Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py:694: in lifespan
2025-08-19T21:15:48.6428041Z     async with self.lifespan_context(app) as maybe_state:
2025-08-19T21:15:48.6428148Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6428476Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/contextlib.py:210: in __aenter__
2025-08-19T21:15:48.6428593Z     return await anext(self.gen)
2025-08-19T21:15:48.6428699Z            ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6429125Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py:134: in merged_lifespan
2025-08-19T21:15:48.6429313Z     async with original_context(app) as maybe_original_state:
2025-08-19T21:15:48.6429420Z                ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6429741Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/contextlib.py:210: in __aenter__
2025-08-19T21:15:48.6429857Z     return await anext(self.gen)
2025-08-19T21:15:48.6429952Z            ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6430385Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py:134: in merged_lifespan
2025-08-19T21:15:48.6430565Z     async with original_context(app) as maybe_original_state:
2025-08-19T21:15:48.6430671Z                ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6430985Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/contextlib.py:210: in __aenter__
2025-08-19T21:15:48.6431219Z     return await anext(self.gen)
2025-08-19T21:15:48.6431314Z            ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6431742Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py:134: in merged_lifespan
2025-08-19T21:15:48.6431913Z     async with original_context(app) as maybe_original_state:
2025-08-19T21:15:48.6432017Z                ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6432331Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/contextlib.py:210: in __aenter__
2025-08-19T21:15:48.6432545Z     return await anext(self.gen)
2025-08-19T21:15:48.6432643Z            ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6433068Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py:134: in merged_lifespan
2025-08-19T21:15:48.6433240Z     async with original_context(app) as maybe_original_state:
2025-08-19T21:15:48.6433343Z                ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6433780Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/contextlib.py:210: in __aenter__
2025-08-19T21:15:48.6433891Z     return await anext(self.gen)
2025-08-19T21:15:48.6433985Z            ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6434409Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py:134: in merged_lifespan
2025-08-19T21:15:48.6434582Z     async with original_context(app) as maybe_original_state:
2025-08-19T21:15:48.6434685Z                ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6435002Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/contextlib.py:210: in __aenter__
2025-08-19T21:15:48.6435108Z     return await anext(self.gen)
2025-08-19T21:15:48.6435208Z            ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6435630Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py:134: in merged_lifespan
2025-08-19T21:15:48.6435807Z     async with original_context(app) as maybe_original_state:
2025-08-19T21:15:48.6435909Z                ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6436249Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/contextlib.py:210: in __aenter__
2025-08-19T21:15:48.6436357Z     return await anext(self.gen)
2025-08-19T21:15:48.6436456Z            ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6436595Z services/api/main.py:76: in lifespan
2025-08-19T21:15:48.6436681Z     await _check_llm()
2025-08-19T21:15:48.6436884Z _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
2025-08-19T21:15:48.6436892Z 
2025-08-19T21:15:48.6437008Z     async def _check_llm() -> None:
2025-08-19T21:15:48.6437305Z >       from services.common.llm import LAN_BASE, LLM_PROVIDER, LLM_PROVIDER_FALLBACK
2025-08-19T21:15:48.6437833Z E       ImportError: cannot import name 'LLM_PROVIDER' from 'services.common.llm' (/home/runner/work/AWA-App/AWA-App/services/common/llm.py)
2025-08-19T21:15:48.6437842Z 
2025-08-19T21:15:48.6437981Z services/api/main.py:173: ImportError
2025-08-19T21:15:48.6438227Z ______________________________ test_kpi_contract _______________________________
2025-08-19T21:15:48.6438240Z 
2025-08-19T21:15:48.6438328Z     def test_kpi_contract():
2025-08-19T21:15:48.6438493Z >       with client_with_auth() as (client, up):
2025-08-19T21:15:48.6438596Z              ^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6438605Z 
2025-08-19T21:15:48.6438777Z services/api/tests/test_stats_contracts.py:28: 
2025-08-19T21:15:48.6438976Z _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
2025-08-19T21:15:48.6439301Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/contextlib.py:137: in __enter__
2025-08-19T21:15:48.6439393Z     return next(self.gen)
2025-08-19T21:15:48.6439473Z            ^^^^^^^^^^^^^^
2025-08-19T21:15:48.6439730Z services/api/tests/test_stats_contracts.py:16: in client_with_auth
2025-08-19T21:15:48.6439844Z     with TestClient(app) as client:
2025-08-19T21:15:48.6439925Z          ^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6440356Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/testclient.py:694: in __enter__
2025-08-19T21:15:48.6440597Z     portal.call(self.wait_startup)
2025-08-19T21:15:48.6440991Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/from_thread.py:291: in call
2025-08-19T21:15:48.6441199Z     return cast(T_Retval, self.start_task_soon(func, *args).result())
2025-08-19T21:15:48.6441335Z                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6441711Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/concurrent/futures/_base.py:456: in result
2025-08-19T21:15:48.6441817Z     return self.__get_result()
2025-08-19T21:15:48.6441918Z            ^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6442312Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/concurrent/futures/_base.py:401: in __get_result
2025-08-19T21:15:48.6442401Z     raise self._exception
2025-08-19T21:15:48.6442913Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/from_thread.py:222: in _call_func
2025-08-19T21:15:48.6443156Z     retval = await retval_or_awaitable
2025-08-19T21:15:48.6443260Z              ^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6443706Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/testclient.py:729: in wait_startup
2025-08-19T21:15:48.6443785Z     await receive()
2025-08-19T21:15:48.6444204Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/testclient.py:720: in receive
2025-08-19T21:15:48.6444295Z     self.task.result()
2025-08-19T21:15:48.6444661Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/concurrent/futures/_base.py:449: in result
2025-08-19T21:15:48.6444767Z     return self.__get_result()
2025-08-19T21:15:48.6444861Z            ^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6445254Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/concurrent/futures/_base.py:401: in __get_result
2025-08-19T21:15:48.6445338Z     raise self._exception
2025-08-19T21:15:48.6445760Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/from_thread.py:222: in _call_func
2025-08-19T21:15:48.6445881Z     retval = await retval_or_awaitable
2025-08-19T21:15:48.6445986Z              ^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6446407Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/testclient.py:710: in lifespan
2025-08-19T21:15:48.6446647Z     await self.app(scope, self.stream_receive.receive, self.stream_send.send)
2025-08-19T21:15:48.6447074Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/applications.py:1054: in __call__
2025-08-19T21:15:48.6447219Z     await super().__call__(scope, receive, send)
2025-08-19T21:15:48.6447780Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/starlette.py:408: in _sentry_patched_asgi_app
2025-08-19T21:15:48.6447932Z     return await middleware(scope, receive, send)
2025-08-19T21:15:48.6448045Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6448521Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/asgi.py:179: in _run_asgi3
2025-08-19T21:15:48.6448722Z     return await self._run_app(scope, receive, send, asgi_version=3)
2025-08-19T21:15:48.6448857Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6449319Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/asgi.py:194: in _run_app
2025-08-19T21:15:48.6449404Z     raise exc from None
2025-08-19T21:15:48.6449865Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/asgi.py:190: in _run_app
2025-08-19T21:15:48.6450002Z     return await self.app(scope, receive, send)
2025-08-19T21:15:48.6450115Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6450547Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/applications.py:113: in __call__
2025-08-19T21:15:48.6450826Z     await self.middleware_stack(scope, receive, send)
2025-08-19T21:15:48.6451357Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/starlette.py:199: in _create_span_call
2025-08-19T21:15:48.6451562Z     return await old_call(app, scope, new_receive, new_send, **kwargs)
2025-08-19T21:15:48.6451694Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6452151Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/middleware/errors.py:151: in __call__
2025-08-19T21:15:48.6452271Z     await self.app(scope, receive, send)
2025-08-19T21:15:48.6452897Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/starlette.py:199: in _create_span_call
2025-08-19T21:15:48.6453096Z     return await old_call(app, scope, new_receive, new_send, **kwargs)
2025-08-19T21:15:48.6453228Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6453674Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/middleware/cors.py:77: in __call__
2025-08-19T21:15:48.6453957Z     await self.app(scope, receive, send)
2025-08-19T21:15:48.6454483Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/starlette.py:199: in _create_span_call
2025-08-19T21:15:48.6454678Z     return await old_call(app, scope, new_receive, new_send, **kwargs)
2025-08-19T21:15:48.6454811Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6455271Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/asgi_correlation_id/middleware.py:50: in __call__
2025-08-19T21:15:48.6455393Z     await self.app(scope, receive, send)
2025-08-19T21:15:48.6455995Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/starlette.py:297: in _sentry_exceptionmiddleware_call
2025-08-19T21:15:48.6456133Z     await old_call(self, scope, receive, send)
2025-08-19T21:15:48.6456652Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/starlette.py:199: in _create_span_call
2025-08-19T21:15:48.6456862Z     return await old_call(app, scope, new_receive, new_send, **kwargs)
2025-08-19T21:15:48.6456990Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6457466Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/middleware/exceptions.py:49: in __call__
2025-08-19T21:15:48.6457585Z     await self.app(scope, receive, send)
2025-08-19T21:15:48.6457998Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py:716: in __call__
2025-08-19T21:15:48.6458157Z     await self.middleware_stack(scope, receive, send)
2025-08-19T21:15:48.6458545Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py:725: in app
2025-08-19T21:15:48.6458682Z     await self.lifespan(scope, receive, send)
2025-08-19T21:15:48.6459092Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py:694: in lifespan
2025-08-19T21:15:48.6459269Z     async with self.lifespan_context(app) as maybe_state:
2025-08-19T21:15:48.6459375Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6459701Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/contextlib.py:210: in __aenter__
2025-08-19T21:15:48.6459813Z     return await anext(self.gen)
2025-08-19T21:15:48.6459919Z            ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6460347Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py:134: in merged_lifespan
2025-08-19T21:15:48.6460533Z     async with original_context(app) as maybe_original_state:
2025-08-19T21:15:48.6460636Z                ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6460960Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/contextlib.py:210: in __aenter__
2025-08-19T21:15:48.6461069Z     return await anext(self.gen)
2025-08-19T21:15:48.6461170Z            ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6461722Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py:134: in merged_lifespan
2025-08-19T21:15:48.6461901Z     async with original_context(app) as maybe_original_state:
2025-08-19T21:15:48.6462001Z                ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6462323Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/contextlib.py:210: in __aenter__
2025-08-19T21:15:48.6462586Z     return await anext(self.gen)
2025-08-19T21:15:48.6462738Z            ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6463184Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py:134: in merged_lifespan
2025-08-19T21:15:48.6463367Z     async with original_context(app) as maybe_original_state:
2025-08-19T21:15:48.6463470Z                ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6463788Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/contextlib.py:210: in __aenter__
2025-08-19T21:15:48.6463902Z     return await anext(self.gen)
2025-08-19T21:15:48.6464157Z            ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6464600Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py:134: in merged_lifespan
2025-08-19T21:15:48.6464777Z     async with original_context(app) as maybe_original_state:
2025-08-19T21:15:48.6464880Z                ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6465198Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/contextlib.py:210: in __aenter__
2025-08-19T21:15:48.6465310Z     return await anext(self.gen)
2025-08-19T21:15:48.6465405Z            ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6465833Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py:134: in merged_lifespan
2025-08-19T21:15:48.6466006Z     async with original_context(app) as maybe_original_state:
2025-08-19T21:15:48.6466108Z                ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6466424Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/contextlib.py:210: in __aenter__
2025-08-19T21:15:48.6466546Z     return await anext(self.gen)
2025-08-19T21:15:48.6466640Z            ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6467069Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py:134: in merged_lifespan
2025-08-19T21:15:48.6467241Z     async with original_context(app) as maybe_original_state:
2025-08-19T21:15:48.6467344Z                ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6467658Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/contextlib.py:210: in __aenter__
2025-08-19T21:15:48.6467774Z     return await anext(self.gen)
2025-08-19T21:15:48.6467871Z            ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6468012Z services/api/main.py:76: in lifespan
2025-08-19T21:15:48.6468095Z     await _check_llm()
2025-08-19T21:15:48.6468300Z _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
2025-08-19T21:15:48.6468309Z 
2025-08-19T21:15:48.6468420Z     async def _check_llm() -> None:
2025-08-19T21:15:48.6468723Z >       from services.common.llm import LAN_BASE, LLM_PROVIDER, LLM_PROVIDER_FALLBACK
2025-08-19T21:15:48.6469245Z E       ImportError: cannot import name 'LLM_PROVIDER' from 'services.common.llm' (/home/runner/work/AWA-App/AWA-App/services/common/llm.py)
2025-08-19T21:15:48.6469254Z 
2025-08-19T21:15:48.6469392Z services/api/main.py:173: ImportError
2025-08-19T21:15:48.6469631Z _________________________ test_roi_by_vendor_contract __________________________
2025-08-19T21:15:48.6469640Z 
2025-08-19T21:15:48.6469753Z     def test_roi_by_vendor_contract():
2025-08-19T21:15:48.6469915Z >       with client_with_auth() as (client, up):
2025-08-19T21:15:48.6470012Z              ^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6470019Z 
2025-08-19T21:15:48.6470194Z services/api/tests/test_stats_contracts.py:39: 
2025-08-19T21:15:48.6470390Z _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
2025-08-19T21:15:48.6470713Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/contextlib.py:137: in __enter__
2025-08-19T21:15:48.6470923Z     return next(self.gen)
2025-08-19T21:15:48.6471006Z            ^^^^^^^^^^^^^^
2025-08-19T21:15:48.6471261Z services/api/tests/test_stats_contracts.py:16: in client_with_auth
2025-08-19T21:15:48.6471382Z     with TestClient(app) as client:
2025-08-19T21:15:48.6471460Z          ^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6471901Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/testclient.py:694: in __enter__
2025-08-19T21:15:48.6472018Z     portal.call(self.wait_startup)
2025-08-19T21:15:48.6472518Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/from_thread.py:291: in call
2025-08-19T21:15:48.6472722Z     return cast(T_Retval, self.start_task_soon(func, *args).result())
2025-08-19T21:15:48.6472860Z                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6473235Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/concurrent/futures/_base.py:456: in result
2025-08-19T21:15:48.6473346Z     return self.__get_result()
2025-08-19T21:15:48.6473568Z            ^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6473963Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/concurrent/futures/_base.py:401: in __get_result
2025-08-19T21:15:48.6474051Z     raise self._exception
2025-08-19T21:15:48.6474465Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/from_thread.py:222: in _call_func
2025-08-19T21:15:48.6474588Z     retval = await retval_or_awaitable
2025-08-19T21:15:48.6474691Z              ^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6475138Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/testclient.py:729: in wait_startup
2025-08-19T21:15:48.6475219Z     await receive()
2025-08-19T21:15:48.6475638Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/testclient.py:720: in receive
2025-08-19T21:15:48.6475721Z     self.task.result()
2025-08-19T21:15:48.6476094Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/concurrent/futures/_base.py:449: in result
2025-08-19T21:15:48.6476207Z     return self.__get_result()
2025-08-19T21:15:48.6476308Z            ^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6476740Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/concurrent/futures/_base.py:401: in __get_result
2025-08-19T21:15:48.6476830Z     raise self._exception
2025-08-19T21:15:48.6477245Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/from_thread.py:222: in _call_func
2025-08-19T21:15:48.6477368Z     retval = await retval_or_awaitable
2025-08-19T21:15:48.6477469Z              ^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6477901Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/testclient.py:710: in lifespan
2025-08-19T21:15:48.6478135Z     await self.app(scope, self.stream_receive.receive, self.stream_send.send)
2025-08-19T21:15:48.6478565Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/applications.py:1054: in __call__
2025-08-19T21:15:48.6478712Z     await super().__call__(scope, receive, send)
2025-08-19T21:15:48.6479278Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/starlette.py:408: in _sentry_patched_asgi_app
2025-08-19T21:15:48.6479428Z     return await middleware(scope, receive, send)
2025-08-19T21:15:48.6479542Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6480020Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/asgi.py:179: in _run_asgi3
2025-08-19T21:15:48.6480218Z     return await self._run_app(scope, receive, send, asgi_version=3)
2025-08-19T21:15:48.6480350Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6480810Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/asgi.py:194: in _run_app
2025-08-19T21:15:48.6480899Z     raise exc from None
2025-08-19T21:15:48.6481356Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/asgi.py:190: in _run_app
2025-08-19T21:15:48.6481623Z     return await self.app(scope, receive, send)
2025-08-19T21:15:48.6481734Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6482171Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/applications.py:113: in __call__
2025-08-19T21:15:48.6482325Z     await self.middleware_stack(scope, receive, send)
2025-08-19T21:15:48.6482951Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/starlette.py:199: in _create_span_call
2025-08-19T21:15:48.6483162Z     return await old_call(app, scope, new_receive, new_send, **kwargs)
2025-08-19T21:15:48.6483293Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6483756Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/middleware/errors.py:151: in __call__
2025-08-19T21:15:48.6483876Z     await self.app(scope, receive, send)
2025-08-19T21:15:48.6484405Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/starlette.py:199: in _create_span_call
2025-08-19T21:15:48.6484714Z     return await old_call(app, scope, new_receive, new_send, **kwargs)
2025-08-19T21:15:48.6484849Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6485292Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/middleware/cors.py:77: in __call__
2025-08-19T21:15:48.6485416Z     await self.app(scope, receive, send)
2025-08-19T21:15:48.6485934Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/starlette.py:199: in _create_span_call
2025-08-19T21:15:48.6486134Z     return await old_call(app, scope, new_receive, new_send, **kwargs)
2025-08-19T21:15:48.6486262Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6486727Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/asgi_correlation_id/middleware.py:50: in __call__
2025-08-19T21:15:48.6486853Z     await self.app(scope, receive, send)
2025-08-19T21:15:48.6487460Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/starlette.py:297: in _sentry_exceptionmiddleware_call
2025-08-19T21:15:48.6487598Z     await old_call(self, scope, receive, send)
2025-08-19T21:15:48.6488111Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/starlette.py:199: in _create_span_call
2025-08-19T21:15:48.6488311Z     return await old_call(app, scope, new_receive, new_send, **kwargs)
2025-08-19T21:15:48.6488442Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6488915Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/middleware/exceptions.py:49: in __call__
2025-08-19T21:15:48.6489033Z     await self.app(scope, receive, send)
2025-08-19T21:15:48.6489445Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py:716: in __call__
2025-08-19T21:15:48.6489607Z     await self.middleware_stack(scope, receive, send)
2025-08-19T21:15:48.6490001Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py:725: in app
2025-08-19T21:15:48.6490135Z     await self.lifespan(scope, receive, send)
2025-08-19T21:15:48.6490546Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py:694: in lifespan
2025-08-19T21:15:48.6490714Z     async with self.lifespan_context(app) as maybe_state:
2025-08-19T21:15:48.6490831Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6491154Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/contextlib.py:210: in __aenter__
2025-08-19T21:15:48.6491268Z     return await anext(self.gen)
2025-08-19T21:15:48.6491363Z            ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6491795Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py:134: in merged_lifespan
2025-08-19T21:15:48.6492094Z     async with original_context(app) as maybe_original_state:
2025-08-19T21:15:48.6492204Z                ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6492624Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/contextlib.py:210: in __aenter__
2025-08-19T21:15:48.6492743Z     return await anext(self.gen)
2025-08-19T21:15:48.6492877Z            ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6493311Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py:134: in merged_lifespan
2025-08-19T21:15:48.6493490Z     async with original_context(app) as maybe_original_state:
2025-08-19T21:15:48.6493588Z                ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6493908Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/contextlib.py:210: in __aenter__
2025-08-19T21:15:48.6494012Z     return await anext(self.gen)
2025-08-19T21:15:48.6494112Z            ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6494534Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py:134: in merged_lifespan
2025-08-19T21:15:48.6494836Z     async with original_context(app) as maybe_original_state:
2025-08-19T21:15:48.6494934Z                ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6495250Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/contextlib.py:210: in __aenter__
2025-08-19T21:15:48.6495355Z     return await anext(self.gen)
2025-08-19T21:15:48.6495454Z            ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6495878Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py:134: in merged_lifespan
2025-08-19T21:15:48.6496054Z     async with original_context(app) as maybe_original_state:
2025-08-19T21:15:48.6496151Z                ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6496469Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/contextlib.py:210: in __aenter__
2025-08-19T21:15:48.6496575Z     return await anext(self.gen)
2025-08-19T21:15:48.6496675Z            ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6497099Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py:134: in merged_lifespan
2025-08-19T21:15:48.6497279Z     async with original_context(app) as maybe_original_state:
2025-08-19T21:15:48.6497378Z                ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6497696Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/contextlib.py:210: in __aenter__
2025-08-19T21:15:48.6497814Z     return await anext(self.gen)
2025-08-19T21:15:48.6497908Z            ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6498335Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py:134: in merged_lifespan
2025-08-19T21:15:48.6498504Z     async with original_context(app) as maybe_original_state:
2025-08-19T21:15:48.6498606Z                ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6498920Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/contextlib.py:210: in __aenter__
2025-08-19T21:15:48.6499031Z     return await anext(self.gen)
2025-08-19T21:15:48.6499126Z            ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6499270Z services/api/main.py:76: in lifespan
2025-08-19T21:15:48.6499353Z     await _check_llm()
2025-08-19T21:15:48.6499559Z _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
2025-08-19T21:15:48.6499567Z 
2025-08-19T21:15:48.6499675Z     async def _check_llm() -> None:
2025-08-19T21:15:48.6499975Z >       from services.common.llm import LAN_BASE, LLM_PROVIDER, LLM_PROVIDER_FALLBACK
2025-08-19T21:15:48.6500487Z E       ImportError: cannot import name 'LLM_PROVIDER' from 'services.common.llm' (/home/runner/work/AWA-App/AWA-App/services/common/llm.py)
2025-08-19T21:15:48.6500496Z 
2025-08-19T21:15:48.6500639Z services/api/main.py:173: ImportError
2025-08-19T21:15:48.6500874Z ___________________________ test_roi_trend_contract ____________________________
2025-08-19T21:15:48.6500882Z 
2025-08-19T21:15:48.6500998Z     def test_roi_trend_contract():
2025-08-19T21:15:48.6501157Z >       with client_with_auth() as (client, up):
2025-08-19T21:15:48.6501378Z              ^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6501391Z 
2025-08-19T21:15:48.6501569Z services/api/tests/test_stats_contracts.py:48: 
2025-08-19T21:15:48.6501764Z _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
2025-08-19T21:15:48.6502089Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/contextlib.py:137: in __enter__
2025-08-19T21:15:48.6502177Z     return next(self.gen)
2025-08-19T21:15:48.6502259Z            ^^^^^^^^^^^^^^
2025-08-19T21:15:48.6502703Z services/api/tests/test_stats_contracts.py:16: in client_with_auth
2025-08-19T21:15:48.6502837Z     with TestClient(app) as client:
2025-08-19T21:15:48.6502916Z          ^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6503359Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/testclient.py:694: in __enter__
2025-08-19T21:15:48.6503475Z     portal.call(self.wait_startup)
2025-08-19T21:15:48.6503875Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/from_thread.py:291: in call
2025-08-19T21:15:48.6504214Z     return cast(T_Retval, self.start_task_soon(func, *args).result())
2025-08-19T21:15:48.6504357Z                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6504736Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/concurrent/futures/_base.py:456: in result
2025-08-19T21:15:48.6504849Z     return self.__get_result()
2025-08-19T21:15:48.6504946Z            ^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6505344Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/concurrent/futures/_base.py:401: in __get_result
2025-08-19T21:15:48.6505430Z     raise self._exception
2025-08-19T21:15:48.6505852Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/from_thread.py:222: in _call_func
2025-08-19T21:15:48.6505969Z     retval = await retval_or_awaitable
2025-08-19T21:15:48.6506078Z              ^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6506520Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/testclient.py:729: in wait_startup
2025-08-19T21:15:48.6506617Z     await receive()
2025-08-19T21:15:48.6507059Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/testclient.py:720: in receive
2025-08-19T21:15:48.6507148Z     self.task.result()
2025-08-19T21:15:48.6507518Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/concurrent/futures/_base.py:449: in result
2025-08-19T21:15:48.6507625Z     return self.__get_result()
2025-08-19T21:15:48.6507725Z            ^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6508113Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/concurrent/futures/_base.py:401: in __get_result
2025-08-19T21:15:48.6508208Z     raise self._exception
2025-08-19T21:15:48.6508630Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/from_thread.py:222: in _call_func
2025-08-19T21:15:48.6508756Z     retval = await retval_or_awaitable
2025-08-19T21:15:48.6508857Z              ^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6509282Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/testclient.py:710: in lifespan
2025-08-19T21:15:48.6509526Z     await self.app(scope, self.stream_receive.receive, self.stream_send.send)
2025-08-19T21:15:48.6509961Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/applications.py:1054: in __call__
2025-08-19T21:15:48.6510100Z     await super().__call__(scope, receive, send)
2025-08-19T21:15:48.6510664Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/starlette.py:408: in _sentry_patched_asgi_app
2025-08-19T21:15:48.6510809Z     return await middleware(scope, receive, send)
2025-08-19T21:15:48.6510927Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6511390Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/asgi.py:179: in _run_asgi3
2025-08-19T21:15:48.6511600Z     return await self._run_app(scope, receive, send, asgi_version=3)
2025-08-19T21:15:48.6511849Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6512322Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/asgi.py:194: in _run_app
2025-08-19T21:15:48.6512514Z     raise exc from None
2025-08-19T21:15:48.6512970Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/asgi.py:190: in _run_app
2025-08-19T21:15:48.6513113Z     return await self.app(scope, receive, send)
2025-08-19T21:15:48.6513224Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6513660Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/applications.py:113: in __call__
2025-08-19T21:15:48.6513819Z     await self.middleware_stack(scope, receive, send)
2025-08-19T21:15:48.6514350Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/starlette.py:199: in _create_span_call
2025-08-19T21:15:48.6514554Z     return await old_call(app, scope, new_receive, new_send, **kwargs)
2025-08-19T21:15:48.6514812Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6515267Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/middleware/errors.py:151: in __call__
2025-08-19T21:15:48.6515394Z     await self.app(scope, receive, send)
2025-08-19T21:15:48.6515913Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/starlette.py:199: in _create_span_call
2025-08-19T21:15:48.6516114Z     return await old_call(app, scope, new_receive, new_send, **kwargs)
2025-08-19T21:15:48.6516242Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6516689Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/middleware/cors.py:77: in __call__
2025-08-19T21:15:48.6516814Z     await self.app(scope, receive, send)
2025-08-19T21:15:48.6517329Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/starlette.py:199: in _create_span_call
2025-08-19T21:15:48.6517537Z     return await old_call(app, scope, new_receive, new_send, **kwargs)
2025-08-19T21:15:48.6517665Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6518128Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/asgi_correlation_id/middleware.py:50: in __call__
2025-08-19T21:15:48.6518247Z     await self.app(scope, receive, send)
2025-08-19T21:15:48.6518846Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/starlette.py:297: in _sentry_exceptionmiddleware_call
2025-08-19T21:15:48.6518981Z     await old_call(self, scope, receive, send)
2025-08-19T21:15:48.6519502Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sentry_sdk/integrations/starlette.py:199: in _create_span_call
2025-08-19T21:15:48.6519697Z     return await old_call(app, scope, new_receive, new_send, **kwargs)
2025-08-19T21:15:48.6519834Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6520307Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/middleware/exceptions.py:49: in __call__
2025-08-19T21:15:48.6520432Z     await self.app(scope, receive, send)
2025-08-19T21:15:48.6520840Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py:716: in __call__
2025-08-19T21:15:48.6521004Z     await self.middleware_stack(scope, receive, send)
2025-08-19T21:15:48.6521395Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py:725: in app
2025-08-19T21:15:48.6521527Z     await self.lifespan(scope, receive, send)
2025-08-19T21:15:48.6521935Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py:694: in lifespan
2025-08-19T21:15:48.6522104Z     async with self.lifespan_context(app) as maybe_state:
2025-08-19T21:15:48.6522213Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6522752Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/contextlib.py:210: in __aenter__
2025-08-19T21:15:48.6522875Z     return await anext(self.gen)
2025-08-19T21:15:48.6522973Z            ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6523407Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py:134: in merged_lifespan
2025-08-19T21:15:48.6523589Z     async with original_context(app) as maybe_original_state:
2025-08-19T21:15:48.6523696Z                ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6524016Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/contextlib.py:210: in __aenter__
2025-08-19T21:15:48.6524129Z     return await anext(self.gen)
2025-08-19T21:15:48.6524225Z            ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6524660Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py:134: in merged_lifespan
2025-08-19T21:15:48.6524831Z     async with original_context(app) as maybe_original_state:
2025-08-19T21:15:48.6524941Z                ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6525370Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/contextlib.py:210: in __aenter__
2025-08-19T21:15:48.6525484Z     return await anext(self.gen)
2025-08-19T21:15:48.6525579Z            ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6526009Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py:134: in merged_lifespan
2025-08-19T21:15:48.6526180Z     async with original_context(app) as maybe_original_state:
2025-08-19T21:15:48.6526284Z                ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6526598Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/contextlib.py:210: in __aenter__
2025-08-19T21:15:48.6526712Z     return await anext(self.gen)
2025-08-19T21:15:48.6526811Z            ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6527234Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py:134: in merged_lifespan
2025-08-19T21:15:48.6527408Z     async with original_context(app) as maybe_original_state:
2025-08-19T21:15:48.6527517Z                ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6527836Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/contextlib.py:210: in __aenter__
2025-08-19T21:15:48.6527943Z     return await anext(self.gen)
2025-08-19T21:15:48.6528045Z            ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6528467Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py:134: in merged_lifespan
2025-08-19T21:15:48.6528644Z     async with original_context(app) as maybe_original_state:
2025-08-19T21:15:48.6528748Z                ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6529066Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/contextlib.py:210: in __aenter__
2025-08-19T21:15:48.6529171Z     return await anext(self.gen)
2025-08-19T21:15:48.6529269Z            ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6529694Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py:134: in merged_lifespan
2025-08-19T21:15:48.6529873Z     async with original_context(app) as maybe_original_state:
2025-08-19T21:15:48.6529979Z                ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6530296Z /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/contextlib.py:210: in __aenter__
2025-08-19T21:15:48.6530401Z     return await anext(self.gen)
2025-08-19T21:15:48.6530501Z            ^^^^^^^^^^^^^^^^^^^^^
2025-08-19T21:15:48.6530636Z services/api/main.py:76: in lifespan
2025-08-19T21:15:48.6530723Z     await _check_llm()
2025-08-19T21:15:48.6530928Z _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
2025-08-19T21:15:48.6530942Z 
2025-08-19T21:15:48.6531054Z     async def _check_llm() -> None:
2025-08-19T21:15:48.6531348Z >       from services.common.llm import LAN_BASE, LLM_PROVIDER, LLM_PROVIDER_FALLBACK
2025-08-19T21:15:48.6531871Z E       ImportError: cannot import name 'LLM_PROVIDER' from 'services.common.llm' (/home/runner/work/AWA-App/AWA-App/services/common/llm.py)
2025-08-19T21:15:48.6531997Z 
2025-08-19T21:15:48.6532142Z services/api/main.py:173: ImportError
2025-08-19T21:15:48.6532349Z =============================== warnings summary ===============================
2025-08-19T21:15:48.6532596Z services/alert_bot/tests/test_smoke.py:5
2025-08-19T21:15:48.6533709Z   /home/runner/work/AWA-App/AWA-App/services/alert_bot/tests/test_smoke.py:5: UserWarning: pkg_resources is deprecated as an API. See https://setuptools.pypa.io/en/latest/pkg_resources.html. The pkg_resources package is slated for removal as early as 2025-11-30. Refrain from using this package or pin to Setuptools<81.
2025-08-19T21:15:48.6533837Z     import pkg_resources  # noqa: F401
2025-08-19T21:15:48.6533845Z 
2025-08-19T21:15:48.6534001Z tests/ingest/test_tasks_eager.py: 3 warnings
2025-08-19T21:15:48.6534133Z tests/test_health.py: 5 warnings
2025-08-19T21:15:48.6534255Z tests/test_smoke.py: 5 warnings
2025-08-19T21:15:48.6535590Z   /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/asgi_correlation_id/extensions/sentry.py:27: DeprecationWarning: sentry_sdk.configure_scope is deprecated and will be removed in the next major version. Please consult our migration guide to learn how to migrate to the new API: https://docs.sentry.io/platforms/python/migration/1.x-to-2.x#scope-configuring
2025-08-19T21:15:48.6535877Z     with configure_scope() as scope:
2025-08-19T21:15:48.6535886Z 
2025-08-19T21:15:48.6536052Z tests/test_health.py::test_health[0]
2025-08-19T21:15:48.6536189Z tests/test_health.py::test_health[1]
2025-08-19T21:15:48.6536319Z tests/test_health.py::test_health[2]
2025-08-19T21:15:48.6536453Z tests/test_health.py::test_health[3]
2025-08-19T21:15:48.6536581Z tests/test_health.py::test_health[4]
2025-08-19T21:15:48.6537506Z   /home/runner/work/AWA-App/AWA-App/tests/test_health.py:22: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
2025-08-19T21:15:48.6537633Z     return datetime.datetime.utcnow()
2025-08-19T21:15:48.6537650Z 
2025-08-19T21:15:48.6537773Z tests/test_health.py: 5 warnings
2025-08-19T21:15:48.6537900Z tests/test_smoke.py: 5 warnings
2025-08-19T21:15:48.6538863Z   /home/runner/work/AWA-App/AWA-App/services/api/routes/health.py:24: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
2025-08-19T21:15:48.6539045Z     app_now = datetime.utcnow().replace(tzinfo=timezone.utc)
2025-08-19T21:15:48.6539053Z 
2025-08-19T21:15:48.6539173Z tests/test_health.py: 5 warnings
2025-08-19T21:15:48.6539304Z tests/test_smoke.py: 5 warnings
2025-08-19T21:15:48.6540016Z   /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi_limiter/__init__.py:89: DeprecationWarning: Call to deprecated close. (Use aclose() instead) -- Deprecated since version 5.0.1.
2025-08-19T21:15:48.6540118Z     await cls.redis.close()
2025-08-19T21:15:48.6540130Z 
2025-08-19T21:15:48.6540267Z tests/test_smoke.py::test_health[0]
2025-08-19T21:15:48.6540404Z tests/test_smoke.py::test_health[1]
2025-08-19T21:15:48.6540535Z tests/test_smoke.py::test_health[2]
2025-08-19T21:15:48.6540667Z tests/test_smoke.py::test_health[3]
2025-08-19T21:15:48.6540795Z tests/test_smoke.py::test_health[4]
2025-08-19T21:15:48.6541710Z   /home/runner/work/AWA-App/AWA-App/tests/test_smoke.py:32: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
2025-08-19T21:15:48.6541837Z     return datetime.datetime.utcnow()
2025-08-19T21:15:48.6541846Z 
2025-08-19T21:15:48.6542178Z services/api/tests/test_sentry_event.py::test_unhandled_exception_is_captured_and_tagged
2025-08-19T21:15:48.6543584Z   /home/runner/work/AWA-App/AWA-App/services/api/tests/test_sentry_event.py:47: SentryHubDeprecationWarning: `sentry_sdk.Hub` is deprecated and will be removed in a future major release. Please consult our 1.x to 2.x migration guide for details on how to migrate `Hub` usage to the new API: https://docs.sentry.io/platforms/python/migration/1.x-to-2.x
2025-08-19T21:15:48.6543844Z     hub = sentry_sdk.Hub.current
2025-08-19T21:15:48.6543853Z 
2025-08-19T21:15:48.6544124Z -- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
2025-08-19T21:15:48.6544335Z ================================ tests coverage ================================
2025-08-19T21:15:48.6544595Z _______________ coverage: platform linux, python 3.12.11-final-0 _______________
2025-08-19T21:15:48.6544603Z 
2025-08-19T21:15:48.6544756Z Coverage XML written to file coverage.xml
2025-08-19T21:15:48.6545010Z FAIL Required test coverage of 65% not reached. Total coverage: 64.59%
2025-08-19T21:15:48.6545220Z =========================== short test summary info ============================
2025-08-19T21:15:48.6546014Z FAILED tests/api/test_ingest_endpoints.py::test_ingest_file_upload - ImportError: cannot import name 'LLM_PROVIDER' from 'services.common.llm' (/home/runner/work/AWA-App/AWA-App/services/common/llm.py)
2025-08-19T21:15:48.6546893Z FAILED tests/api/test_ingest_endpoints.py::test_ingest_json_uri - ImportError: cannot import name 'LLM_PROVIDER' from 'services.common.llm' (/home/runner/work/AWA-App/AWA-App/services/common/llm.py)
2025-08-19T21:15:48.6547649Z FAILED tests/api/test_ingest_endpoints.py::test_ingest_failure - ImportError: cannot import name 'LLM_PROVIDER' from 'services.common.llm' (/home/runner/work/AWA-App/AWA-App/services/common/llm.py)
2025-08-19T21:15:48.6548356Z FAILED tests/test_api_fast.py::test_health_endpoint - ImportError: cannot import name 'LLM_PROVIDER' from 'services.common.llm' (/home/runner/work/AWA-App/AWA-App/services/common/llm.py)
2025-08-19T21:15:48.6548649Z FAILED tests/test_llm.py::test_generate[lan] - AssertionError: assert '' == 'hi'
2025-08-19T21:15:48.6548726Z   
2025-08-19T21:15:48.6548798Z   - hi
2025-08-19T21:15:48.6549593Z FAILED services/api/tests/test_cors.py::test_cors_preflight_allowed - ImportError: cannot import name 'LLM_PROVIDER' from 'services.common.llm' (/home/runner/work/AWA-App/AWA-App/services/common/llm.py)
2025-08-19T21:15:48.6550377Z FAILED services/api/tests/test_cors.py::test_cors_simple_get_allowed - ImportError: cannot import name 'LLM_PROVIDER' from 'services.common.llm' (/home/runner/work/AWA-App/AWA-App/services/common/llm.py)
2025-08-19T21:15:48.6551150Z FAILED services/api/tests/test_cors.py::test_cors_disallowed_origin - ImportError: cannot import name 'LLM_PROVIDER' from 'services.common.llm' (/home/runner/work/AWA-App/AWA-App/services/common/llm.py)
2025-08-19T21:15:48.6551952Z FAILED services/api/tests/test_errors_json.py::test_validation_error_json - ImportError: cannot import name 'LLM_PROVIDER' from 'services.common.llm' (/home/runner/work/AWA-App/AWA-App/services/common/llm.py)
2025-08-19T21:15:48.6552809Z FAILED services/api/tests/test_errors_json.py::test_db_error_json - ImportError: cannot import name 'LLM_PROVIDER' from 'services.common.llm' (/home/runner/work/AWA-App/AWA-App/services/common/llm.py)
2025-08-19T21:15:48.6553568Z FAILED services/api/tests/test_health.py::test_health_route - ImportError: cannot import name 'LLM_PROVIDER' from 'services.common.llm' (/home/runner/work/AWA-App/AWA-App/services/common/llm.py)
2025-08-19T21:15:48.6554400Z FAILED services/api/tests/test_rate_limit.py::test_rate_limit_exceeded_returns_429 - ImportError: cannot import name 'LLM_PROVIDER' from 'services.common.llm' (/home/runner/work/AWA-App/AWA-App/services/common/llm.py)
2025-08-19T21:15:48.6555286Z FAILED services/api/tests/test_rate_limit.py::test_different_client_ip_has_independent_bucket - ImportError: cannot import name 'LLM_PROVIDER' from 'services.common.llm' (/home/runner/work/AWA-App/AWA-App/services/common/llm.py)
2025-08-19T21:15:48.6556087Z FAILED services/api/tests/test_roi_basic_auth.py::test_roi_needs_basic_auth - ImportError: cannot import name 'LLM_PROVIDER' from 'services.common.llm' (/home/runner/work/AWA-App/AWA-App/services/common/llm.py)
2025-08-19T21:15:48.6556999Z FAILED services/api/tests/test_roi_basic_auth.py::test_roi_basic_auth_good - ImportError: cannot import name 'LLM_PROVIDER' from 'services.common.llm' (/home/runner/work/AWA-App/AWA-App/services/common/llm.py)
2025-08-19T21:15:48.6557957Z FAILED services/api/tests/test_roi_basic_auth.py::test_score_needs_basic_auth - ImportError: cannot import name 'LLM_PROVIDER' from 'services.common.llm' (/home/runner/work/AWA-App/AWA-App/services/common/llm.py)
2025-08-19T21:15:48.6558814Z FAILED services/api/tests/test_roi_basic_auth.py::test_stats_contract_needs_basic_auth - ImportError: cannot import name 'LLM_PROVIDER' from 'services.common.llm' (/home/runner/work/AWA-App/AWA-App/services/common/llm.py)
2025-08-19T21:15:48.6559713Z FAILED services/api/tests/test_sentry_event.py::test_unhandled_exception_is_captured_and_tagged - ImportError: cannot import name 'LLM_PROVIDER' from 'services.common.llm' (/home/runner/work/AWA-App/AWA-App/services/common/llm.py)
2025-08-19T21:15:48.9976712Z FAILED services/api/tests/test_stats_contracts.py::test_kpi_contract - ImportError: cannot import name 'LLM_PROVIDER' from 'services.common.llm' (/home/runner/work/AWA-App/AWA-App/services/common/llm.py)
2025-08-19T21:15:48.9977910Z FAILED services/api/tests/test_stats_contracts.py::test_roi_by_vendor_contract - ImportError: cannot import name 'LLM_PROVIDER' from 'services.common.llm' (/home/runner/work/AWA-App/AWA-App/services/common/llm.py)
2025-08-19T21:15:48.9979604Z FAILED services/api/tests/test_stats_contracts.py::test_roi_trend_contract - ImportError: cannot import name 'LLM_PROVIDER' from 'services.common.llm' (/home/runner/work/AWA-App/AWA-App/services/common/llm.py)
2025-08-19T21:15:48.9980019Z Sentry is attempting to send 0 pending events
2025-08-19T21:15:48.9980174Z Waiting up to True seconds
2025-08-19T21:15:48.9980301Z Press Ctrl-C to quit
2025-08-19T21:15:49.3806758Z ##[error]Process completed with exit code 1.
