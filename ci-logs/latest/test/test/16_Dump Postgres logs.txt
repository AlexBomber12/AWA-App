2025-08-19T20:12:13.5581320Z ##[group]Run echo "::group::postgres container logs"
2025-08-19T20:12:13.5581730Z [36;1mecho "::group::postgres container logs"[0m
2025-08-19T20:12:13.5582217Z [36;1mdocker logs 0acef1c420046a39e0c255f9430fc935c205bec059b719a827c9a002ed71b339 --tail 200[0m
2025-08-19T20:12:13.5582682Z [36;1mecho "::endgroup::"[0m
2025-08-19T20:12:13.5623181Z shell: /usr/bin/bash -e {0}
2025-08-19T20:12:13.5623440Z env:
2025-08-19T20:12:13.5623667Z   REDIS_URL: redis://localhost:6379/0
2025-08-19T20:12:13.5623961Z   RATE_LIMIT_DEFAULT: 100/minute
2025-08-19T20:12:13.5624218Z   TRUST_X_FORWARDED: 1
2025-08-19T20:12:13.5624456Z   PG_USER: postgres
2025-08-19T20:12:13.5624683Z   PG_PASSWORD: pass
2025-08-19T20:12:13.5624908Z   PG_DATABASE: awa
2025-08-19T20:12:13.5625127Z   PG_HOST: localhost
2025-08-19T20:12:13.5625363Z   PG_PORT: 5432
2025-08-19T20:12:13.5625853Z   PG_SYNC_DSN: ***localhost:5432/awa
2025-08-19T20:12:13.5626325Z   PG_ASYNC_DSN: ***localhost:5432/awa
2025-08-19T20:12:13.5626796Z   DATABASE_URL: ***localhost:5432/awa
2025-08-19T20:12:13.5627112Z   DATA_DIR: /tmp/awa-data
2025-08-19T20:12:13.5627355Z   ENABLE_LIVE: 0
2025-08-19T20:12:13.5627567Z   TESTING: 1
2025-08-19T20:12:13.5627852Z   pythonLocation: /opt/hostedtoolcache/Python/3.12.11/x64
2025-08-19T20:12:13.5628614Z   PKG_CONFIG_PATH: /opt/hostedtoolcache/Python/3.12.11/x64/lib/pkgconfig
2025-08-19T20:12:13.5629086Z   Python_ROOT_DIR: /opt/hostedtoolcache/Python/3.12.11/x64
2025-08-19T20:12:13.5629509Z   Python2_ROOT_DIR: /opt/hostedtoolcache/Python/3.12.11/x64
2025-08-19T20:12:13.5629933Z   Python3_ROOT_DIR: /opt/hostedtoolcache/Python/3.12.11/x64
2025-08-19T20:12:13.5630355Z   LD_LIBRARY_PATH: /opt/hostedtoolcache/Python/3.12.11/x64/lib
2025-08-19T20:12:13.5630709Z ##[endgroup]
2025-08-19T20:12:13.5693084Z ##[group]postgres container logs
2025-08-19T20:12:13.5819605Z The files belonging to this database system will be owned by user "postgres".
2025-08-19T20:12:13.5821972Z initdb: warning: enabling "trust" authentication for local connections
2025-08-19T20:12:13.5824275Z initdb: hint: You can change this by editing pg_hba.conf or using the option -A, or --auth-local and --auth-host, the next time you run initdb.
2025-08-19T20:12:13.5826060Z This user must also own the server process.
2025-08-19T20:12:13.5826389Z 
2025-08-19T20:12:13.5826879Z The database cluster will be initialized with locale "en_US.utf8".
2025-08-19T20:12:13.5827813Z The default database encoding has accordingly been set to "UTF8".
2025-08-19T20:12:13.5828908Z The default text search configuration will be set to "english".
2025-08-19T20:12:13.5829383Z 
2025-08-19T20:12:13.5829647Z Data page checksums are disabled.
2025-08-19T20:12:13.5829955Z 
2025-08-19T20:12:13.5830483Z fixing permissions on existing directory /var/lib/postgresql/data ... ok
2025-08-19T20:12:13.5831288Z creating subdirectories ... ok
2025-08-19T20:12:13.5831978Z selecting dynamic shared memory implementation ... posix
2025-08-19T20:12:13.5832700Z selecting default max_connections ... 100
2025-08-19T20:12:13.5833274Z selecting default shared_buffers ... 128MB
2025-08-19T20:12:13.5833818Z selecting default time zone ... Etc/UTC
2025-08-19T20:12:13.5834338Z creating configuration files ... ok
2025-08-19T20:12:13.5834891Z running bootstrap script ... ok
2025-08-19T20:12:13.5835512Z performing post-bootstrap initialization ... ok
2025-08-19T20:12:13.5836041Z syncing data to disk ... ok
2025-08-19T20:12:13.5836277Z 
2025-08-19T20:12:13.5836287Z 
2025-08-19T20:12:13.5836614Z Success. You can now start the database server using:
2025-08-19T20:12:13.5836969Z 
2025-08-19T20:12:13.5837255Z     pg_ctl -D /var/lib/postgresql/data -l logfile start
2025-08-19T20:12:13.5837607Z 
2025-08-19T20:12:13.5838977Z waiting for server to start....2025-08-19 20:09:09.540 UTC [48] LOG:  starting PostgreSQL 15.14 (Debian 15.14-1.pgdg13+1) on x86_64-pc-linux-gnu, compiled by gcc (Debian 14.2.0-19) 14.2.0, 64-bit
2025-08-19T20:12:13.5840936Z 2025-08-19 20:09:09.541 UTC [48] LOG:  listening on Unix socket "/var/run/postgresql/.s.PGSQL.5432"
2025-08-19T20:12:13.5842256Z 2025-08-19 20:09:09.544 UTC [51] LOG:  database system was shut down at 2025-08-19 20:09:09 UTC
2025-08-19T20:12:13.5843463Z 2025-08-19 20:09:09.547 UTC [48] LOG:  database system is ready to accept connections
2025-08-19T20:12:13.5844043Z  done
2025-08-19T20:12:13.5844320Z server started
2025-08-19T20:12:13.5844640Z CREATE DATABASE
2025-08-19T20:12:13.5844827Z 
2025-08-19T20:12:13.5844838Z 
2025-08-19T20:12:13.5845340Z /usr/local/bin/docker-entrypoint.sh: ignoring /docker-entrypoint-initdb.d/*
2025-08-19T20:12:13.5845862Z 
2025-08-19T20:12:13.5846456Z 2025-08-19 20:09:09.731 UTC [48] LOG:  received fast shutdown request
2025-08-19T20:12:13.5847422Z waiting for server to shut down....2025-08-19 20:09:09.731 UTC [48] LOG:  aborting any active transactions
2025-08-19T20:12:13.5848458Z 2025-08-19 20:09:09.733 UTC [48] LOG:  background worker "logical replication launcher" (PID 54) exited with exit code 1
2025-08-19T20:12:13.5849005Z 2025-08-19 20:09:09.734 UTC [49] LOG:  shutting down
2025-08-19T20:12:13.5849464Z 2025-08-19 20:09:09.739 UTC [49] LOG:  checkpoint starting: shutdown immediate
2025-08-19T20:12:13.5850567Z 2025-08-19 20:09:09.758 UTC [49] LOG:  checkpoint complete: wrote 922 buffers (5.6%); 0 WAL file(s) added, 0 removed, 0 recycled; write=0.014 s, sync=0.005 s, total=0.025 s; sync files=301, longest=0.002 s, average=0.001 s; distance=4239 kB, estimate=4239 kB
2025-08-19T20:12:13.5851466Z 2025-08-19 20:09:09.765 UTC [48] LOG:  database system is shut down
2025-08-19T20:12:13.5851773Z  done
2025-08-19T20:12:13.5851951Z server stopped
2025-08-19T20:12:13.5852066Z 
2025-08-19T20:12:13.5852268Z PostgreSQL init process complete; ready for start up.
2025-08-19T20:12:13.5852484Z 
2025-08-19T20:12:13.5853080Z 2025-08-19 20:09:09.851 UTC [1] LOG:  starting PostgreSQL 15.14 (Debian 15.14-1.pgdg13+1) on x86_64-pc-linux-gnu, compiled by gcc (Debian 14.2.0-19) 14.2.0, 64-bit
2025-08-19T20:12:13.5853810Z 2025-08-19 20:09:09.851 UTC [1] LOG:  listening on IPv4 address "0.0.0.0", port 5432
2025-08-19T20:12:13.5854355Z 2025-08-19 20:09:09.851 UTC [1] LOG:  listening on IPv6 address "::", port 5432
2025-08-19T20:12:13.5854912Z 2025-08-19 20:09:09.853 UTC [1] LOG:  listening on Unix socket "/var/run/postgresql/.s.PGSQL.5432"
2025-08-19T20:12:13.5855513Z 2025-08-19 20:09:09.856 UTC [64] LOG:  database system was shut down at 2025-08-19 20:09:09 UTC
2025-08-19T20:12:13.5856056Z 2025-08-19 20:09:09.860 UTC [1] LOG:  database system is ready to accept connections
2025-08-19T20:12:13.5856626Z 2025-08-19 20:11:38.655 UTC [317] ERROR:  operator does not exist: date = text at character 538
2025-08-19T20:12:13.5857395Z 2025-08-19 20:11:38.655 UTC [317] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2025-08-19T20:12:13.5858129Z 2025-08-19 20:11:38.655 UTC [317] STATEMENT:  
2025-08-19T20:12:13.5858790Z 	    WITH v(asin, marketplace, fee_type, amount, currency, source, effective_date) AS (VALUES ($1, $2, $3, $4, $5, $6, $7), ($8, $9, $10, $11, $12, $13, $14))
2025-08-19T20:12:13.5859351Z 	    UPDATE test_fees_raw AS t
2025-08-19T20:12:13.5859814Z 	    SET amount = v.amount, currency = v.currency, source = v.source, effective_date = v.effective_date
2025-08-19T20:12:13.5860225Z 	    FROM v
2025-08-19T20:12:13.5860591Z 	    WHERE t.asin = v.asin AND t.marketplace = v.marketplace AND t.fee_type = v.fee_type
2025-08-19T20:12:13.5861435Z 	      AND (t.amount IS DISTINCT FROM v.amount OR t.currency IS DISTINCT FROM v.currency OR t.source IS DISTINCT FROM v.source OR t.effective_date IS DISTINCT FROM v.effective_date);
2025-08-19T20:12:13.5862041Z 	    
2025-08-19T20:12:13.5862458Z ##[endgroup]
