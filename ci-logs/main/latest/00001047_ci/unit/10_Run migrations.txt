2025-09-04T18:42:44.0786574Z ##[group]Run alembic -c services/api/alembic.ini upgrade head
2025-09-04T18:42:44.0786989Z [36;1malembic -c services/api/alembic.ini upgrade head[0m
2025-09-04T18:42:44.0817119Z shell: /usr/bin/bash -e {0}
2025-09-04T18:42:44.0817338Z env:
2025-09-04T18:42:44.0817534Z   REDIS_URL: redis://localhost:6379/0
2025-09-04T18:42:44.0817787Z   RATE_LIMIT_DEFAULT: 100/minute
2025-09-04T18:42:44.0817998Z   TRUST_X_FORWARDED: 1
2025-09-04T18:42:44.0818191Z   PG_USER: postgres
2025-09-04T18:42:44.0818382Z   PG_PASSWORD: pass
2025-09-04T18:42:44.0818560Z   PG_DATABASE: awa
2025-09-04T18:42:44.0818906Z   PG_HOST: localhost
2025-09-04T18:42:44.0819087Z   PG_PORT: 5432
2025-09-04T18:42:44.0819490Z   PG_SYNC_DSN: ***postgres:5432/awa
2025-09-04T18:42:44.0820096Z   PG_ASYNC_DSN: ***postgres:5432/awa
2025-09-04T18:42:44.0820464Z   DATABASE_URL: ***localhost:5432/awa
2025-09-04T18:42:44.0820691Z   DATA_DIR: /tmp/awa-data
2025-09-04T18:42:44.0820890Z   ENABLE_LIVE: 0
2025-09-04T18:42:44.0821059Z   TESTING: 1
2025-09-04T18:42:44.0821310Z   pythonLocation: /opt/hostedtoolcache/Python/3.12.11/x64
2025-09-04T18:42:44.0821696Z   PKG_CONFIG_PATH: /opt/hostedtoolcache/Python/3.12.11/x64/lib/pkgconfig
2025-09-04T18:42:44.0822068Z   Python_ROOT_DIR: /opt/hostedtoolcache/Python/3.12.11/x64
2025-09-04T18:42:44.0822399Z   Python2_ROOT_DIR: /opt/hostedtoolcache/Python/3.12.11/x64
2025-09-04T18:42:44.0822741Z   Python3_ROOT_DIR: /opt/hostedtoolcache/Python/3.12.11/x64
2025-09-04T18:42:44.0823080Z   LD_LIBRARY_PATH: /opt/hostedtoolcache/Python/3.12.11/x64/lib
2025-09-04T18:42:44.0823358Z ##[endgroup]
2025-09-04T18:42:44.8731386Z Traceback (most recent call last):
2025-09-04T18:42:44.8739458Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
2025-09-04T18:42:44.8740787Z     self._dbapi_connection = engine.raw_connection()
2025-09-04T18:42:44.8741300Z                              ^^^^^^^^^^^^^^^^^^^^^^^
2025-09-04T18:42:44.8742417Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3301, in raw_connection
2025-09-04T18:42:44.8743482Z     return self.pool.connect()
2025-09-04T18:42:44.8743867Z            ^^^^^^^^^^^^^^^^^^^
2025-09-04T18:42:44.8744782Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 447, in connect
2025-09-04T18:42:44.8745743Z     return _ConnectionFairy._checkout(self)
2025-09-04T18:42:44.8746194Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-09-04T18:42:44.8747089Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
2025-09-04T18:42:44.8748013Z     fairy = _ConnectionRecord.checkout(pool)
2025-09-04T18:42:44.8748434Z             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-09-04T18:42:44.8749309Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
2025-09-04T18:42:44.8750285Z     rec = pool._do_get()
2025-09-04T18:42:44.8750616Z           ^^^^^^^^^^^^^^
2025-09-04T18:42:44.8751436Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/pool/impl.py", line 306, in _do_get
2025-09-04T18:42:44.8752294Z     return self._create_connection()
2025-09-04T18:42:44.8752666Z            ^^^^^^^^^^^^^^^^^^^^^^^^^
2025-09-04T18:42:44.8753596Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 388, in _create_connection
2025-09-04T18:42:44.8754517Z     return _ConnectionRecord(self)
2025-09-04T18:42:44.8754897Z            ^^^^^^^^^^^^^^^^^^^^^^^
2025-09-04T18:42:44.8755731Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 673, in __init__
2025-09-04T18:42:44.8756573Z     self.__connect()
2025-09-04T18:42:44.8757386Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 899, in __connect
2025-09-04T18:42:44.8758269Z     with util.safe_reraise():
2025-09-04T18:42:44.8759007Z          ^^^^^^^^^^^^^^^^^^^
2025-09-04T18:42:44.8760300Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
2025-09-04T18:42:44.8761304Z     raise exc_value.with_traceback(exc_tb)
2025-09-04T18:42:44.8762261Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 895, in __connect
2025-09-04T18:42:44.8763244Z     self.dbapi_connection = connection = pool._invoke_creator(self)
2025-09-04T18:42:44.8764019Z                                          ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-09-04T18:42:44.8764958Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/create.py", line 661, in connect
2025-09-04T18:42:44.8765864Z     return dialect.connect(*cargs, **cparams)
2025-09-04T18:42:44.8766290Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-09-04T18:42:44.8767175Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 629, in connect
2025-09-04T18:42:44.8768343Z     return self.loaded_dbapi.connect(*cargs, **cparams)  # type: ignore[no-any-return]  # NOQA: E501
2025-09-04T18:42:44.8769019Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-09-04T18:42:44.8770024Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/psycopg/connection.py", line 96, in connect
2025-09-04T18:42:44.8770924Z     attempts = conninfo_attempts(params)
2025-09-04T18:42:44.8771878Z                ^^^^^^^^^^^^^^^^^^^^^^^^^
2025-09-04T18:42:44.8772845Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/psycopg/_conninfo_attempts.py", line 53, in conninfo_attempts
2025-09-04T18:42:44.8773837Z     raise e.OperationalError(str(last_exc))
2025-09-04T18:42:44.8774466Z psycopg.OperationalError: [Errno -3] Temporary failure in name resolution
2025-09-04T18:42:44.8774945Z 
2025-09-04T18:42:44.8775223Z The above exception was the direct cause of the following exception:
2025-09-04T18:42:44.8775655Z 
2025-09-04T18:42:44.8775801Z Traceback (most recent call last):
2025-09-04T18:42:44.8776438Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/bin/alembic", line 7, in <module>
2025-09-04T18:42:44.8776955Z     sys.exit(main())
2025-09-04T18:42:44.8777138Z              ^^^^^^
2025-09-04T18:42:44.8777724Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/alembic/config.py", line 1016, in main
2025-09-04T18:42:44.8778566Z     CommandLine(prog=prog).main(argv=argv)
2025-09-04T18:42:44.8779427Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/alembic/config.py", line 1006, in main
2025-09-04T18:42:44.8780362Z     self.run_cmd(cfg, options)
2025-09-04T18:42:44.8781170Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/alembic/config.py", line 940, in run_cmd
2025-09-04T18:42:44.8781890Z     fn(
2025-09-04T18:42:44.8782316Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/alembic/command.py", line 483, in upgrade
2025-09-04T18:42:44.8783130Z     script.run_env()
2025-09-04T18:42:44.8783956Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/alembic/script/base.py", line 549, in run_env
2025-09-04T18:42:44.8784861Z     util.load_python_file(self.dir, "env.py")
2025-09-04T18:42:44.8785477Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/alembic/util/pyfiles.py", line 116, in load_python_file
2025-09-04T18:42:44.8786029Z     module = load_module_py(module_id, path)
2025-09-04T18:42:44.8786279Z              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-09-04T18:42:44.8786810Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/alembic/util/pyfiles.py", line 136, in load_module_py
2025-09-04T18:42:44.8787390Z     spec.loader.exec_module(module)  # type: ignore
2025-09-04T18:42:44.8787656Z     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-09-04T18:42:44.8787996Z   File "<frozen importlib._bootstrap_external>", line 999, in exec_module
2025-09-04T18:42:44.8788878Z   File "<frozen importlib._bootstrap>", line 488, in _call_with_frames_removed
2025-09-04T18:42:44.8789963Z   File "/home/runner/work/AWA-App/AWA-App/services/api/migrations/env.py", line 55, in <module>
2025-09-04T18:42:44.8790700Z     run_migrations_online()
2025-09-04T18:42:44.8791505Z   File "/home/runner/work/AWA-App/AWA-App/services/api/migrations/env.py", line 43, in run_migrations_online
2025-09-04T18:42:44.8792322Z     with connectable.connect() as connection:
2025-09-04T18:42:44.8792987Z          ^^^^^^^^^^^^^^^^^^^^^
2025-09-04T18:42:44.8793862Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3277, in connect
2025-09-04T18:42:44.8794763Z     return self._connection_cls(self)
2025-09-04T18:42:44.8795147Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-09-04T18:42:44.8796023Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 145, in __init__
2025-09-04T18:42:44.8796975Z     Connection._handle_dbapi_exception_noconnection(
2025-09-04T18:42:44.8798144Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2440, in _handle_dbapi_exception_noconnection
2025-09-04T18:42:44.8799366Z     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
2025-09-04T18:42:44.8800541Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
2025-09-04T18:42:44.8801476Z     self._dbapi_connection = engine.raw_connection()
2025-09-04T18:42:44.8801934Z                              ^^^^^^^^^^^^^^^^^^^^^^^
2025-09-04T18:42:44.8802882Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3301, in raw_connection
2025-09-04T18:42:44.8803829Z     return self.pool.connect()
2025-09-04T18:42:44.8804184Z            ^^^^^^^^^^^^^^^^^^^
2025-09-04T18:42:44.8805018Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 447, in connect
2025-09-04T18:42:44.8805911Z     return _ConnectionFairy._checkout(self)
2025-09-04T18:42:44.8806321Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-09-04T18:42:44.8807207Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
2025-09-04T18:42:44.8808119Z     fairy = _ConnectionRecord.checkout(pool)
2025-09-04T18:42:44.8808548Z             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-09-04T18:42:44.8809425Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
2025-09-04T18:42:44.8810445Z     rec = pool._do_get()
2025-09-04T18:42:44.8810776Z           ^^^^^^^^^^^^^^
2025-09-04T18:42:44.8811585Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/pool/impl.py", line 306, in _do_get
2025-09-04T18:42:44.8812459Z     return self._create_connection()
2025-09-04T18:42:44.8812834Z            ^^^^^^^^^^^^^^^^^^^^^^^^^
2025-09-04T18:42:44.8813762Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 388, in _create_connection
2025-09-04T18:42:44.8814408Z     return _ConnectionRecord(self)
2025-09-04T18:42:44.8814645Z            ^^^^^^^^^^^^^^^^^^^^^^^
2025-09-04T18:42:44.8815170Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 673, in __init__
2025-09-04T18:42:44.8815674Z     self.__connect()
2025-09-04T18:42:44.8816149Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 899, in __connect
2025-09-04T18:42:44.8816650Z     with util.safe_reraise():
2025-09-04T18:42:44.8816856Z          ^^^^^^^^^^^^^^^^^^^
2025-09-04T18:42:44.8817371Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
2025-09-04T18:42:44.8818074Z     raise exc_value.with_traceback(exc_tb)
2025-09-04T18:42:44.8818599Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 895, in __connect
2025-09-04T18:42:44.8819191Z     self.dbapi_connection = connection = pool._invoke_creator(self)
2025-09-04T18:42:44.8819505Z                                          ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-09-04T18:42:44.8820203Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/create.py", line 661, in connect
2025-09-04T18:42:44.8820873Z     return dialect.connect(*cargs, **cparams)
2025-09-04T18:42:44.8821127Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-09-04T18:42:44.8821647Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 629, in connect
2025-09-04T18:42:44.8822322Z     return self.loaded_dbapi.connect(*cargs, **cparams)  # type: ignore[no-any-return]  # NOQA: E501
2025-09-04T18:42:44.8822736Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-09-04T18:42:44.8823247Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/psycopg/connection.py", line 96, in connect
2025-09-04T18:42:44.8823757Z     attempts = conninfo_attempts(params)
2025-09-04T18:42:44.8824011Z                ^^^^^^^^^^^^^^^^^^^^^^^^^
2025-09-04T18:42:44.8824569Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/psycopg/_conninfo_attempts.py", line 53, in conninfo_attempts
2025-09-04T18:42:44.8825155Z     raise e.OperationalError(str(last_exc))
2025-09-04T18:42:44.8825635Z sqlalchemy.exc.OperationalError: (psycopg.OperationalError) [Errno -3] Temporary failure in name resolution
2025-09-04T18:42:44.8826194Z (Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-09-04T18:42:44.9454733Z ##[error]Process completed with exit code 1.
