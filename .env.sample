# Alerts & notifications
# Bot token from BotFather (format 123456789:ABCDEF)
TELEGRAM_TOKEN=
# Target chat/group ID (negative IDs allowed for groups)
TELEGRAM_DEFAULT_CHAT_ID=
# Master toggle for automatic alert evaluation
ALERTS_ENABLED=1
# Use "yaml" or "db" to load rules
ALERT_RULES_SOURCE=yaml
# Path to alert rule file when source=yaml
ALERT_RULES_FILE=config/alert_rules.yaml
# Structured alert bot config file (new rules engine)
ALERT_RULES_PATH=services/alert_bot/config.yaml
# Enable file watch + SIGHUP reload (set to 1 to enable)
ALERT_RULES_WATCH=0
# Force rule enablement overrides (comma list like roi_drop:off)
ALERT_RULES_OVERRIDE=
# Evaluation concurrency for async rules
ALERT_EVAL_CONCURRENCY=8
# Max concurrent Telegram sends
ALERT_SEND_CONCURRENCY=8
# Global Telegram sends per second
ALERT_TELEGRAM_MAX_RPS=25.0
# Per-chat Telegram sends per second
ALERT_TELEGRAM_MAX_CHAT_RPS=1.0
# Per-rule evaluation timeout seconds
ALERT_RULE_TIMEOUT_S=15
# Cron expression for evaluate_alert_rules
ALERTS_EVALUATION_INTERVAL_CRON=*/5 * * * *
# Cron expression for the consolidated alert bot runner
ALERT_SCHEDULE_CRON=*/1 * * * *
# HTTP connect timeout for Telegram requests
TELEGRAM_CONNECT_TIMEOUT_S=3.0
# Total timeout for Telegram requests
TELEGRAM_TOTAL_TIMEOUT_S=10.0
# Override Telegram API base (useful for tests/mocks)
TELEGRAM_API_BASE=https://api.telegram.org

# Stats cache & guardrails
STATS_ENABLE_CACHE=true
STATS_CACHE_TTL_S=600
STATS_CACHE_NAMESPACE=stats:
STATS_MAX_DAYS=365
REQUIRE_CLAMP=false

# Scheduled MV refresh
SCHEDULE_MV_REFRESH=true
MV_REFRESH_CRON="30 2 * * *"

# LLM defaults
LLM_REQUEST_TIMEOUT_S=60.0

# OIDC JWKS tuning
OIDC_JWKS_TTL_SECONDS=300
OIDC_JWKS_STALE_GRACE_SECONDS=120
OIDC_JWKS_TIMEOUT_CONNECT_S=2.0
OIDC_JWKS_TIMEOUT_READ_S=2.0
OIDC_JWKS_TIMEOUT_TOTAL_S=5.0
OIDC_JWKS_POOL_LIMIT=8
OIDC_JWKS_BACKGROUND_REFRESH=1

# Smart rate-limit overlays
RATE_LIMIT_WINDOW_SECONDS=60
RATE_LIMIT_SCORE_PER_USER=8
RATE_LIMIT_ROI_BY_VENDOR_PER_USER=12
CELERY_LOOP_LAG_MONITOR=1
