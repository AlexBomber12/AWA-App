fees_h10-1  | celery beat v5.4.0 (opalescent) is starting.
fees_h10-1  | __    -    ... __   -        _
fees_h10-1  | LocalTime -> 2025-09-08 19:41:16
fees_h10-1  | Configuration ->
fees_h10-1  |     . broker -> redis://redis:6379/0
fees_h10-1  |     . loader -> celery.loaders.app.AppLoader
fees_h10-1  |     . scheduler -> celery.beat.PersistentScheduler
fees_h10-1  |     . db -> celerybeat-schedule
fees_h10-1  |     . logfile -> [stderr]@%INFO
fees_h10-1  |     . maxinterval -> 5.00 minutes (300s)
fees_h10-1  | [2025-09-08 19:41:16,124: INFO/MainProcess] beat: Starting...
api-1       | â³ Waiting for Postgres...
api-1       | INFO  [alembic.runtime.migration] Context impl PostgresqlImpl.
api-1       | INFO  [alembic.runtime.migration] Will assume transactional DDL.
api-1       | INFO  [alembic.runtime.migration] Running upgrade  -> 0001_baseline
api-1       | INFO  [alembic.runtime.migration] Running upgrade 0001_baseline -> 0002_create_roi_view
api-1       | INFO  [alembic.runtime.migration] Running upgrade 0002_create_roi_view -> 3e9d5c5aff2c
api-1       | INFO  [alembic.runtime.migration] Running upgrade 3e9d5c5aff2c -> 0003_vendor_prices
api-1       | INFO  [alembic.runtime.migration] Running upgrade 0003_vendor_prices -> 0004_fee_cron
api-1       | INFO  [alembic.runtime.migration] Running upgrade 0004_fee_cron -> 0006_fix_roi_views
api-1       | INFO  [alembic.runtime.migration] Running upgrade 0006_fix_roi_views -> 0020_unified_schema
api-1       | INFO  [alembic.runtime.migration] Running upgrade 0020_unified_schema -> 0022_fix_roi_view
api-1       | INFO  [alembic.runtime.migration] Running upgrade 0022_fix_roi_view -> 0023_add_storage_fee
api-1       | INFO  [alembic.runtime.migration] Running upgrade 0023_add_storage_fee -> 0024_create_buybox
api-1       | INFO  [alembic.runtime.migration] Running upgrade 0024_create_buybox -> 0025_pr4_indexes_loadlog
api-1       | INFO  [alembic.runtime.migration] Running upgrade 0025_pr4_indexes_loadlog -> 0026_fix_refund_views
api-1       | INFO  [alembic.runtime.migration] Running upgrade 0025_pr4_indexes_loadlog -> 0026_amazon_new_reports
api-1       | INFO  [alembic.runtime.migration] Running upgrade 0026_amazon_new_reports, 0026_fix_refund_views -> 0027_merge_reports_refund_heads
api-1       | INFO:     Started server process [1]
api-1       | INFO:     Waiting for application startup.
api-1       | INFO:     Application startup complete.
api-1       | INFO:     Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
api-1       | INFO:     127.0.0.1:38942 - "GET /health HTTP/1.1" 200 OK
api-1       | INFO:     127.0.0.1:32992 - "GET /health HTTP/1.1" 200 OK
api-1       | INFO:     127.0.0.1:33888 - "GET /health HTTP/1.1" 200 OK
api-1       | INFO:     127.0.0.1:56630 - "GET /health HTTP/1.1" 200 OK
api-1       | INFO:     127.0.0.1:57514 - "GET /health HTTP/1.1" 200 OK
api-1       | INFO:     127.0.0.1:35344 - "GET /health HTTP/1.1" 200 OK
api-1       | INFO:     127.0.0.1:54518 - "GET /health HTTP/1.1" 200 OK
api-1       | INFO:     127.0.0.1:36916 - "GET /health HTTP/1.1" 200 OK
api-1       | INFO:     127.0.0.1:37858 - "GET /health HTTP/1.1" 200 OK
api-1       | INFO:     127.0.0.1:46450 - "GET /health HTTP/1.1" 200 OK
api-1       | INFO:     127.0.0.1:56732 - "GET /health HTTP/1.1" 200 OK
api-1       | INFO:     127.0.0.1:38916 - "GET /health HTTP/1.1" 200 OK
api-1       | INFO:     127.0.0.1:48928 - "GET /health HTTP/1.1" 200 OK
api-1       | INFO:     127.0.0.1:41522 - "GET /health HTTP/1.1" 200 OK
api-1       | INFO:     127.0.0.1:37216 - "GET /health HTTP/1.1" 200 OK
api-1       | INFO:     127.0.0.1:36936 - "GET /health HTTP/1.1" 200 OK
api-1       | INFO:     127.0.0.1:36636 - "GET /health HTTP/1.1" 200 OK
minio-1     | INFO: Formatting 1st pool, 1 set(s), 1 drives per set.
api-1       | INFO:     127.0.0.1:47868 - "GET /health HTTP/1.1" 200 OK
api-1       | INFO:     127.0.0.1:54496 - "GET /health HTTP/1.1" 200 OK
minio-1     | INFO: WARNING: Host local has more than 0 drives of set. A host failure will result in data becoming unavailable.
etl-1       | Traceback (most recent call last):
etl-1       |   File "/app/services/etl/keepa_ingestor.py", line 11, in <module>
etl-1       |     from pg_utils import connect
etl-1       | ModuleNotFoundError: No module named 'pg_utils'
api-1       | INFO:     127.0.0.1:47292 - "GET /health HTTP/1.1" 200 OK
api-1       | INFO:     127.0.0.1:40758 - "GET /health HTTP/1.1" 200 OK
api-1       | INFO:     127.0.0.1:49110 - "GET /health HTTP/1.1" 200 OK
api-1       | INFO:     127.0.0.1:41480 - "GET /health HTTP/1.1" 200 OK
api-1       | INFO:     127.0.0.1:52368 - "GET /health HTTP/1.1" 200 OK
minio-1     | MinIO Object Storage Server
minio-1     | Copyright: 2015-2025 MinIO, Inc.
minio-1     | License: GNU AGPLv3 - https://www.gnu.org/licenses/agpl-3.0.html
minio-1     | Version: RELEASE.2025-09-07T16-13-09Z (go1.24.6 linux/amd64)
minio-1     | 
minio-1     | API: http://172.18.0.3:9000  http://127.0.0.1:9000 
minio-1     | WebUI: http://172.18.0.3:9001 http://127.0.0.1:9001  
minio-1     | 
minio-1     | Docs: https://docs.min.io
celery_worker-1  | /usr/local/lib/python3.12/site-packages/celery/platforms.py:829: SecurityWarning: You're running the worker with superuser privileges: this is
celery_worker-1  | absolutely not recommended!
celery_worker-1  | 
celery_worker-1  | Please specify a different user using the --uid option.
celery_worker-1  | 
celery_worker-1  | User information: uid=0 euid=0 gid=0 egid=0
celery_worker-1  | 
celery_worker-1  |   warnings.warn(SecurityWarning(ROOT_DISCOURAGED.format(
celery_worker-1  |  
celery_worker-1  |  -------------- celery@7935e664da13 v5.3.6 (emerald-rush)
celery_worker-1  | --- ***** ----- 
celery_worker-1  | -- ******* ---- Linux-6.11.0-1018-azure-x86_64-with-glibc2.41 2025-09-08 19:41:15
celery_worker-1  | - *** --- * --- 
celery_worker-1  | - ** ---------- [config]
celery_worker-1  | - ** ---------- .> app:         awa_app:0x7f2ff6e9b860
celery_worker-1  | - ** ---------- .> transport:   redis://redis:6379/0
celery_worker-1  | - ** ---------- .> results:     redis://redis:6379/1
celery_worker-1  | - *** --- * --- .> concurrency: 4 (prefork)
celery_worker-1  | -- ******* ---- .> task events: OFF (enable -E to monitor tasks in this worker)
celery_worker-1  | --- ***** ----- 
celery_worker-1  |  -------------- [queues]
celery_worker-1  |                 .> ingest           exchange=ingest(direct) key=ingest
celery_worker-1  |                 
celery_worker-1  | 
celery_worker-1  | [tasks]
celery_worker-1  |   . ingest.import_file
celery_worker-1  |   . ingest.rebuild_views
celery_worker-1  | 
celery_worker-1  | [2025-09-08 19:41:16,141: WARNING/MainProcess] /usr/local/lib/python3.12/site-packages/celery/worker/consumer/consumer.py:507: CPendingDeprecationWarning: The broker_connection_retry configuration setting will no longer determine
postgres-1       | The files belonging to this database system will be owned by user "postgres".
postgres-1       | This user must also own the server process.
postgres-1       | 
postgres-1       | The database cluster will be initialized with locale "en_US.UTF-8".
postgres-1       | The default text search configuration will be set to "english".
postgres-1       | 
postgres-1       | Data page checksums are disabled.
postgres-1       | 
postgres-1       | fixing permissions on existing directory /var/lib/postgresql/data ... ok
postgres-1       | creating subdirectories ... ok
postgres-1       | selecting dynamic shared memory implementation ... posix
postgres-1       | selecting default max_connections ... 100
postgres-1       | selecting default shared_buffers ... 128MB
postgres-1       | selecting default time zone ... UTC
postgres-1       | creating configuration files ... ok
postgres-1       | running bootstrap script ... ok
postgres-1       | performing post-bootstrap initialization ... ok
postgres-1       | syncing data to disk ... ok
postgres-1       | 
postgres-1       | 
postgres-1       | initdb: warning: enabling "trust" authentication for local connections
postgres-1       | Success. You can now start the database server using:
postgres-1       | 
postgres-1       | initdb: hint: You can change this by editing pg_hba.conf or using the option -A, or --auth-local and --auth-host, the next time you run initdb.
postgres-1       |     pg_ctl -D /var/lib/postgresql/data -l logfile start
celery_worker-1  | whether broker connection retries are made during startup in Celery 6.0 and above.
celery_worker-1  | If you wish to retain the existing behavior for retrying connections on startup,
postgres-1       | 
postgres-1       | waiting for server to start....2025-09-08 19:41:10.340 GMT [48] LOG:  starting PostgreSQL 16.10 (Debian 16.10-1.pgdg13+1) on x86_64-pc-linux-gnu, compiled by gcc (Debian 14.2.0-19) 14.2.0, 64-bit
postgres-1       | 2025-09-08 19:41:10.341 GMT [48] LOG:  listening on Unix socket "/var/run/postgresql/.s.PGSQL.5432"
celery_worker-1  | you should set broker_connection_retry_on_startup to True.
celery_worker-1  |   warnings.warn(
celery_worker-1  | 
celery_worker-1  | [2025-09-08 19:41:16,151: INFO/MainProcess] Connected to redis://redis:6379/0
celery_worker-1  | [2025-09-08 19:41:16,152: WARNING/MainProcess] /usr/local/lib/python3.12/site-packages/celery/worker/consumer/consumer.py:507: CPendingDeprecationWarning: The broker_connection_retry configuration setting will no longer determine
celery_worker-1  | whether broker connection retries are made during startup in Celery 6.0 and above.
celery_worker-1  | If you wish to retain the existing behavior for retrying connections on startup,
celery_worker-1  | you should set broker_connection_retry_on_startup to True.
celery_worker-1  |   warnings.warn(
celery_worker-1  | 
celery_worker-1  | [2025-09-08 19:41:16,154: INFO/MainProcess] mingle: searching for neighbors
celery_worker-1  | [2025-09-08 19:41:17,163: INFO/MainProcess] mingle: all alone
celery_worker-1  | [2025-09-08 19:41:17,173: INFO/MainProcess] celery@7935e664da13 ready.
postgres-1       | 2025-09-08 19:41:10.344 GMT [51] LOG:  database system was shut down at 2025-09-08 19:41:10 GMT
postgres-1       | 2025-09-08 19:41:10.348 GMT [48] LOG:  database system is ready to accept connections
postgres-1       |  done
postgres-1       | server started
postgres-1       | CREATE DATABASE
postgres-1       | 
postgres-1       | 
postgres-1       | /usr/local/bin/docker-entrypoint.sh: running /docker-entrypoint-initdb.d/10_init_pg_hba.sh
postgres-1       | 
postgres-1       | 2025-09-08 19:41:10.551 GMT [48] LOG:  received fast shutdown request
postgres-1       | waiting for server to shut down....2025-09-08 19:41:10.551 GMT [48] LOG:  aborting any active transactions
postgres-1       | 2025-09-08 19:41:10.553 GMT [48] LOG:  background worker "logical replication launcher" (PID 54) exited with exit code 1
postgres-1       | 2025-09-08 19:41:10.553 GMT [49] LOG:  shutting down
postgres-1       | 2025-09-08 19:41:10.554 GMT [49] LOG:  checkpoint starting: shutdown immediate
redis-1          | sysctl: error setting key 'vm.overcommit_memory': Read-only file system
postgres-1       | 2025-09-08 19:41:10.570 GMT [49] LOG:  checkpoint complete: wrote 926 buffers (5.7%); 0 WAL file(s) added, 0 removed, 0 recycled; write=0.014 s, sync=0.002 s, total=0.017 s; sync files=301, longest=0.001 s, average=0.001 s; distance=7419 kB, estimate=7419 kB; lsn=0/1C317D0, redo lsn=0/1C317D0
postgres-1       | 2025-09-08 19:41:10.576 GMT [48] LOG:  database system is shut down
postgres-1       |  done
postgres-1       | server stopped
postgres-1       | 
postgres-1       | PostgreSQL init process complete; ready for start up.
postgres-1       | 
postgres-1       | 2025-09-08 19:41:10.669 GMT [1] LOG:  starting PostgreSQL 16.10 (Debian 16.10-1.pgdg13+1) on x86_64-pc-linux-gnu, compiled by gcc (Debian 14.2.0-19) 14.2.0, 64-bit
postgres-1       | 2025-09-08 19:41:10.669 GMT [1] LOG:  listening on IPv4 address "0.0.0.0", port 5432
postgres-1       | 2025-09-08 19:41:10.669 GMT [1] LOG:  listening on IPv6 address "::", port 5432
postgres-1       | 2025-09-08 19:41:10.671 GMT [1] LOG:  listening on Unix socket "/var/run/postgresql/.s.PGSQL.5432"
postgres-1       | 2025-09-08 19:41:10.673 GMT [66] LOG:  database system was shut down at 2025-09-08 19:41:10 GMT
postgres-1       | 2025-09-08 19:41:10.696 GMT [1] LOG:  database system is ready to accept connections
redis-1          | 1:C 08 Sep 2025 19:41:09.501 # WARNING Memory overcommit must be enabled! Without it, a background save or replication may fail under low memory condition. Being disabled, it can also cause failures without low memory condition, see https://github.com/jemalloc/jemalloc/issues/1328. To fix this issue add 'vm.overcommit_memory = 1' to /etc/sysctl.conf and then reboot or run the command 'sysctl vm.overcommit_memory=1' for this to take effect.
redis-1          | 1:C 08 Sep 2025 19:41:09.501 * oO0OoO0OoO0Oo Redis is starting oO0OoO0OoO0Oo
redis-1          | 1:C 08 Sep 2025 19:41:09.501 * Redis version=7.4.5, bits=64, commit=00000000, modified=0, pid=1, just started
redis-1          | 1:C 08 Sep 2025 19:41:09.501 # Warning: no config file specified, using the default config. In order to specify a config file use redis-server /path/to/redis.conf
redis-1          | 1:M 08 Sep 2025 19:41:09.501 * monotonic clock: POSIX clock_gettime
redis-1          | 1:M 08 Sep 2025 19:41:09.502 * Running mode=standalone, port=6379.
redis-1          | 1:M 08 Sep 2025 19:41:09.502 * Server initialized
redis-1          | 1:M 08 Sep 2025 19:41:09.502 * Ready to accept connections tcp
